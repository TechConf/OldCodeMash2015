/*
  Core MVC support
  Copyright (c) 2009, 2010, Oracle and/or its affiliates. All rights reserved.
*/
var mvc={};(function(K){var r="mvccore";var N=false;if(typeof Object.create!=="function"){Object.create=(function(){function U(){}return(function(V){U.prototype=V;return new U()})})()}function y(){var U=location.search;var V=U.indexOf("#");var W={};if(V>=0){U=U.substring(V+1)}if(U.charAt(0)=="?"){U=U.substring(1)}U.replace(/([^=&]+)=([^&]*)/g,function(X,Z,Y){var aa=decodeURIComponent(Z);var ab=decodeURIComponent(Y);if(W.hasOwnProperty(aa)){if($.isArray(W[aa])){W[aa].push(ab)}else{W[aa]=[W[aa],ab]}}else{W[aa]=ab}});return W}K.getContextRoot=function(){var V=location.pathname.split("/");var U="";if(V.length>1){U="/"+V[1]}return U};var t=y();if(!window.console){if(t.debug==="1"){$(document).ready(function(){$("body").append("<div id='consoleLog'><textarea rows='6' cols='120'></textarea></div>")});window.console={log:function(U){var V=$("#consoleLog textarea");V.val(V.val()+"\n"+U);var W=V.get(0);if(W){W.scrollTop=W.scrollHeight}}}}else{window.console={log:function(U){}}}}K.logError=function(V){var U;if(V.constructor===ReferenceError){U="Reference error: "+V.message}else{if(V.constructor===Error){U="Error: "+V.message}else{if(V.constructor===RangeError){U="Range error: "+V.message}else{if(V.constructor===SyntaxError){U="Syntax error: "+V.message}else{if(V.constructor===TypeError){U="Type error: "+V.message}else{if(V.message){U=V.message}else{if(typeof V==="string"){U=V}else{U="unknown error"}}}}}}}if(V.fileName){U+=" @ "+V.fileName}if(V.lineNumber){U+="(line "+V.lineNumber+")"}if(console&&console.log){console.log(U)}};var l={FATAL:"fatal",ERROR:"error",WARNING:"warn",CONFIRMATION:"confirm",INFORMATION:"info"};var x=null;function o(W,V,aa){var Z,U;var Y=K.htmlBuilder();var X="ERROR";function ab(ac,ae,ad){Y.markup("<li><div><span class='icon ").attr(l[ac]).markup("'></span><span class='screenReadersOnly'>").content(x[ac]).markup(" </span>").content(ae).markup("</div>");if(ad){Y.markup("<div>").content(K.getMessage(r,"message.details")+" ").content(ad).markup("</div>")}Y.markup("</li>")}if(x===null){x={FATAL:K.getMessage(r,"message.severity.fatal"),ERROR:K.getMessage(r,"message.severity.error"),WARNING:K.getMessage(r,"message.severity.warning"),SUCCESS:K.getMessage(r,"message.severity.confirmation"),NORMAL:K.getMessage(r,"message.severity.information")}}Y.markup("<ul class='messageList'>");if(W===0||W==12029){ab(X,K.getMessage(r,"message.status.connect"))}else{if(W==404){ab(X,K.getMessage(r,"message.status.404"))}else{if(W==500){ab(X,K.getMessage(r,"message.status.500"))}else{if(W<200||W>299){ab(X,K.format(r,"message.status.other",W,V))}else{if(aa){for(Z=0;Z<aa.length;Z++){U=aa[Z];ab(U.severity,U.message,U.details)}}}}}}Y.markup("</ul>");K.doMessageDialog(K.getMessage(r,"message.dialog.title"),Y.toString())}function c(U){return U.indexOf("<!DOCTYPE HTML")>=0&&U.indexOf('action="'+K.getContextRoot()+'/j_security_check"')>0}var i=200;var b=1000;var n=null;var T=0;var D=null;var M="X-WriteToken";var I={processing:null,sessionExpired:null,reportStatus:o};var v=I;function H(U,W,V){return U+(U.indexOf("?")>=0?"&":"?")+W+"="+encodeURIComponent(V)}K.ajaxOptions=function(U){v=$.extend({},I,U)};K.ajax=function(ab,V,X,Y){var W=false;var Z=null;if(!Y){Y=null}if(!$.isFunction(X)){if(X!==null&&X!==undefined){Y=X}X=null}if(Y){Y=JSON.stringify(Y)}if(ab=="MULTI_DELETE"){ab="POST";V=H(V,"_method","MULTI_DELETE")}else{if(ab=="GET"&&Y){if(Y.length>1500){ab="POST";V=H(V,"_method","GET");W=true}else{V=H(V,"_json",Y);Y=null}}}var aa=(new Date()).getTime();var U={type:ab,url:V,data:Y,processData:false,dataType:"json",global:false,beforeSend:function(ad){var ae;var ac;Z=ad;if((ab=="POST"&&!W)||ab=="PUT"||ab=="DELETE"){if(D!==null){ad.setRequestHeader(M,D)}}if(T===1&&n===null){n=setTimeout(function(){n=null;if(v.processing){v.processing(true)}},i)}},dataFilter:function(ad,ac){if(c(ad)){return{sessionExpired:true}}return ad},error:function(af,ac,ad){v.reportStatus(af.status,af.statusText);if(X){try{X(null)}catch(ae){K.logError(ae)}}},success:function(ac,ae){var ad=(new Date()).getTime();var af,ah;if(ae=="success"){if(ac.sessionExpired){if(v.sessionExpired){v.sessionExpired()}ac=null}else{if(Z.status<200||Z.status>299||ac.messages.length>0){v.reportStatus(Z.status,Z.statusText,ac.messages)}if(ab=="GET"||W){D=Z.getResponseHeader(M)}}}if(X){try{X(ac)}catch(ag){K.logError(ag)}}},complete:function(af,ae){var ad=(new Date()).getTime()-aa;function ac(){if(v.processing){v.processing(false)}}T-=1;if(T===0){if(n===null){if(ad<b){setTimeout(function(){ac()},b-ad)}else{ac()}}else{clearTimeout(n);n=null}}}};if(ab=="POST"||ab=="PUT"){U.contentType="application/json"}T+=1;$.ajax(U)};var z=($.browser.msie&&$.browser.version<8);var E=function(X,V,U){var W=null;U=""+U;W=U.replace(V,function(Y){return X[Y]});return W};var s={"&":"&amp;","<":"&lt;",">":"&gt;","'":"&apos;",'"':"&quot;"};var m=/&|<|>|'|"/g;K.escapeHTMLAttr=function(U){return E(s,m,U)};var C={"&":"&amp;","<":"&lt;",">":"&gt;"};var A=/&|<|>/g;K.escapeHTMLContent=function(U){return E(C,A,U)};var P={markup:function(U){this.html+=U;return this},attr:function(U,V){if(arguments.length===1){V=U;U=null}if(U){this.html+=" ";this.html+=U;this.html+="='"}this.html+=K.escapeHTMLAttr(V);if(U){this.html+="'"}return this},optionalAttr:function(U,V){if(V&&typeof V!=="object"){this.html+=" ";this.html+=U;this.html+="='";this.html+=K.escapeHTMLAttr(V);this.html+="'"}return this},optionalBoolAttr:function(U,V){if(V===true){this.html+=" ";this.html+=U}return this},content:function(U){this.html+=K.escapeHTMLContent(U);return this},clear:function(){this.html=""},toString:function(){return this.html}};var G={markup:function(U){this.html.push(U);return this},attr:function(U,V){if(arguments.length===1){V=U;U=null}if(U){this.html.push(" ");this.html.push(U);this.html.push("='")}this.html.push(K.escapeHTMLAttr(V));if(U){this.html.push("'")}return this},optionalAttr:function(U,V){if(V&&typeof V!=="object"){this.html.push(" ");this.html.push(U);this.html.push("='");this.html.push(K.escapeHTMLAttr(V));this.html.push("'")}return this},optionalBoolAttr:function(U,V){if(V===true){this.html.push(" ");this.html.push(U)}return this},content:function(U){this.html.push(K.escapeHTMLContent(U));return this},clear:function(){this.html=[]},toString:function(){return this.html.join("")}};K.htmlBuilder=function(){var U=Object.create(z?G:P);U.clear();return U};var L=false;K.setAccessibilityMode=function(U){L=!!U};K.getAccessibilityMode=function(){return L};K.domChanged=function(){var U=$("#vbupdate");if(U.length===0){$("body").append("<div id='vbupdate' style='display:none;'>x<div>");U=$("#vbupdate")}U.innerHTML="x"};K.setFocus=function(V,U){U=U||0;V.tabIndex=U;setTimeout(function(){V.focus()},0)};K.bindFocus=function(W,V){function U(Y){var X=$.event.fix(Y);V(X)}if(W.addEventListener){W.addEventListener("focus",U,true)}else{if(W.attachEvent){W.attachEvent("onfocusin",U)}}};K.bindBlur=function(W,V){function U(Y){var X=$.event.fix(Y);V(X)}if(W.addEventListener){W.addEventListener("blur",U,true)}else{if(W.attachEvent){W.attachEvent("onfocusout",U)}}};var O={};var f={locale:"en",numberFormat:{decimalSeparator:".",groupingSeparator:",",groupingSize:3,minusSign:"-"},dateTimeFormat:{amPmStrings:["AM","PM"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dateTimePattern:"M/d/yy h:mm:ss a",datePattern:"M/d/yy",timePattern:"h:mm:ss a"}};K.setLocaleSettings=function(U){f=$.extend(true,f,U)};K.addMessageBundle=function(V,U){O[V]=U};function B(X,W){var V=O[X];var U;if(V){U=V[W];if(U){return U}}return null}K.getMessage=function(V,U){var W;if($.isArray(V)){$.each(V,function(X,Y){W=B(Y,U);if(W){return false}})}else{W=B(V,U)}return W===null?U:W};K.format=function(W,V){var X=K.getMessage(W,V);var U=[X].concat(Array.prototype.slice.call(arguments,2));return K.formatMessage.apply(this,U)};K.formatMessage=function(Y){var W=/\{([0-9]*)\}/g;var V;if($.isArray(arguments[1])){V=arguments[1]}else{V=Array.prototype.slice.call(arguments,1)}var X=0;var U=Y.replace(W,function(Z,aa){var ab=parseInt(aa,10);X++;if(ab>=V.length){throw"format("+Y+"): too few arguments"}return K.escapeHTMLContent(V[ab])});if(X<V.length){K.logError("Warning: format("+Y+"): too many arguments. Expecting "+X+", got "+V.length)}return U};K.formatNumber=function(Z,Y){var U;var W=f.numberFormat;var X=(Y===null||Y===undefined)?Z.toString(10):Z.toFixed(Y);if(X.indexOf("e")>=0){return X}if(X.charAt(0)=="-"){X=X.substring(1)}var V=X.indexOf(".");if(V==-1){V=X.length;U=""}else{U=W.decimalSeparator+X.substring(V+1)}if(W.groupingSeparator&&W.groupingSize){do{V-=W.groupingSize;if(V>0){U=W.groupingSeparator+X.substr(V,W.groupingSize)+U}else{if(V<=0){U=X.substr(0,W.groupingSize+V)+U}}}while(V>0)}else{U=X.substring(0,V)+U}if(Z<0){U=W.minusSign+U}return U};K.formatInteger=function(U){return K.formatNumber(U,0)};function J(V,U){V=""+V;U=U-V.length;if(U<0){U=0}return"00000000".substr(0,U)+V}K.getDateTimeDisplayFormat=function(Y,ac){var ab=f.dateTimeFormat;Y=Y||ab.dateTimePattern;ac=ac||ab.localizedDateTimePattern;var V=false;var aa="";var X,W,Z,U;for(X=0;X<Y.length;X++){Z=Y.charAt(X);U=ac.charAt(X);if(!V&&/[a-z,A-Z]/.test(Z)){W=X+1;while(W<Y.length&&Y.charAt(W)==Z){W+=1}X=W-1;switch(Z){case"'":if(X+1<Y.length&&Y.charAt(X+1)=="'"){aa+="'"}else{V=true}break;case"y":case"M":case"d":case"h":case"H":case"m":case"s":aa+=U.toLowerCase();break;case"a":aa+=ab.amPmStrings[0].toLowerCase()+"/"+ab.amPmStrings[1].toLowerCase();break;case"K":case"k":if(U.toLowerCase()=="k"){aa+="h"}else{U.toLowerCase()}break}}else{if(Z=="'"){V=false}else{aa+=Z}}}return aa};K.formatDateTime=function(Y,ag){ag=ag||{};var ae=f.dateTimeFormat;var Z=ag.pattern||ae.dateTimePattern;var U=false;var ac="";var ad=""+Y.getUTCFullYear();var af=Y.getUTCHours();var ab=af<12?0:1;var X,W,aa,V;for(X=0;X<Z.length;X++){aa=Z.charAt(X);if(!U&&/[a-z,A-Z]/.test(aa)){V=1;W=X+1;while(W<Z.length&&Z.charAt(W)==aa){W+=1;V+=1}X=W-1;if("hH".indexOf(aa)>=0&&ag.forceHours&&"hH".indexOf(ag.forceHours)>=0){aa=ag.forceHours}switch(aa){case"'":if(X+1<Z.length&&Z.charAt(X+1)=="'"){ac+="'"}else{U=true}break;case"y":ac+=(ag.fullYear||V>2)?ad:ad.substring(2);break;case"M":if(V>=3){ac+=ae.shortMonths[Y.getUTCMonth()]}else{ac+=J(Y.getUTCMonth()+1,V)}break;case"d":ac+=J(Y.getUTCDate(),V);break;case"a":if(!ag.excludeAmPm){ac+=ae.amPmStrings[ab]}break;case"h":if(af>12){af=af-12}else{if(af===0){af=12}}ac+=J(af,V);break;case"H":ac+=J(af,V);break;case"m":ac+=J(Y.getUTCMinutes(),V);break;case"s":ac+=J(Y.getUTCSeconds(),V);break}}else{if(aa=="'"){U=false}else{ac+=aa}}}return ac};K.formatDate=function(V,U){U=U||{};if(!U.pattern){U.pattern=f.dateTimeFormat.datePattern}return K.formatDateTime(V,U)};K.formatTime=function(V,U){U=U||{};if(!U.pattern){U.pattern=f.dateTimeFormat.timePattern}return K.formatDateTime(V,U)};function k(aa,V,X){var U=[];var Y=0;var Z=0;var W=new RegExp("("+X[0]+")|("+X[1]+")|[-\\:\\./ \\,]+","ig");aa.replace(W,function(ab,ae,ac,af,ad){if(af>Z){U[Y]=ad.substring(Z,af);Y++}if(ae||ac||V){U[Y]=ab;Y++}Z=af+ab.length});if(Z<aa.length){U[Y]=aa.substring(Z)}return U}K.parseDateTime=function(af,X){X=X||{};var am=f.dateTimeFormat;var al=X.pattern||am.dateTimePattern;var ab=am.amPmStrings;var ae=k(af,X.strict,ab);var ak,ai,ao,an,ag,W;var Z=am.shortMonths;var aa,aq=null,aj,Y=0,ad=0,ap=0,V;var ah=null;var U=false;ao=0;for(ak=0;ak<al.length;ak++){an=al.charAt(ak);if(ao>=ae.length){break}ag=ae[ao];if(!U&&/[a-z,A-Z]/.test(an)){ai=ak+1;while(ai<al.length&&al.charAt(ai)==an){ai+=1}ak=ai-1;switch(an){case"'":if(ak+1<al.length&&al.charAt(ak+1)=="'"){V+="'"}else{V="";U=true}break;case"y":aa=parseInt(ag,10);if(ag.length==2){W=Math.floor((new Date()).getUTCFullYear()/100)*100;if(aa>50){W-=100}aa=W+aa}if(isNaN(aa)||aa<1970){return null}break;case"M":ag=ag.toLowerCase();for(ai=0;ai<Z.length;ai++){if(Z[ai].toLowerCase()==ag){aq=ai}}if(aq===null){aq=parseInt(ag,10)-1}if(isNaN(aq)||aq<0||aq>11){return null}break;case"d":aj=parseInt(ag,10);if(isNaN(aj)||aj<0||aj>31){return null}break;case"a":ag=ag.toLowerCase();if(ab[1].toLowerCase()==ag){ah=12}else{if(ab[0].toLowerCase()==ag){ah=0}else{if(!X.strict&&/\d*/.test(ag)){ao-=1}else{if(X.strict){return null}}}}break;case"h":case"H":Y=parseInt(ag,10);if(isNaN(Y)){return null}break;case"m":ad=parseInt(ag,10);if(isNaN(ad)){if(!X.strict){ad=0;ao-=1}else{return null}}break;case"s":ap=parseInt(ag,10);if(isNaN(ap)){if(!X.strict){ap=0;ao-=1}else{return null}}break}if(an!="'"){ao+=1}}else{if(U){if(an=="'"){U=false;if(X.strict&&ag!=V){return null}ao+=1}else{V+=an}}else{if(X.strict){if(ag!=al.substring(ak,ak+ag.length)){return null}ak+=ag.length-1;ao+=1}}}}if(X.strict&&ao!=ae.length){return null}if(ah!==null){Y=Y+ah;if(Y==24){Y=12}else{if(Y==12){Y=0}}}var ac=new Date(Date.UTC(aa,aq,aj,Y,ad,ap));if(isNaN(ac)){return null}return ac};var g=/\{[^\}]+\}/g;function d(Z){var U=null;var W=Z.match(g);var V,Y;function X(ab){var af,ac,ae,ad,ag,aa,ai;var ah={};if(ab.indexOf("|")!==-1){af=ab.split("|");ah.op=af[0].substring(1);ah.arg=af[1];ae=af[2].split(",")}else{ae=[ab]}ah.vars=[];for(ac=0;ac<ae.length;ac++){ad=ae[ac];ai=ad.indexOf("=");if(ai!==-1){ag=ad.substring(0,ai);aa=ad.substring(ai+1)}else{ag=ad;aa=null}ah.vars.push({name:ag,def:aa})}return ah}if(W){U=[];for(V=0;V<W.length;V++){Y=W[V];Y=Y.substring(1,Y.length-1);U.push(X(Y))}}return U}var F={expand:function(U){if(!this.exps){return this.template}var V=0;var Y=false;var X=this.exps;var W=this.template.replace(g,function(aa){var ae=X[V];var ab,ad,ac,Z,ag;var af=ae.op;if(!af){ab=ae.vars[0];Z=encodeURIComponent(U[ab.name]);if(!Z){Z=ab.def?ab.def:""}}else{if(af=="join"){Z="";for(ad=0,ac=0;ad<ae.vars.length;ad++){ab=ae.vars[ad];ag=U[ab.name];if(ag!==null&&ag!==undefined){if(ac>0){Z+=ae.arg}ac++;Z+=ab.name+"="+encodeURIComponent(U[ab.name])}}}else{if(af=="prefix"){Z="";if(ae.vars.length!=1){K.logError("Invalid number of variables for prefix operator.");Y=true}else{ab=ae.vars[0];ag=U[ab.name];if(ag!==null&&ag!==undefined){if($.isArray(ag)){$.each(ag,function(ah,ai){Z+=ae.arg+ai})}else{Z=ae.arg+ag}}}}else{K.logError("Unknown uri template operation.");Y=true}}}V+=1;return Z});return Y?null:W}};K.uriTemplate=function(U){var V=Object.create(F);V.template=U;V.exps=d(U);return V};K.renderIcon=function(U,V){U.markup("<span class='icon ").attr(V).markup("'></span>")};K.renderButton=function(V,W){var U=W.styleClass;if(W.nb){if(U){U+="nb "+U}else{U="nb"}}V.markup("<button type='button'").optionalAttr(W.value).optionalAttr("id",W.id).optionalAttr("class",U).optionalAttr("title",W.tooltip).markup(">");if(W.icon){K.renderIcon(V,W.icon)}if(W.label){V.content(W.label)}V.markup("</button>")};K.layoutForm=function(X){var Y=0;var Z,W,U;var V=X.find(".ctrlRow > label, .ctrlRow > .label, .valueRow > .label").not(".above");V.each(function(){if($(this).prev().length===0){U=$(this).outerWidth();W=$(this).parent();if(W.hasClass(".ctrlRow")&&W.parent().hasClass(".ctrlRow")){U+=parseInt(W.css("marginLeft"),10)}Y=(U>Y)?U:Y}});V.each(function(){if($(this).prev().length===0){Z=Y-$(this).outerWidth();W=$(this).parent();if(W.hasClass(".ctrlRow")&&W.parent().hasClass(".ctrlRow")){Z-=parseInt(W.css("marginLeft"),10)}if(Z>0){Z+=parseInt($(this).css("paddingRight"),10);$(this).css("paddingRight",Z)}}});X.find(".ctrl").each(function(){if($(this).css("display")=="block"){var aa=$(this).prevAll("label, .label").outerHeight();$(this).css({position:"relative",top:"-"+aa+"px",left:(Y+parseInt($(this).css("marginLeft"),10))+"px"});$(this).parent().height($(this).outerHeight())}})};K.initIcons=function(V){if(!N){return}function U(aa,ad){var Z=document.styleSheets;var ab,ae,ac,af,W,Y,X;aa=aa.toLowerCase();for(af=0;af<Z.length;af++){ab=Z[af];ae=ab.cssRules?ab.cssRules:ab.rules;for(W=0;W<ae.length;W++){ac=ae[W];Y=ac.selectorText.toLowerCase();if(Y.indexOf(aa)>=0){X=ab.href;X=X.substring(0,X.lastIndexOf("/")+1);ad(ac,Y,X)}}}}U(".icon",function(Y,W,Z){var X=Y.style.backgroundImage;if(X){X=X.substring(4,X.length-1);if(X.charAt(0)=='"'){X=X.substring(1,X.length-1)}if(X.indexOf("//")==-1){X=Z+X}$(Y.selectorText,V).each(function(){var aa="<div><img alt='' src='"+X+"' style='position:relative;'></div>";$(this).css({"background-image":"none",position:"relative"}).get(0).innerHTML=aa})}})};var j=300;var R=null;K.getCurrentNote=function(){return R};K.showNote=function(W,V,ag,ae){var ab=$(window).width()+$(document).scrollLeft();var aa=$(document).scrollTop();var ah,af,ac,X,Z,U,ad,Y;var ai;ai=R!==null;if(R){R.remove()}R=$("<div id='noteWindow' class='noteWindow'><div class='noteWrapper'><div class='dstr'></div><div class='dsbl'><div class='ds'><div class='noteContent'>"+W+"</div><div class='callout'><img src='images/noteCone.png' alt=''></div></div></div></div></div>").css({position:"absolute",top:-99999,left:0}).appendTo("body");K.layoutForm(R);if(ag&&ae){ac=0;X=0}else{Y=V.offset();ag=Y.left;ae=Y.top;ac=V.width();X=V.height()}Z=R.width()+12;U=R.find(".noteWrapper").height();ad="tr";ah=ag+ac;af=ae-U;if(af-10<aa){ad="br";ah=ag+ac;af=ae+X}if(ah+10+Z>ab){ad="tl";ah=ag-Z;af=ae-U}if(af-10<aa){ad="bl";ah=ag-Z;af=ae+X}R.addClass(ad).css({display:"none",width:Z,height:U,top:af,left:ah}).fadeIn(ai?0:j);if(ad=="bl"||ad=="br"){R.find(".callout").css({top:-U})}K.domChanged();return R};K.hideNote=function(){if(R!==null&&!R.is(":animated")){R.fadeOut(j,function(){$(this).remove();if(R&&$(this).get(0)===R.get(0)){R=null}})}};K.formatNoteContent=function(U,Y){var W,X;var V=K.htmlBuilder();for(W=0;W<Y.length;W++){X=Y[W];if(X.separator){V.markup("<div class='separator'></div>")}else{if(X.value!==null){V.markup("<div class='valueRow'><span class='label'>").content(K.getMessage(U,X.label)).markup(": </span>");if(X.value.length>60){V.markup("<div>")}if(X.markup){V.markup(X.value)}else{V.content(X.value)}if(X.value.length>60){V.markup("</div>")}V.markup("</div>")}else{V.markup("<p>").content(K.getMessage(U,X.label)).markup("</p>")}}}return V.toString()};K.splitter=function(W){var aa=K.htmlBuilder();var ag=W.orientation=="horizontal";var V=$(W.after);var X,ac,af;var ab=ag?"left":"top";var ad,ae;var Z=null;function ah(ai,al,aj,ak){if(al<60){al=0;aj=true}if(aj){ai.addClass("closed");ai.find("button").attr("title",W.restoreText)}else{ai.removeClass("closed");ai.find("button").attr("title",W.collapseText)}ai.css(ab,al);if(ak){if(Z){clearTimeout(Z);Z=null}Z=setTimeout(function(){Z=null;W.change(al,aj)},300)}else{W.change(al,aj)}}function Y(){if(ag){return V.position().left+V.outerWidth()}return V.position().top+V.outerHeight()}function U(){var aj=V.parent();var ai=V.next().eq(0);if(ag){return aj.width()-ai.width()-60}return aj.height()-ai.height()-60}if(ag){X=Y();ac=0;af="e-resize";ad=$.ui.keyCode.RIGHT;ae=$.ui.keyCode.LEFT}else{X=0;ac=Y();af="s-resize";ad=$.ui.keyCode.DOWN;ae=$.ui.keyCode.UP}aa.markup("<div class='").attr((ag?"splitterH":"splitterV")+(W.closed?" closed":"")).markup("'><div></div><button type='button' title='").attr(W.closed?W.restoreText:W.collapseText).markup("'></button></div>");$(aa.toString()).insertAfter(W.after).css({position:"absolute",left:X,top:ac}).draggable({axis:ag?"x":"y",containment:"parent",cancel:"button",cursor:af,scroll:false,stop:function(al,aj){var ak=aj.position[ab];var ai=U();if(ak>=ai){ak=ai}ah($(this),ak,false)}}).hover(function(){$(this).addClass("ui-state-hover")},function(){$(this).removeClass("ui-state-hover")}).find("button").click(function(){var ai=$(this).parent();var aj=!ai.hasClass("closed");var ak=aj?0:Y();ah(ai,ak,aj)}).focus(function(ai){$(this).parent().addClass("ui-state-focus")}).blur(function(ai){$(this).parent().removeClass("ui-state-focus")}).keydown(function(am){var ak=am.keyCode;var al=null;var aj,ai;if(ak==ae){aj=$(this).parent();al=aj.position()[ab];al-=10}else{if(ak==ad){aj=$(this).parent();al=aj.position()[ab];if(al===0){al=Y()}else{al+=10}ai=U();if(al>ai){al=ai}}}if(al!==null){ah(aj,al,false,true);return false}})};var Q={};var u={};K.validate=function(ab,Z,ac){var X=null;var V=ab.constraints;var W,U,aa,Y;if(!V||(Z&&Z.get(0).disabled)){return true}for(W=0;W<V.length;W++){U=V[W];Y=[];if(typeof U==="string"||$.isFunction(U)){aa=U}else{aa=U.fn;if(U.args){Y=Y.concat(U.args)}}aa=$.isFunction(aa)?aa:Q[aa];Y.unshift(ab.value);X=aa.apply(ab,Y);if(ac){ac.call(ab,Z,X)}if(X!==null){break}}return X===null};function e(W,Z){var X,Y;var V=arguments.callee;var U=this;W.removeClass("error").unbind(".fieldError");if(Z){X=Z;W.addClass("error").bind("focus.fieldError",function(){K.showNote(X,W,true)}).bind("blur.fieldError",function(){Y=$.trim(W.val());U.value=Y;K.hideNote(true);setTimeout(function(){K.validate(U,W,V)},10)}).bind("mouseenter.fieldError",function(){K.showNote(X,W,false)}).bind("mouseleave.fieldError",function(){K.hideNote(false)})}}function a(Y,X){var W=K.htmlBuilder();var V=this;var U;if(Y){W.markup("<h3>").content(K.getMessage(r,"validation.dialog.messageTitle")).markup("</h3>");if(X){W.markup("<p>").content(X).markup("</p>")}this.formContext.find(".messages").html(W.toString()).slideDown("slow",function(){U=V.formContext.find(".error").eq(0);if(U.length>0){K.setFocus(U.get(0))}})}else{this.formContext.find(".messages").html("").hide()}}function w(X){var U=this;var V,W;for(V=0;V<U.length;V++){W=U[V];if(W.prop==X){return W}}return null}var q={getField:function(W,V){var U;if(W.name){U=$("input:radio[name="+V+W.name+"]")}else{U=$("#"+V+W.id)}return U.length>0?U:null},load:function(U,W){var X=this.fields;var V,aa,ab,Z,Y;W=W||"";function ac(ag){var ad,ae,af;ad=ag.formatter;ae=[];if(typeof ad==="string"||$.isFunction(ad)){af=ad}else{af=ad.fn;if(ad.args){ae=ae.concat(ad.args)}}af=$.isFunction(af)?af:u[af];ae.unshift("");Z.blur(function(){ae[0]=$(this).val();$(this).val(af.apply(ag,ae))})}for(V=0;V<X.length;V++){aa=X[V];ab=U[aa.prop];if(ab===null||ab===undefined){ab=""}else{if(aa.type=="date"){Y={fullYear:true};if(aa.formatter&&aa.formatter.args&&aa.formatter.args.length>0){Y.pattern=aa.formatter.args[0]}ab=K.formatDateTime(ab,Y)}else{if(aa.type!="boolean"){ab=ab.toString()}}}Z=this.getField(aa,W);if(Z===null){continue}if(Z.get(0).type=="checkbox"){Z.get(0).checked=ab}else{if(Z.get(0).type=="radio"){Z=Z.filter("[value="+ab+"]");if(Z.length>0){Z.get(0).checked=true}}else{Z.val(ab)}}if(aa.formatter){ac(aa)}}},store:function(W,Z){var ag=this;var U=this.options;var aa=this.fields;var af=false;var X,ad,ac,ae,ab,Y=null;function V(){var ah;ac=ag.getField(ad,Z);if(ac===null){return null}if(ac.get(0).type=="checkbox"){ah=ac.get(0).checked}else{if(ac.get(0).type=="radio"){ah=ac.filter(":checked").val()}else{ah=$.trim(ac.val())}}return ah}Z=Z||"";for(X=0;X<aa.length;X++){ad=aa[X];ae=V();if(ae===null){continue}ad.value=ae;if(!K.validate(ad,ac,U.fieldErrorHandler)){af=true}}if(!af&&U.globalConstraints){aa.find=w;Y=U.globalConstraints.call(U,aa);if(Y!==null){af=true}}U.formErrorHandler.call(U,af,Y);if(!af){for(X=0;X<this.fields.length;X++){ad=this.fields[X];ae=V();if(ae===null){continue}if(ad.type=="number"){if(ae!==""){ae=ae*1}else{ae=null}}else{if(ad.type=="date"){if(ae===""){ae=null}else{ab={fullYear:true};if(ad.formatter&&ad.formatter.args&&ad.formatter.args.length>0){ab.pattern=ad.formatter.args[0]}ae=K.parseDateTime(ae,ab)}}else{if(ad.type=="boolean"){if(ae===""){ae=null}}}}W[ad.prop]=ae}}return !af},clear:function(X){var Z=this.options;var U=this.fields;var V,Y,W;X=X||"";for(V=0;V<U.length;V++){Y=U[V];W=this.getField(Y,X);if(W===null){continue}if(Y.constraints){Z.fieldErrorHandler.call(Y,W,null)}if(Y.formatter){W.unbind("blur")}}Z.formErrorHandler.call(Z,false);K.hideNote()},layout:function(U){var V=this.options;K.layoutForm(U);if(V.layout){V.layout(U)}}};K.formHelper=function(U,V){var W=Object.create(q);W.fields=U;W.options=$.extend({},{formContext:null,layout:null,globalConstraints:null,fieldErrorHandler:e,formErrorHandler:a},V);return W};K.formHelper.addValidator=function(U,V){if(!Q[U]){Q[U]=V}else{K.logError("Attempt to overwrite formHelper validator ignored.")}};K.formHelper.addFormatter=function(U,V){if(!u[U]){u[U]=V}else{K.logError("Attempt to overwrite formHelper formatter ignored.")}};K.formHelper.addValidator("required",function(U){if(U===undefined||U===null||U===""){return K.getMessage(r,"validation.required")}return null});K.formHelper.addValidator("number",function(U){if(U===""){return null}if(parseFloat(U)!==U*1){return K.getMessage(r,"validation.number")}return null});K.formHelper.addValidator("integer",function(U){if(U===""){return null}if(parseInt(U,10)!==U*1){return K.getMessage(r,"validation.integer")}return null});K.formHelper.addValidator("range",function(W,V,U){if(W===""){return null}W=W*1;if(isNaN(W)){return K.getMessage(r,"validation.number")}if(V!==null&&U!==null){if(W>U||W<V){return K.format(r,"validation.range",V,U)}}else{if(U!==null){if(W>U){return K.format(r,"validation.rangeMax",U)}}else{if(V!==null){if(W<V){return K.format(r,"validation.rangeMin",V)}}}}return null});K.formHelper.addValidator("member",function(W,V){var U;for(U=0;U<V.length;U++){if(V[U]==W){return null}}return K.format(r,"validation.notMember")});K.formHelper.addValidator("datetime",function(X,W){var V;var U={strict:true};if(X===""){return null}if(W){U.pattern=W}V=K.parseDateTime(X,U);if(V===null){return K.getMessage(r,"validation.datetime")}return null});K.formHelper.addValidator("deltatime",function(U){if(U===""){return null}if(/^(\d+ )?\d?\d:\d?\d$/.test(U)){return null}return K.getMessage(r,"validation.deltatime")});K.formHelper.addFormatter("datetime",function(X,W){var V;var U={fullYear:true};if(W){U.pattern=W}V=K.parseDateTime(X,U);if(V===null){return X}var Y;Y=K.formatDateTime(V,U);return Y});K.formHelper.addFormatter("deltatime",function(ab,W){var X;var Z=1000;var aa=60*Z;var ad=60*aa;var ac=24*ad;var V=0;var U="";var Y=/^(\d+ )?(\d+:)?(\d+:)?(\d+)(.\d+)?$/.exec(ab);if(!Y){return ab}if(Y[1]){V+=Y[1]*ac}if(Y[2]&&Y[3]){V+=parseInt(Y[2],10)*ad+parseInt(Y[3],10)*aa+parseInt(Y[4],10)*Z;if(Y[5]){V+=Y[5].substring(1)*1}}else{if(Y[2]){V+=parseInt(Y[2],10)*ad+parseInt(Y[4],10)*aa;if(Y[5]){return ab}}else{V+=parseInt(Y[4],10)*Z;if(Y[5]){V+=Y[5].substring(1)*1}}}W=W||"m";X=Math.floor(V/ac);U+=X;V-=X*ac;X=Math.floor(V/ad);U+=" "+J(X,2);V-=X*ad;X=Math.floor(V/aa);U+=":"+J(X,2);if(W=="m"){return U}V-=X*aa;X=Math.floor(V/Z);U+=":"+J(X,2);if(W=="s"){return U}V-=X*Z;U+="."+V;return U});K.doModalDialog=function(U,ab){var W,aa;var ac=ab.formHelper;var V={};var X=false;var Y=ab.okLabel||K.getMessage(r,"button.ok.label");var Z=0;V[Y]=function(){if(ac.store(ab.formData)){X=true;if(ab.ok){try{ab.ok()}catch(ad){K.logError(ad)}}$(this).dialog("close")}};if(!ab.noCancel){V[K.getMessage(r,"button.cancel.label")]=function(){$(this).dialog("close")}}ac.load(ab.formData);U.addClass("ui-dialog-content").css({position:"absolute",width:"auto",height:"auto",top:"0",left:"-99999px",display:"block"});ac.layout(U);aa=U.outerWidth()+8;W=U.outerHeight()+58;U.css({position:"static",top:"0",left:"0",display:"none"});U.dialog({modal:true,draggable:true,closeText:K.getMessage(r,"button.close.label"),minWidth:aa,width:aa,minHeight:W,title:ab.title,buttons:V,dragStart:function(ae,ad){K.hideNote()},resizeStart:function(ae,ad){K.hideNote()},open:function(ae,ad){K.hideNote();$.ui.dialog.overlay.resize();K.initIcons(U.parent().parent())},close:function(af,ae){ac.clear();$(this).dialog("destroy").unbind("keypress.domodal");if(ab.close){try{ab.close(X===false)}catch(ad){K.logError(ad)}}if(ab.focusElemAfter){K.setFocus(ab.focusElemAfter,0)}}}).bind("keypress.domodal",function(ae){var ad;if(ae.keyCode==$.ui.keyCode.ENTER&&!ae.altKey&&!ae.ctrlKey){ad=$(ae.target).attr("type");if(ad=="text"||ad=="password"||ad=="checkbox"||ad=="radio"){setTimeout(function(){U.parent().find(".ui-dialog-buttons button").get(Z).focus();V[Y].call(U.get(0))},1);return false}}});K.domChanged()};K.doMessageDialog=function(ab,Y,aa){var X,V;var W={};var U=K.getMessage(r,"button.ok.label");W[U]=function(){$(this).dialog("close")};var Z=$("<div></div>").appendTo("body").hide();Z.html(Y);Z.css({position:"absolute",top:"0",left:"-99999px",display:"block"});V=Z.outerWidth()+8;X=Z.outerHeight()+58;Z.css({position:"static",top:"0",left:"0",display:"none"});Z.dialog({modal:true,draggable:true,closeText:K.getMessage(r,"button.close.label"),minWidth:V,width:V,minHeight:X,title:ab,buttons:W,open:function(ad,ac){K.hideNote();$.ui.dialog.overlay.resize();K.initIcons(Z.parent().parent())},close:function(ad,ac){$(this).dialog("destroy");$(this).remove();if(aa){if($.isFunction(aa)){aa()}else{K.setFocus(aa,0)}}}});K.domChanged()};var S=[];var h=null;function p(){if(h){clearTimeout(h);h=null}h=setTimeout(function(){var U;h=null;for(U=0;U<S.length;U++){S[U].fn()}},200)}K.bindResize=function(V,U){S.push({fn:V,order:U||10});S.sort(function(X,W){return X.order-W.order})};K.unbindResize=function(V){var U;for(U=0;U<S.length;U++){if(S[U].fn===V){S.splice(U,1)}}};$(document).ready(function(){$(window).resize(p);p();$("body").append("<p id='referenceTextSize' style='padding:0;position:absolute;top:0;left:-99999px;background-color:#878787;'>T</p>");var V=$("#referenceTextSize").css("background-color").toLowerCase();if(V!="#878787"&&V!="rgb(135, 135, 135)"){N=true}var U=$("#referenceTextSize").get(0);var W=U.offsetHeight;setInterval(function(){var X=U.offsetHeight;if(X!=W){p();W=X}},500)})})(mvc);