/*
  Flot plugin for drawing marker symbols in place of round points.
  Copyright (c) 2009, 2010, Oracle and/or its affiliates. All rights reserved.
*/
(function(e){var c={series:{markers:{show:false,radius:4,fillColor:"#ffffff"}}};var b={circle:function(j,i,k,h){j.arc(i,k,h,0,2*Math.PI,false)},square:function(q,o,n,k){var i=k/Math.SQRT2;var j=o-i,h=o+i,p=n-i,m=n+i;q.moveTo(j,p);q.lineTo(h,p);q.lineTo(h,m);q.lineTo(j,m);q.lineTo(j,p)},triangleUp:function(m,k,p,j){var o=j*Math.sin(Math.PI/6);var l=j*Math.cos(Math.PI/6);var i=p+o,n=p-j;m.moveTo(k,n);m.lineTo(k+l,i);m.lineTo(k-l,i);m.lineTo(k,n)},triangleDown:function(m,k,p,j){var o=j*Math.sin(Math.PI/6);var l=j*Math.cos(Math.PI/6);var i=p+j,n=p-o;m.moveTo(k,i);m.lineTo(k+l,n);m.lineTo(k-l,n);m.lineTo(k,i)},diamond:function(k,j,o,i){var n=j-i,m=j+i,l=o-i,h=o+i;k.moveTo(j,l);k.lineTo(m,o);k.lineTo(j,h);k.lineTo(n,o);k.lineTo(j,l)},halfCircleRight:function(j,i,k,h){j.arc(i,k,h,Math.PI/2,-Math.PI/2,true);j.closePath()},halfCircleLeft:function(j,i,k,h){j.arc(i,k,h,-Math.PI/2,Math.PI/2,true);j.closePath()},bar:function(r,o,n,k){var i=k*1.25;var p=k*0.4;var j=o-p,h=o+p,q=n-i,m=n+i;r.moveTo(j,q);r.lineTo(h,q);r.lineTo(h,m);r.lineTo(j,m);r.lineTo(j,q)}};var g=["circle","diamond","triangleUp","triangleDown","square","bar","halfCircleLeft","halfCircleRight"];function d(r,j,h){function m(z,A,w,G,t,E,D){var F=z.points,s=z.pointsize,v=b[A];for(var u=0;u<F.length;u+=s){var C=F[u],B=F[u+1];if(C===null||C<E.min||C>E.max||B<D.min||B>D.max){continue}r.beginPath();v(r,E.p2c(C),D.p2c(B)+t,w);if(G){r.fillStyle=G;r.fill()}r.stroke()}}r.save();r.translate(h.left,h.top);var o;var i=j.lines.lineWidth,p=j.shadowSize,k=j.markers.radius,l=j.markers.shape;if(i>0&&p>0){o=p/2;r.lineWidth=o;r.strokeStyle="rgba(0,0,0,0.1)";m(j.datapoints,l,k,null,o+o/2,j.xaxis,j.yaxis);r.strokeStyle="rgba(0,0,0,0.2)";m(j.datapoints,l,k,null,o/2,j.xaxis,j.yaxis)}r.lineWidth=i;r.strokeStyle=j.color;var q=j.markers.fill;var n=e.color.parse(q?j.markers.fillColor:j.color);m(j.datapoints,l,k,n.toString(),0,j.xaxis,j.yaxis);r.restore()}function a(l,h){var j=l.getPlotOffset();var i=0;var k=true;e.each(l.getData(),function(n,m){if(m.markers&&m.markers.show){if(m.markers.fill===undefined||m.markers.fill===null){m.markers.fill=k}if(!m.markers.shape){m.markers.shape=g[i];i+=1;if(i>=g.length){i=0;k=!k}}d(h,m,j)}})}function f(h){h.hooks.draw.push(a)}e.plot.plugins.push({init:f,options:c,name:"markers",version:"1.0"});e.plot.markers={draw:function(r,m,o,n,l,k,i,h,q){var p;function j(s,u,t){r.beginPath();b[m](r,s,u,l);if(t){r.fillStyle=t;r.fill()}r.stroke()}if(k>0&&i>0){p=i/2;r.lineWidth=p;r.strokeStyle="rgba(0,0,0,0.1)";j(o,n+p+p/2,null);r.strokeStyle="rgba(0,0,0,0.2)";j(o,n+p/2,null)}r.lineWidth=k;r.strokeStyle=h;j(o,n,q)}}})(jQuery);
/*
  Flot plugin for adjusting the data before ploting bar charts 
  Copyright (c) 2009, 2010, Oracle and/or its affiliates. All rights reserved.
*/
(function(c){var a={series:{bars:{adjustX:false}}};function b(j,f,h){var g;var l,e,k;if(f.bars.adjustX&&typeof f.order=="number"){g=h.points;l=h.pointsize;k=f.bars.barWidth*f.order-j.getData().length*f.bars.barWidth;for(e=0;e<g.length;e+=l){g[e]+=k}}}function d(e){e.hooks.processDatapoints.push(b)}c.plot.plugins.push({init:d,options:a,name:"timebars",version:"1.0"})})(jQuery);
/*
  jQuery plugin for drawing gauges.
  Copyright (c) 2009, 2010, Oracle and/or its affiliates. All rights reserved.
*/
(function(f){var l="linearVertical";var a="linearHorizontal";var k="radial";var e={type:l,min:null,max:null,thresholdMin:null,thresholdMax:null,tickFormatter:null,tickDecimals:null,labelMargin:5,color:"#000000",fillColor:"#ffffff",backgroundColor:null,highlightColor:"#eeeeee",tickColor:"rgba(0,0,0,0.15)",borderColor:null,borderWidth:2,padding:4,clickable:false,hoverable:false,mouseActiveRadius:10,highlightRadius:4};var h=40;var g=100;var j=8;var d=-1;var i=1;function c(m,n){return n*Math.cos(m)}function b(m,n){return n*Math.sin(m)}f.gauge=function(Z,V,B){var s={};var N;var t;var w;var Q;var r;var H;var A={top:0,left:0,bottom:0,right:0};var q;var y;var O;var Y;var I;var P;var L=[];var o=null;s.options=f.extend({},e,B);s.data=V;s.getWidth=function(){return w};s.getHeight=function(){return Q};s.offset=function(){var aa=P.offset();aa.left+=A.left;aa.top+=A.top;return aa};s.getChartOffsets=function(){return A};s.getCanvas=function(){return q};s.getValuePos=function(ac,ab){var af=this.options;var ag={};var aa,ae,ad;if(af.type==a){ag.x=w-this.yp2c(ab);ag.y=this.xp2c(ac,85)}else{if(af.type==l){ag.y=this.yp2c(ab);ag.x=this.xp2c(ac,85)}else{if(af.type==k){aa=Math.PI-this.yp2c(ab);ae=this.xp2c(ac,15);ad=Q-j;ag.x=c(aa,ae)+ad;ag.y=ad-b(aa,ae)}}}return ag};function T(){var aa=s.options;if(!aa.borderColor){aa.borderColor=aa.color}}function x(){N=Z.width();t=Z.height();Z.find("canvas").each(function(){f.event.remove(this);f.removeData(this)});Z.get(0).innerHTML="";if(Z.css("position")=="static"){Z.css("position","relative")}if(N<=0||t<=0){throw"Invalid dimensions for gauge: "+N+"x"+t}if(window.G_vmlCanvasManager){window.G_vmlCanvasManager.init_(document)}q=document.createElement("canvas");q.width=N;q.height=t;if(window.G_vmlCanvasManager){q=window.G_vmlCanvasManager.initElement(q)}q=f(q).appendTo(Z).get(0);y=q.getContext("2d");O=document.createElement("canvas");O.width=N;O.height=t;if(window.G_vmlCanvasManager){O=window.G_vmlCanvasManager.initElement(O)}O=f(O).appendTo(Z).css({position:"absolute",left:0,top:0}).get(0);Y=O.getContext("2d")}function F(){var ad=s.options;var ac=s.data;var ab,aa;ab=ad.min;if(ab===null){ab=ac.length>0&&ac[0].min?ac[0].min:d}f.each(ac,function(ae,af){if(af.min<ab){ab=af.min}});aa=ad.max;if(aa===null){aa=ac.length>0&&ac[0].max?ac[0].max:i}f.each(ac,function(ae,af){if(af.max>aa){aa=af.max}});ad.min=ab;ad.max=aa;if(ad.min==ad.max){ad.max+=0.01;ad.min-=0.01}}function n(ab,aa){return aa*Math.floor(ab/aa)}function X(){var ae=s.options;var al;if(ae.type==a){al=0.3*Math.sqrt(N)}else{if(ae.type==l){al=0.3*Math.sqrt(t)}else{al=0.3*Math.sqrt(Math.PI*Math.min(t,N))}}var ak=(ae.max-ae.min)/al;var am,ai,aa,ab;var ac=ae.tickDecimals;var ag=-Math.floor(Math.log(ak)/Math.LN10);if(ac!==null&&ag>ac){ag=ac}aa=Math.pow(10,-ag);ab=ak/aa;if(ab<1.5){am=1}else{if(ab<3){am=2;if(ab>2.25&&(ac===null||ag+1<=ac)){am=2.5;++ag}}else{if(ab<7.5){am=5}else{am=10}}}am*=aa;ae.tickDecimals=Math.max(0,(ac!==null)?ac:ag);ai=function(an){return an.toFixed(ae.tickDecimals)};if(!f.isFunction(ae.tickFormatter)){ae.tickFormatter=ai}I=[];var ad=n(ae.min,am);var ah=0;var aj=Number.NaN;var af;do{af=aj;aj=ad+ah*am;I.push({v:aj,label:ae.tickFormatter(aj)});ah+=1}while(aj<=ae.max&&aj!=af)}function K(){var ad=s.options;var ab,ae=[],aa,ac;if(ad.type==a){r=N/(I.length>0?I.length:1);for(ab=0;ab<I.length;++ab){aa=I[ab].label;if(aa){ae.push('<div class="tickLabel" style="float:left;width:'+r+'px">'+aa+"</div>")}}if(ae.length>0){ac=f('<div style="position:absolute;top:-10000px;width:10000px;">'+ae.join("")+'<div style="clear:left"></div></div>').appendTo(Z);H=ac.height();ac.remove()}}else{if(ad.type==l||ad.type==k){for(ab=0;ab<I.length;++ab){aa=I[ab].label;if(aa){ae.push('<div class="tickLabel">'+aa+"</div>")}}if(ae.length>0){ac=f('<div style="position:absolute;top:-10000px;">'+ae.join("")+"</div>").appendTo(Z);r=ac.width();H=ac.find("div").height();ac.remove()}}}if(r===null){r=0}if(H===null){H=0}}function C(){var ac=s.options;Z.find(".tickLabels").remove();var aa=['<div class="tickLabels" style="color:'+ac.color+'">'];function ad(ag){for(var af=0;af<I.length;++af){var ae=I[af];if(!ae.label||ae.v<ac.min||ae.v>ac.max){continue}aa.push(ag(ae))}}var ab=ac.borderWidth+ac.labelMargin;if(ac.type==a){ad(function(ae){return'<div style="position:absolute;top:'+(A.top+Q+ab)+"px;left:"+Math.round(A.left+w-s.yp2c(ae.v)-r/2)+"px;width:"+r+'px;text-align:center" class="tickLabel">'+ae.label+"</div>"})}else{if(ac.type==l){ad(function(ae){return'<div style="position:absolute;top:'+Math.round(A.top+s.yp2c(ae.v)-H/2)+"px;right:"+(A.right+w+ab)+"px;width:"+r+'px;text-align:right" class="tickLabel">'+ae.label+"</div>"})}else{if(ac.type==k){ad(function(ah){var ag=Math.PI-s.yp2c(ah.v);var ai=Q-j;var ae=c(ag,ai+ab);var af=ae>0?0:-r;return'<div style="position:absolute;top:'+Math.round(A.top+ai-b(ag,ai+ab)-H/2)+"px;left:"+Math.round(A.left+ai+ae+af)+"px;width:"+r+'px;text-align:center" class="tickLabel">'+ah.label+"</div>"})}}}aa.push("</div>");Z.append(aa.join(""))}function p(){var ac=s.options;var ag=ac.max-ac.min;var ai=s.data.length;var af,ak,aa;var ae,ab,aj,ah;K();var ad=ac.borderWidth+ac.labelMargin;A.top=A.left=A.bottom=A.right=ac.padding+ac.borderWidth;if(ac.type==a){ab=t-A.top-A.bottom-H-ad;aj=N-A.left-A.right-(j*2)}else{if(ac.type==l){ab=N-A.left-A.right-r-ad;aj=t-A.top-A.bottom-(j*2)}else{if(ac.type==k){ab=N-A.left-A.right-2*(r+ad);aj=t-A.top-A.bottom-j-H-ad;ah=Math.min(aj,ab/2)}}}if(ai===0){ai=1}ak=(ac.type==k?ah:ab)/ai;ae=0;if(ak<h){ak=h}else{if(ak>g){ak=g;ae=(ab-(ai*ak))/2}}aa=ak/100;if(ac.type==a||ac.type==l){af=aj/ag;s.yp2c=function(al){return j+((ac.max-al)*af)};s.xp2c=function(al,am){return(al*ak)+am*aa};if(ac.type==a){A.top+=ae;A.bottom+=ae+H+ad}else{A.left+=ae+r+ad;A.right+=ae}}else{if(ac.type==k){af=Math.PI/ag;s.yp2c=function(al){return(al-ac.min)*af};ak=ak*0.8;s.xp2c=function(al,am){return ah-(al*ak)-(am*aa)};A.top+=H+ad;A.left+=r+ad;A.right+=r+ad;if(ah<aj){A.top+=aj-ah}if(ah<ab/2){A.left+=ab/2-ah;A.right+=ab/2-ah}}}w=N-A.right-A.left;Q=t-A.top-A.bottom}function E(ac,af,ab){var ae=6;var ad=ab?-8:8;var aa=af+(ab?-ae:ae);y.beginPath();y.moveTo(ac,af);y.lineTo(ac-ad,aa);y.lineTo(ac+ad,aa);y.lineTo(ac,af);y.fill()}function u(){var ab=s.options;var ag=ab.borderWidth;var ai,ae,aa,aj,ah,af;function ad(ap,an,ao){var am=-ap/2;var al=(an*2)+(ap/2);var ak=an+ap+ao;y.moveTo(am,an);y.lineTo(am,ak);y.lineTo(al,ak);y.lineTo(al,an);y.arc(an,an,an+(ap/2),0,Math.PI,true)}function ac(){if(ab.type==a){y.fillRect(w-aj,0,-af,Q)}else{if(ab.type==l){y.fillRect(0,aj,w,af)}else{if(ab.type==k){aa=Q-j;y.beginPath();y.moveTo(aa,aa);y.arc(aa,aa,aa,Math.PI+ah,Math.PI+aj,false);y.fill()}}}}y.save();y.translate(A.left,A.top);if(ab.backgroundColor){y.fillStyle=ab.backgroundColor;if(ab.type==k){y.beginPath();ad(ag?ag:1,Q-j,j);y.fill()}else{y.fillRect(0,0,w,Q)}}if(ab.thresholdMax!==null&&ab.thresholdMax<ab.max){y.fillStyle=ab.highlightColor;aj=s.yp2c(ab.max);ah=s.yp2c(ab.thresholdMax);af=ah-aj;ac()}if(ab.thresholdMin!==null&&ab.thresholdMin>ab.min){y.fillStyle=ab.highlightColor;aj=s.yp2c(ab.thresholdMin);ah=s.yp2c(ab.min);af=ah-aj;ac()}y.lineWidth=1;y.strokeStyle=ab.tickColor;y.beginPath();for(ae=0;ae<I.length;++ae){ai=I[ae].v;if(ai<ab.min||ai>ab.max){continue}if(ab.type==a){ai=Math.floor(s.yp2c(ai)+0.5);y.moveTo(ai,0);y.lineTo(ai,Q)}else{if(ab.type==l){ai=Math.floor(s.yp2c(ai)+0.5);y.moveTo(0,ai);y.lineTo(w,ai)}else{if(ab.type==k){ai=Math.PI-s.yp2c(ai);aa=Q-j;y.moveTo(aa,aa);y.lineTo(c(ai,aa)+aa,aa-b(ai,aa))}}}}y.stroke();if(ag){y.lineWidth=ag;y.strokeStyle=ab.borderColor;if(ab.type==k){y.beginPath();ad(ag,Q-j,j);y.stroke()}else{y.strokeRect(-ag/2,-ag/2,w+ag,Q+ag)}}y.restore()}function z(af,ae){var ab=s.options;var ah;var aj,al,ad,ag,ak,ac,ai,aa;y.save();if(ab.type==a){y.rotate(Math.PI/2);y.translate(A.top,-A.left-w)}else{y.translate(A.left,A.top)}ac=s.xp2c(af,50);y.lineWidth=ab.borderWidth;y.strokeStyle=ab.color;y.beginPath();y.moveTo(ac,s.yp2c(ab.min));y.lineTo(ac,s.yp2c(ab.max));y.stroke();if(ae.value!==null){ah=ae.color;aj=s.yp2c(ae.value);if(ae.min!==undefined&&ae.max!==undefined){y.lineWidth=0;y.fillStyle=ah;E(ac,s.yp2c(ae.max),true);E(ac,s.yp2c(ae.min),false)}if(ae.avg!==undefined&&ae.stdev!==undefined){al=s.yp2c(ae.avg+ae.stdev/2);ai=s.yp2c(ae.avg-ae.stdev/2);ad=s.xp2c(af,40);aa=s.xp2c(af,60);y.lineWidth=1;y.strokeStyle=ab.color;y.fillStyle=f.color.parse(ah).scale("a",0.5).normalize().toString();y.fillRect(ad,al,aa-ad,ai-al);y.strokeRect(ad,al,aa-ad,ai-al);al=s.yp2c(ae.avg);y.lineWidth=2;y.strokeStyle=ab.color;y.beginPath();y.moveTo(ad+1,al);y.lineTo(aa-1,al);y.stroke()}y.strokeStyle=ah;y.lineWidth=2;y.beginPath();y.moveTo(s.xp2c(af,25),aj);y.lineTo(s.xp2c(af,75),aj);y.stroke();y.save();y.translate(s.xp2c(af,85),aj);if(ab.type==a){y.rotate(-Math.PI/2)}f.plot.markers.draw(y,ae.shape,0,0,4,2,0,ah,ae.fill?ab.fillColor:ah);y.restore()}y.restore()}function v(af,ae){var ad=s.options;var ag;var aa=Q-j;var ai,ak,ac,ab,aj,ah;y.save();y.translate(A.left+aa,A.top+aa);y.scale(-1,-1);ai=s.xp2c(af,50);y.lineWidth=ad.borderWidth;y.strokeStyle=ad.color;y.beginPath();y.arc(0,0,ai,Math.PI,0,true);y.stroke();if(ae.value!==null){ag=ae.color;ak=s.yp2c(ae.value);if(ae.min!==undefined&&ae.max!==undefined){y.lineWidth=0;y.fillStyle=ag;y.save();aj=s.yp2c(ae.max);y.translate(c(aj,ai),b(aj,ai));y.rotate(Math.PI+aj);E(0,0,true);y.restore();y.save();aj=s.yp2c(ae.min);y.translate(c(aj,ai),b(aj,ai));y.rotate(Math.PI+aj);E(0,0,false);y.restore()}if(ae.avg!==undefined&&ae.stdev!==undefined){aj=s.yp2c(ae.avg+ae.stdev/2);ah=s.yp2c(ae.avg-ae.stdev/2);ac=s.xp2c(af,40);ab=s.xp2c(af,60);y.lineWidth=1;y.strokeStyle=ad.color;y.fillStyle=f.color.parse(ag).scale("a",0.5).normalize().toString();y.beginPath();y.moveTo(c(aj,ac),b(aj,ac));y.lineTo(c(aj,ab),b(aj,ab));y.arc(0,0,ab,aj,ah,true);y.moveTo(c(ah,ab),b(ah,ab));y.lineTo(c(ah,ac),b(ah,ac));y.arc(0,0,ac,ah,aj,false);y.fill();y.stroke();aj=s.yp2c(ae.avg);y.lineWidth=2;y.strokeStyle=ad.color;y.beginPath();y.moveTo(c(aj,ac),b(aj,ac));y.lineTo(c(aj,ab),b(aj,ab));y.stroke()}y.strokeStyle=ag;ac=s.xp2c(af,25);ab=s.xp2c(af,75);y.lineWidth=2;y.beginPath();y.moveTo(c(ak,ac),b(ak,ac));y.lineTo(c(ak,ab),b(ak,ab));y.stroke();ac=s.xp2c(af,15);y.save();y.translate(c(ak,ac),b(ak,ac));y.scale(-1,-1);f.plot.markers.draw(y,ae.shape,0,0,4,1,0,ag,ae.fill?ad.fillColor:ag);y.restore()}y.restore()}function W(){var aa=s.options;y.clearRect(0,0,N,t);u();if(aa.type==k){f.each(s.data,function(ab,ac){v(ab,ac)})}else{f.each(s.data,function(ab,ac){z(ab,ac)})}}function S(ac,ab){var af=s.options;var ae=s.data;var ad=af.mouseActiveRadius;var aa=-1;var ag;f.each(ae,function(aj,ai){var an=ai.value;var ap,ao,al,am,ah,ak;if(an===null){return true}ag=s.getValuePos(aj,an);ap=Math.abs(ag.x-ac);ao=Math.abs(ag.y-ab);al=Math.sqrt(ap*ap+ao*ao);if(al<af.mouseActiveRadius){aa=aj;return false}});if(aa>=0){return{data:ae[aa],index:aa,px:ag.x,py:ag.y}}return null}function m(ac,ae){var af=P.offset();var ag={pageX:ae.pageX,pageY:ae.pageY};var ab=ae.pageX-af.left-A.left;var aa=ae.pageY-af.top-A.top;var ad=S(ab,aa);if(ad){ad.pageX=ad.px+af.left+A.left;ad.pageY=ad.py+af.top+A.top}Z.trigger(ac,[ag,ad])}function U(){var aa=s.options;P=f([O,q]);if(aa.hoverable){P.mousemove(function(ab){m("gaugehover",ab)})}if(aa.clickable){P.click(function(ab){m("gaugeclick",ab)})}}function J(){var ab=s.options;var ae,af,ad,ah,aa,ai,ag;var ac;o=null;Y.save();Y.clearRect(0,0,N,t);if(ab.type==a){Y.rotate(Math.PI/2);Y.translate(A.top,-A.left-w)}else{if(ab.type==l){Y.translate(A.left,A.top)}else{aa=Q-j;Y.translate(A.left+aa,A.top+aa);Y.scale(-1,-1)}}Y.lineWidth=ab.highlightRadius;ac=1.5*ab.highlightRadius;for(ae=0;ae<L.length;++ae){af=L[ae];ad=s.data[af];if(ab.type==k){ah=s.yp2c(ad.value);aa=s.xp2c(af,15);ai=c(ah,aa);ag=b(ah,aa)}else{ag=s.yp2c(ad.value);ai=s.xp2c(af,85)}Y.strokeStyle=f.color.parse(ad.color).scale("a",0.5).toString();Y.beginPath();Y.arc(ai,ag,ac,0,2*Math.PI,false);Y.stroke()}Y.restore()}function G(){if(!o){o=setTimeout(J,30)}}function D(aa){var ab;for(ab=0;ab<L.length;ab++){if(L[ab]===aa){return ab}}return -1}function R(aa){var ab=D(aa);if(ab==-1){L.push(aa);G()}}function M(aa){if(aa===null||aa===undefined){L=[];G()}var ab=D(aa);if(ab!=-1){L.splice(ab,1);G()}}T();x();F();X();p();C();W();U();s.draw=W;s.highlight=R;s.unhighlight=M;return s}})(jQuery);
/*
  Manage metric time series data
  Copyright (c) 2009, 2010, Oracle and/or its affiliates. All rights reserved.
*/
(function(){var f=10;var n=f*1000;var w=100;var s={};var d=false;var c=null;var e=null;var k=null;var B=[];var m=null;var t=0;function h(D){return D.server+":"+D.on+":"+D.a}function o(F){var D=B;var E;for(E=0;E<D.length;E++){D[E](F)}}function A(){var D,F,K,G,I,E;var H={};var J=0;for(F in s){if(s.hasOwnProperty(F)){D=s[F];if(D.active){J+=1;E=D.metric.server;G=D.metric.on;I=H[E];if(!I){I=H[E]={}}K=I[G];if(!K){K=I[G]={}}K[D.metric.a]=0}}}if(J>0){return H}return null}function C(I){var E,G,F,H;var K={};var J=0;function D(N,L){var R,P,Q,M,O;J+=1;M=L.metric.server;P=L.metric.on;O=K[N];if(!O){O=K[N]={}}Q=O[M];if(!Q){Q=O[M]={}}R=Q[P];if(!R){R=Q[P]={}}R[L.metric.a]=0}for(G in s){if(s.hasOwnProperty(G)){E=s[G];if(I){if(E.checkForHarvested){D("current",E)}}else{H=E.harvested;for(F in H){if(H.hasOwnProperty(F)){if(H[F].checkForHarvested){D(F,E)}}}}}}if(J>0){return K}return null}function r(){var E;var D=new Date().getTime();while(k<D){k+=n}E=(k-D)+10;c=setTimeout(a,E)}function y(E,F){var D;mvc.ajax("GET","data/diagnostics/currentMetricValues",function(G){if(!G){o("stop");d=false;return}D=G.body;F(D)},{metrics:E})}function u(D,G,I){var F,E;var H={metrics:G};if(D=="current"){H.durationMinutes=Math.ceil(n*w/1000/60)}else{E=D.split(";");H.start=E[0]+":00";H.durationMinutes=E[1];t+=1}mvc.ajax("GET","data/diagnostics/harvestedMetricValues",function(J){if(!J){o("stop");d=false;return}F=J.body;I(D,F)},H)}function x(D,F,E){if(D.since===null||F<D.since){D.since=F}D.count+=1;D.sum+=E;D.sumOfSquares+=(E*E);D.avg=D.sum/D.count;D.stdev=Math.sqrt((D.sumOfSquares/D.count)-(D.avg*D.avg));if(D.min===undefined||E<D.min){D.min=E}if(D.max===undefined||E>D.max){D.max=E}}function b(E,G,I){var F=E.stats;var H=E.data;var D;if(H.length>0){D=H[H.length-1][0];if(G-D>(2*n)){H.push([D+n,null])}}H.push([G,I]);x(F,G,I)}function j(E,I,N){var D,G,M,F,K;var H;var L=null;var J=null;if(I=="current"){D=E}else{D=E.harvested[I]}for(G=0;G<N.length;G++){M=N[G];H=M[0];if(J){if(L&&H-J>(2*L)){N.splice(G,0,[J+L,null]);G+=1}L=H-J}J=H;x(D.stats,H,M[1])}K=D.data.length;if(K===0){F=N.length-w;F=F<0?0:F;D.data=N.slice(F)}else{F=N.length-w-K;F=F<0?0:F;D.data=N.slice(F).concat(D.data)}D.checkForHarvested=false}function i(D){var E=D.metrics;var O=D.sampleTime;var K,I,N,L,M,G,F,H,J;for(H in E){if(E.hasOwnProperty(H)){J=E[H];for(K in J){if(J.hasOwnProperty(K)){N=J[K];for(L in N){if(N.hasOwnProperty(L)){I={server:H,on:K,a:L};M=h(I);G=s[M];if(G&&G.active){b(G,O,N[L]);F=G.data.length-w;G.lastShift=F>0?F:0;if(F==1){G.data.shift()}else{if(F>1){G.data=G.data.slice(G.data.length-w)}}}}}}}}}r();o("newData")}function q(K,D){var E=D.metrics;var L,I,O,M,N,G,F,H,J;for(H in E){if(E.hasOwnProperty(H)){J=E[H];for(L in J){if(J.hasOwnProperty(L)){O=J[L];for(M in O){if(O.hasOwnProperty(M)){I={server:H,on:L,a:M};N=h(I);G=s[N];if(G&&O[M]){j(G,K,O[M])}}}}}}}if(K=="current"){o("newData")}else{t-=1;if(t===0){o("harvestedData")}}}function a(){var E,F,D;if(!d){return}E=A();F=C(true);if(E===null&&F===null){o("stop");d=false;return}if(E){y(E,i)}if(F){for(D in F){if(F.hasOwnProperty(D)){u(D,F[D],q)}}}}function l(){if(d){return}o("start");if(k===null){k=new Date().getTime();k=Math.floor((k+1000)/1000)*1000;e=k}r();d=true}function g(){if(m!==null){return}m=setTimeout(function(){var D;var E=C(false);m=null;if(E===null){return}for(D in E){if(E.hasOwnProperty(D)){u(D,E[D],q)}}},1000)}function z(F){var D=0,E;for(E in F){if(F.hasOwnProperty(E)){D+=1}}return D}function v(){return{since:null,count:0,sum:0,sumOfSquares:0}}function p(D){return{metric:D,views:{},data:[],harvested:{},stats:v()}}window.wldfDM={minSamplePeriod:f,setSamplePeriod:function(D){if(D<f){D=f}n=D*1000},getSamplePeriod:function(){return n/1000},setMaxSamples:function(D){w=D},getMaxSamples:function(){return w},registerRange:function(F,E){var G=h(F);var D,H;if(!/^\d\d\/\d\d\/\d\d\d\d \d\d:\d\d;\d*$/.test(E)){throw"Invalid range "+E}D=s[G];if(!D){D=s[G]=p(F)}H=D.harvested[E];if(!H){H=D.harvested[E]={count:0,checkForHarvested:true,data:[],stats:v()};g()}H.count+=1},unregisterRange:function(F,E){var G=h(F);var D,H;D=s[G];if(D){H=D.harvested[E];if(H){H.count-=1;if(H.count===0){delete D.harvested[E]}}}},register:function(G,E){var H=h(G);var D,F;if(!s[H]){s[H]=p(G)}D=s[H];F=D.views[E];D.views[E]=F?F+1:1;if(D.active===undefined){D.checkForHarvested=true}D.active=true;l()},unregister:function(G,E){var H=h(G);var D,F;D=s[H];if(D){F=D.views[E];if(F){F=D.views[E]-=1;if(F===0){delete D.views[E];if(z(D.views)===0){D.active=false}}}}},bind:function(F){var D=B;var E;for(E=0;E<D.length;E++){if(D[E]===F){return}}D.push(F)},unbind:function(F){var D=B;var E;for(E=0;E<D.length;E++){if(D[E]===F){D.splice(E,1);break}}},clear:function(){var D,E;for(E in s){if(s.hasOwnProperty(E)){D=s[E];D.data=[];if(D.active){D.checkForHarvested=true}D.stats=v()}}o("newdata")},resetStats:function(){var D,E;for(E in s){if(s.hasOwnProperty(E)){D=s[E];D.stats=v()}}},hasData:function(){var D,E;for(E in s){if(s.hasOwnProperty(E)){D=s[E];if(D.data&&D.data.length>0){return true}}}return false},getMetricSeries:function(E){var F=h(E);var D;if(s[F]){return s[F]}else{return null}}}})();
/*
  UI widget for dashboard view
  Copyright (c) 2009, 2010, Oracle and/or its affiliates. All rights reserved.
*/
(function(f){var i=37,j=38,a=39,b=40;var l="dashboard";var d="statechange";var h="dashboardView";function k(n,o){return".dashRow:eq("+n+") .dashPanel:eq("+o+")"}function c(n){return".dashRow:eq("+n+")"}function e(n){return f("#"+n+"ViewMenu")}function m(n){var o=n.offset();o.right=o.left+n.width();o.bottom=o.top+n.height();return o}function g(n,p){var o=m(n);if(o.left>p.right||o.right<p.left||o.top>p.bottom||o.bottom<p.top){return false}return true}f.widget("ui.dashboardView",{_init:function(){var y=this;var s=this.options;var x=this.element;var t,w;var q=x.get(0).id;q=q?q:"";var u=mvc.htmlBuilder();var p=s.state;var z,n;var v=null;s.panelPosMap={};s.nextPanelId=0;s.lastCol=0;z=p.panels;u.markup("<div class='dashViewHeader'><h2>").content(p.name).markup("</h2><div class='headerBtns'>");mvc.renderButton(u,{id:q+"Menu",icon:"menu",nb:true,tooltip:mvc.getMessage(l,"view.menu")});u.markup("</div></div><div class='dashPanelContainer' style='position:relative;overflow:auto;'><ul class='panels'>");for(n=0;n<z.length;n++){this._renderRow(u,n)}u.markup("</ul></div>");x.html(u.toString()).addClass(h);if(p.activeState===undefined){p.activeState=false}this.resize(true);u.clear();u.markup("<div id='").attr(q+"ViewMenu").markup("'></div>");f(u.toString()).appendTo("body").hide();this._initMenu();t=x.find(".dashPanelContainer");w=m(t);this._forEachPanel(function(r,o){if(g(o,w)){y._initDashPanel(o,r)}else{s.panelPosMap[o.get(0).id].initNeeded=true}});this.resize();f("#"+q+"Menu").click(function(){var o=e(q);y._updateMenu(o);o.menu("toggle",f(this))});x.bind("click.dashboardView",function(A){var o=f(A.target);var r=o.attr("tabindex")||o.parent().attr("tabindex");var B=o.closest(".dashPanel").eq(0);if(B.length>0){s.lastCol=s.panelPosMap[B.get(0).id].c;y._select(B,r===undefined)}});this._select(x.find(".dashPanel:first"));x.bind("keydown.dashboardView",function(K){var H;var I,C,G,M,A,O,F,P,L,B,o,E,N,J;var D=false;if(K.altKey||K.ctrlKey||f(K.target).is("input, select, textarea")){return}H=K.keyCode;I=x.find(".dashPanel.selected");if(H==i){C=I.prev(".dashPanel");if(C.length===0){C=I.parents(".dashRow").prev().find(".dashPanel:last")}if(C.length===0){C=x.find(".dashPanel:last")}D=true}else{if(H==a){C=I.next(".dashPanel");if(C.length===0){C=I.parents(".dashRow").next().find(".dashPanel:first")}if(C.length===0){C=x.find(".dashPanel:first")}D=true}else{if(H==j){C=I.parents(".dashRow").prev();if(C.length===0){C=x.find(".dashRow:last")}C=C.find(".dashPanel");C=C.eq(Math.min(s.lastCol,C.length-1))}else{if(H==b){C=I.parents(".dashRow").next();if(C.length===0){C=x.find(".dashRow:first")}C=C.find(".dashPanel");C=C.eq(Math.min(s.lastCol,C.length-1))}}}}if(C&&C.length>0){M=s.panelPosMap[C.get(0).id];if(D){s.lastCol=M.c}if(M.initNeeded===true){M.initNeeded=false;A=p.panels[M.r][M.c];y._initDashPanel(C,A)}I.chart("unSelect");C.chart("select",true);G=C.get(0);J=t.get(0);O=C.width()+s.panelSpacing;F=C.height()+s.panelSpacing;P=G.offsetTop-(s.panelSpacing/2);L=P+F;B=G.offsetLeft-(s.panelSpacing/2);o=B+O;E=t.get(0).clientHeight;N=t.get(0).clientWidth;if(F>E||P<t.scrollTop()){J.scrollTop=P}else{if(L>t.scrollTop()+E){J.scrollTop=P-Math.max(E-F,0)}}if(O>N||B<t.scrollLeft()){J.scrollLeft=B}else{if(o>t.scrollLeft()+N){J.scrollLeft=B-Math.max(N-O,0)}}return false}});t.scroll(function(){if(v===null){v=setTimeout(function(){v=null;y._initOrUpdatePanels()},10)}});if(!p.fromTemplate){if(s.dropAccept){x.droppable({accept:s.dropAccept,addClasses:false,hoverClass:"dropActive",drop:function(r,o){var A=y._newPanel("chart");A.chart("addMetricFromDraggable",o.draggable)}})}}this._initRows(x.find(".dashRow > ul"))},add:function(p){var s=this.element;var u=this.options;var r=u.state.panels;var v;var t,n;var q=mvc.htmlBuilder();t=s.find(".dashPanel.selected");if(t.length>0){v=f.extend({},this._getPanelPosition(t));v.r+=1;v.c=0;r.splice(v.r,0,[])}else{r.push([]);v={r:r.length-1,c:0}}r[v.r].splice(v.c,0,p);this._renderRow(q,v.r);if(t.length>0){t.parents(".dashRow").eq(0).after(q.toString())}else{s.find(".panels").append(q.toString())}n=s.find(c(v.r)+" > ul");this._initRows(n);this._reindexAll();t=s.find(k(v.r,v.c));this._initDashPanel(t,r[v.r][v.c]);this.resize();this._select(t,true);this._trigger(d,0);return t},remove:function(t){var r=this.element;var s=this.options;var q=s.state.panels;var v,u;var n;var p;t=t||r.find(".dashPanel.selected");if(t.length>0){v=this._getPanelPosition(t);u=f.extend({},v);p=q[v.r][v.c];this._destroyDashPanel(t,p);n=t.parent();delete s.panelPosMap[t.get(0).id];t.remove();q[v.r].splice(v.c,1);if(q[v.r].length===0){q.splice(v.r,1);if(u.r>=q.length){u.r=q.length-1}n.parent().remove();this._reindexAll()}else{this._reindexRows([v.r])}this.resize();if(u.r>=0){if(u.c>=q[u.r].length){u.c=q[v.r].length-1}this._select(this.getPanel(u.r,u.c),true)}this._trigger(d,0)}},getPanels:function(){var q=this;var s=this.element;var t=this.options;var p=t.adapter;var r=t.state.panels;var n=[];s.find(".dashPanel").each(function(){var v=q._getPanelPosition(f(this));var o=r[v.r][v.c];var u=p.getName(o.state);n.push({name:u,r:v.r,c:v.c})});return n},getPanel:function(o,p){var n=this.element;return n.find(k(o,p))},start:function(){var n=this.element;var o=this.options.state;if(!o.activeState){this._forEachPanel(function(r,q){if(r.type=="chart"){f.ui.chart.start(r.state,o.id)}});o.activeState=true}},stop:function(){var n=this.element;var o=this.options.state;if(o.activeState){this._forEachPanel(function(r,q){if(r.type=="chart"){f.ui.chart.stop(r.state,o.id)}});o.activeState=false}},isActive:function(){return this.options.state.activeState},resize:function(J){var D=this.element;var E=this.options;var t=E.state;var u,O,x,K,r,M,L,B,q,n;var A,C,N,I,H;var v,p,F;var G=D.find(".dashPanelContainer");var z=G.children("ul").eq(0);var s;var y=false;if(!E.panelSpacing){p=D.find(".dashPanel:first");if(p.length>0){E.panelSpacing=(parseInt(p.css("margin-top"),10)+parseInt(p.css("border-top-width"),10))*2}}s=E.panelSpacing||12;if(!J){this._forEachPanel(function(P,o){if(!o.hasClass("chart")){return}var w=o.chart("getMinSize");w.h+=s;w.w+=s;if(w.h>E.minPanelHeight){E.minPanelHeight=w.h}if(w.w>E.minPanelWidth){E.minPanelWidth=w.w}})}A=t.panels;q=D.position();n=G.position();u=D.height()-(n.top-q.top)-2;O=D.width()-2;G.css({width:O,height:u});x=u/A.length;if(x<E.minPanelHeight){x=E.minPanelHeight;z.height(x*A.length)}if(x*A.length>u){O-=20;y=true}M=O;for(I=0;I<A.length;I++){C=A[I];B=E.minPanelWidth*C.length;if(B>M){M=B}}if(M>O&&!y){x-=20/A.length;if(x<E.minPanelHeight){x=E.minPanelHeight;z.height(x*A.length)}}this._initOrUpdatePanels();r=x-s;v=D.find(".dashPanel");F=D.find(".dashRow > ul");N=0;for(I=0;I<A.length;I++){C=A[I];F.eq(I).height(x);K=Math.floor(M/C.length);K-=s;for(H=0;H<C.length;H++){p=v.eq(N+H);L=p.height();B=p.width();if(L!=r||B!=K){p.css({height:r,width:K});if(!J){if(p.hasClass("chart")){p.chart("resize")}}}}N+=C.length}z.width(M)},update:function(){var q=this.options;var p=q.adapter;var n=m(this.element.find(".dashPanelContainer"));this._forEachPanel(function(r,o){if(g(o,n)){p.updatePanel(o,r.type,r.state)}else{q.panelPosMap[o.get(0).id].updateNeeded=true}})},destroy:function(){var n=this.element;var o=n.get(0).id;o=o?o:"";n.unbind(".dashboardView");n.droppable("destroy");n.html("").removeClass(h);e(o).remove();f.widget.prototype.destroy.call(this)},_initOrUpdatePanels:function(){var p=this;var s=this.options;var n=s.adapter;var r=this.element.find(".dashPanelContainer");var q=m(r);this._forEachPanel(function(t,o){var w=o.get(0).id;var u=s.panelPosMap[w].initNeeded===true;var v=s.panelPosMap[w].updateNeeded===true;if((u||v)&&g(o,q)){if(u){s.panelPosMap[w].initNeeded=false;p._initDashPanel(o,t)}if(v){s.panelPosMap[w].updateNeeded=false;n.updatePanel(o,t.type,t.state)}}})},_select:function(p,o){var n=this.element;if(p.length>0&&!p.hasClass("selected")){n.find(".dashPanel.selected").chart("unSelect");p.chart("select",o)}},_genChartName:function(n){var v=this.options.adapter;var u=n;var s=0;var r,p,t,o;function q(w){if(v.getName(w.state)==u){r=true;u=n+" "+s;return false}}do{s+=1;r=false;this._forEachPanel(q)}while(r);return u},_newPanel:function(p){var n=this.options.adapter;var o=this._genChartName(mvc.getMessage(l,"view.newChartName"));return this.add({type:p,state:n.newPanelState(p,o)})},_initDashPanel:function(q,o){var p=this;var n=this.options.adapter;n.initPanel(q,o.type,o.state,{getPanels:function(){return p.getPanels()},getPanel:function(s,t){return p.getPanel(s,t)},getActiveView:function(){var r=p.options.state;if(r.activeState){return r.id}return null}})},_destroyDashPanel:function(q,n){var p=this.element;var s=this.options;var r=s.state.activeState;if(n.type=="chart"){if(r){q.chart("stop",s.state.name)}q.chart("destroy")}},_resizeRow:function(s,x){var v=this.element;var q=this.options;var t,n,u;var r=v.children(".dashPanelContainer > ul").eq(0);var p=s.children(".dashPanel");x=x||p.length;n=s.width();t=n/x;if(t<q.minPanelWidth){t=q.minPanelWidth;u=t*x;if(u>n){n=u}}t-=q.panelSpacing||12;p.each(function(){f(this).width(t).chart("resize")});r.width(n);return t},_moveUp:function(){var p=this.element;var o=this.options.state.panels;var q,r,s,n;s=p.find(".dashPanel.selected");if(s.length>0){q=this._getPanelPosition(s);if(q.r===0){return}r=f.extend({},q);r.r-=1;n=p.find(c(r.r)+" > ul");if(r.c>=o[r.r].length){r.c=o[r.r].length-1;n.append(s)}else{n.find(".dashPanel").eq(r.c).before(s)}this._moved(q,r)}},_moveDown:function(){var p=this.element;var o=this.options.state.panels;var q,r,s,n;s=p.find(".dashPanel.selected");if(s.length>0){q=this._getPanelPosition(s);if(q.r==o.length-1){return}r=f.extend({},q);r.r+=1;n=p.find(c(r.r)+" > ul");if(r.c>=o[r.r].length){r.c=o[r.r].length-1;n.append(s)}else{n.find(".dashPanel").eq(r.c).before(s)}this._moved(q,r)}},_moveLeft:function(){var p=this.element;var o=this.options.state.panels;var q,r,s,n;s=p.find(".dashPanel.selected");if(s.length>0){q=this._getPanelPosition(s);if(q.c===0){return}r=f.extend({},q);r.c-=1;n=p.find(c(r.r)+" > ul");n.find(".dashPanel").eq(r.c).before(s);this._moved(q,r)}},_moveRight:function(){var p=this.element;var o=this.options.state.panels;var q,r,s,n;s=p.find(".dashPanel.selected");if(s.length>0){q=this._getPanelPosition(s);if(q.c>=o[q.r].length-1){return}r=f.extend({},q);r.c+=1;n=p.find(c(r.r)+" > ul");n.find(".dashPanel").eq(r.c).after(s);this._moved(q,r)}},_moveAbove:function(){var q=this.element;var p=this.options.state.panels;var r,s,t,n;var o=mvc.htmlBuilder();t=q.find(".dashPanel.selected");if(t.length>0){r=f.extend({},this._getPanelPosition(t));s=f.extend({},r);s.c=0;r.r+=1;p.splice(s.r,0,[]);this._renderRow(o,s.r);n=q.find(c(s.r));n.before(o.toString());n=q.find(c(s.r)+" > ul");this._initRows(n);n.append(t);this._moved(r,s)}},_moveBelow:function(){var q=this.element;var p=this.options.state.panels;var r,s,t,n;var o=mvc.htmlBuilder();t=q.find(".dashPanel.selected");if(t.length>0){r=this._getPanelPosition(t);s=f.extend({},r);s.c=0;s.r+=1;p.splice(s.r,0,[]);this._renderRow(o,s.r);n=q.find(c(r.r));n.after(o.toString());n=q.find(c(s.r)+" > ul");this._initRows(n);n.append(t);this._moved(r,s)}},_moved:function(w,u){var v=this.element;var q=this.options;var t=q.state.panels;var x,n,r,s;n=t[w.r][w.c];t[w.r].splice(w.c,1);t[u.r].splice(u.c,0,n);if(t[w.r].length===0){t.splice(w.r,1);f(c(w.r)).remove();this._reindexAll()}else{if(t[u.r].length==1){this._reindexAll()}else{x=[w.r];if(w.r!=u.r){x.push(u.r)}this._reindexRows(x)}}this.resize();this._trigger(d,0)},_renderRow:function(t,n){var w=this.element;var q=w.get(0).id||"";var s=this.options;var x=s.state.panels;var v,u,p;t.markup("<li class='dashRow'><ul>");v=x[n];for(u=0;u<v.length;u++){p=q+"_"+s.nextPanelId;s.panelPosMap[p]={r:n,c:u};s.nextPanelId+=1;t.markup("<li class='dashPanel' id='").attr(p).markup("'></li>")}t.markup("</ul></li>")},_initRows:function(p){var o=this.element;var n=this;p.sortable({connectWith:".dashRow ul",handle:".dashPanelHeader",cursor:"move",placeholder:"dashPlaceholder",forcePlaceholderSize:true,helper:function(s,r){var q=f(r).clone().children(":not(.dashPanelHeader)").remove().end();return q.get(0)},opacity:0.7,tolerance:"pointer",over:function(t,s){var q=f(this);var r;if(this!=s.sender.get(0)){r=n._resizeRow(q,q.children(".dashPanel").length+1);s.helper.width(r);s.placeholder.width(r)}},out:function(t,s){var q=f(this);var r;if(this!=s.sender.get(0)&&s.helper){r=n._resizeRow(q)}},update:function(t,s){var r={r:o.find(".dashRow").index(f(this).parent()),c:f(this).children(".dashPanel").index(s.item)};var q;if(r.c==-1){return}q=n._getPanelPosition(s.item);n._moved(q,r)}})},_updateMenu:function(n){var y=this;var w=this.element;var q=this.options;var v=q.adapter;var p=q.state;var s=p.panels;var x=q.getViews();var B=w.find(".dashPanel.selected");var u,A,t;var r=p.fromTemplate===true;function z(F,G){var D,C;var E=0;function o(){var J=y._getPanelPosition(B);var H=s[J.r][J.c];var I;if(G){H=f.extend(true,{},H)}if(this.value==p.id){I=y._genChartName(v.getName(H.state));v.setName(H.state,I);y.add(H)}else{q.addPanelToView(H,this.value,function(K){if(K){if(!G){y.remove(B)}}})}}F.menu.items=[];for(D=0;D<x.length;D++){C=x[D];if(!G&&C.value==p.id){continue}E+=1;F.menu.items.push({type:"action",label:C.name,value:C.value,action:o})}F.disabled=(E===0)}A=p.panels.length;if(B.length&&A>0){u=this._getPanelPosition(B);t=p.panels[u.r].length;n.menu("find","deleteChart").disabled=r;n.menu("find","newChart").disabled=r;z(n.menu("find","moveTo"),false);z(n.menu("find","copyTo"),true);n.menu("find","up").disabled=(u.r===0);n.menu("find","down").disabled=(u.r===A-1);n.menu("find","left").disabled=(u.c===0);n.menu("find","right").disabled=(u.c===t-1);n.menu("find","above").disabled=(t<=1);n.menu("find","below").disabled=(t<=1)}else{f.each(["deleteChart","moveTo","copyTo","up","down","left","right","above","below"],function(o,C){n.menu("find",C).disabled=true})}},_initMenu:function(){var n=this;var o=this.element;var r=o.get(0).id;r=r?r:"";var q=e(r);var p={menubar:false,items:[{id:"newChart",type:"action",label:mvc.getMessage(l,"view.menu.newChart"),action:function(){n._newPanel("chart");return true}},{id:"deleteChart",type:"action",label:mvc.getMessage(l,"view.menu.deleteChart"),action:function(){n.remove()}},{type:"subMenu",label:mvc.getMessage(l,"view.menu.move"),menu:{items:[{id:"up",type:"action",label:mvc.getMessage(l,"view.menu.moveUp"),action:function(){n._moveUp()}},{id:"down",type:"action",label:mvc.getMessage(l,"view.menu.moveDown"),action:function(){n._moveDown()}},{id:"left",type:"action",label:mvc.getMessage(l,"view.menu.moveLeft"),action:function(){n._moveLeft()}},{id:"right",type:"action",label:mvc.getMessage(l,"view.menu.moveRight"),action:function(){n._moveRight()}},{id:"above",type:"action",label:mvc.getMessage(l,"view.menu.moveAbove"),action:function(){n._moveAbove()}},{id:"below",type:"action",label:mvc.getMessage(l,"view.menu.moveBelow"),action:function(){n._moveBelow()}}]}},{id:"moveTo",type:"subMenu",label:mvc.getMessage(l,"view.menu.moveTo"),menu:{items:[]}},{id:"copyTo",type:"subMenu",label:mvc.getMessage(l,"view.menu.copyTo"),menu:{items:[]}}]};q.menu(p)},_reindexAll:function(){var n=this.element;var p=this.options;n.find("ul:first .dashRow").each(function(o){f(this).find("ul > .dashPanel").each(function(r){var q=p.panelPosMap[this.id];q.r=o;q.c=r})})},_reindexRows:function(s){var n=this.element;var t=this.options;var p,q;function u(r){var o=t.panelPosMap[this.id];o.r=q;o.c=r}for(p=0;p<s.length;p++){q=s[p];f(c(q)).find("ul > .dashPanel").each(u)}},_getPanelPosition:function(p){var n=this.options;return n.panelPosMap[p.get(0).id]},_forEachPanel:function(v){var w=this.element;var q=w.find(".dashPanel");var p=this.options;var y=p.state.panels;var n,t,s,u,x;s=0;for(n=0;n<y.length;n++){u=y[n];for(t=0;t<u.length;t++){x=q.eq(s+t);if(v(u[t],x,n,t)===false){return}}s+=u.length}}});f.extend(f.ui.dashboardView,{version:"1.7",getter:["isActive","getPanels","getPanel","add"],defaults:{state:{},dropAccept:null,getViews:null,addPanelToView:null,adapter:null,minPanelWidth:300,minPanelHeight:200}})})(jQuery);
/*
  UI widget for a filtered list control. 
  Copyright (c) 2009, 2010, Oracle and/or its affiliates. All rights reserved.
*/
(function(f){var b=9,o=32,q=33,v=34,d=35,t=36,e=37,a=38,p=39,l=40;var k=700;var n="mvccore";var m="lastFocused";var g="filter";var c="dragInit";var s="filteredList";var j="change";var u="focused";var r="selected";var i="aria-selected";f.widget("ui.filteredList",{_init:function(){var E=this;var y=this.options;var D=this.element;var x=D.get(0).id;var C=null;var A=mvc.htmlBuilder();var z=x+"_l";var B;function w(){if(C){clearTimeout(C);C=null}E._filter()}if(y.label){y.filterPrompt=y.filterPrompt||mvc.getMessage(n,"filter.prompt");y.clearButtonTitle=y.clearButtonTitle||mvc.getMessage(n,"filter.clear.button");A.markup("<label for='").attr(z).markup("'>").content(y.label).markup(":</label>").markup("<div class='filter'><input id='").attr(z).markup("' type='text' class='prompt'>");mvc.renderButton(A,{id:x+"_c",icon:y.clearButtonIcon,nb:true,tooltip:y.clearButtonTitle});A.markup("</div>")}A.markup("<div role='listbox' aria-multiselectable='false' class='select'>").markup("<ul></ul></div>");D.html(A.toString()).addClass(s);this._setData(g,"");if(y.label){this._promptMode(y.initialFilter==="")}this._populateList();if(y.label&&y.initialFilter){D.find(".filter :text").val(y.initialFilter);this._filter()}this.resize();if(y.label){D.find(".filter button").click(function(G){E._clearFilter();var F=E._getData(m);if(F){mvc.setFocus(F,0)}});D.find(".filter :text").focus(function(F){if(f(this).hasClass("prompt")){E._promptMode(false)}}).blur(function(F){w();if(f(this).val()===""){E._promptMode(true)}}).keydown(function(F){var G;if(F.keyCode==l){w();G=D.find(".select li:visible:first");if(G.length>0){E._selectItem(G)}return false}else{if(F.keyCode==b){w();if(f(this).val()===""){E._promptMode(true)}return}}if(!C){C=setTimeout(function(){E._filter();C=null},k)}})}B=D.find(".select ul").bind("keydown",function(J){var F=null;var I,L;var M,H,N,K;if(J.altKey){return}var G=J.keyCode;if(G==q||G==v){N=f(this).find("li:visible:first").outerHeight();if(!N||N<=0){N=24}K=(f(this).parent().height()/N).toFixed()-1}if(G==o){J.preventDefault();return}else{if(G==a||G==e){F=-1}else{if(G==l||G==p){F=1}else{if(G==q){F=-K}else{if(G==v){F=K}else{if(G==d){L=f(this).find("li:visible:last");E._selectItem(L);return false}else{if(G==t){L=f(this).find("li:visible:first");E._selectItem(L);return false}}}}}}}if(F!==null){I=f(this).find("li:visible");if(I.length<1){return false}M=I.index(I.filter(".selected"));if(M>=0){H=M+F}else{M=I.index(E._getData(m));if(M>=0){H=M;M=null}}if(M==-1){H=0}if(H<0){H=0}else{if(H>=I.length){H=I.length-1}}if(H!=M){L=I.eq(H);E._selectItem(L)}return false}}).mousedown(function(G){if(G.which!=1){return}var F=f(G.target).closest("li");if(F.length<1){return}E._selectItem(F);return false}).mouseup(function(F){if(document.selection){document.selection.empty()}}).get(0);mvc.bindFocus(B,function(I){var F=f(I.target).closest("li");var H=F.get(0);var G=E._getData(m);if(G&&G!==H){G.tabIndex=-1}F.addClass(u);H.tabIndex=0;E._setData(m,H)});mvc.bindBlur(B,function(G){var F=f(G.target);F.removeClass(u)})},update:function(y,w){var x=this.element;var z=this.options;z.list=y;this._populateList();if(z.label){if(w){this._promptMode(true)}else{this._setData(g,"");this._filter()}}},resize:function(){function y(w){return w.innerHeight()-parseInt(w.css("paddingTop"),10)-parseInt(w.css("paddingBottom"),10)}function A(w){return w.innerWidth()-parseInt(w.css("paddingLeft"),10)-parseInt(w.css("paddingRight"),10)}var z=this.element;var D=this.options;var C=y(z);var x,B;if(D.label){B=z.find(".filter :text");x=A(z.find(".filter"));B.width(x-z.find(".filter button").outerWidth()-parseInt(B.css("paddingLeft"),10)-parseInt(B.css("paddingRight"),10));C-=z.find(".filter").outerHeight(true)+z.find("label:first").outerHeight(true)}z.find(".select").height(C)},selection:function(){var x=this.element;var w=x.find(".select li.selected");if(w.length>0){return w.find("input").val()}return null},select:function(y,z){var x=this.element;var w=null;x.find(".select li").each(function(){var A=f(this).find("input:first").val();if(A==y){w=f(this);return false}});if(w){if(w.css("display")=="none"){this._clearFilter()}this._selectItem(w,z);return w}return null},destroy:function(){f(this.element).html("").removeClass(s);f.widget.prototype.destroy.call(this)},_clearFilter:function(){this._promptMode(true);this._filter()},_promptMode:function(w){var x=this.element;var y=this.options;if(w){x.find(":text").addClass("prompt").val(y.filterPrompt);x.find("button").addClass("disabled").get(0).disabled=true}else{x.find(":text").removeClass("prompt").val(this._getData(g));x.find("button").removeClass("disabled").get(0).disabled=false}},_selectItem:function(x,y){var w=this.element.find("ul li.selected");if(w.get(0)!==x.get(0)){w.removeClass(r).attr(i,"false");x.addClass(r).attr(i,"true");this._trigger(j,0)}if(y!==true){mvc.setFocus(x.get(0),0)}},_populateList:function(){var x=this;var z=this.element;var D=this.options;var w=D.itemAdapter;var C=D.list;var y=mvc.htmlBuilder();var A,B;this._setData(c,false);for(A=0;A<C.length;A++){B=C[A];y.markup("<li role='option' tabindex='-1'").optionalAttr("class",D.itemLabel).markup(">");y.markup("<input type='hidden' value='").attr(w.value(B)).markup("'>");w.renderLabel(y,B);y.markup("</li>")}z.find(".select ul").html(y.toString()).find("li:first").each(function(){this.tabIndex=0;x._setData(m,this)});this._enableDrag()},_filter:function(){var E=this;var D=this.element;var y=this.options;var x,C,z;var B=D.find(":text");var w=false;var A=false;if(D.find(".select li:visible").length===0){w=true}C=this._getData(g);if(B.hasClass("prompt")){x=""}else{x=f.trim(B.val())}z=x.toLowerCase();if(C!=x){this._setData(g,x);D.find(".select li").each(function(){var F=f(this).find(".label");var I=F.text().toLowerCase();var H=null;if(y.filterOnTitle){H=F.attr("title").toLowerCase()}var G=I.indexOf(z)>=0||(H!==null&&H.indexOf(z)>=0);f(this).toggle(G);if(!G){if(f(this).hasClass(r)){f(this).removeClass(r);A=true}if(this.tabIndex===0){this.tabIndex=-1;w=true}}});if(w){D.find(".select li:visible:first").each(function(){this.tabIndex=0;E._setData(m,this)})}if(A){this._trigger(j,0)}}},_enableDrag:function(){var w=this.element;var x=this.options;var z;var y=this._getData(c);if(!x.draggable){return}if(x.enableDrag){if(y){z=w.find(".select ul li").draggable("enable")}else{z=w.find(".select ul li").draggable(x.draggable);this._setData(c,true)}z.removeClass("ui-state-disabled")}else{z=w.find(".select ul li").addClass("ui-state-disabled");if(y){z.draggable("disable")}}},_setData:function(w,x){f.widget.prototype._setData.call(this,w,x);if(w=="enableDrag"){this._enableDrag()}}});var h={value:function(w){return w.v},renderLabel:function(w,x){w.markup("<span class='label'").optionalAttr("title",x.h).markup(">").content(x.l).markup("</span>")}};f.extend(f.ui.filteredList,{version:"1.7",getter:"selection",defaults:{label:null,filterPrompt:null,filterOnTitle:true,clearButtonIcon:"clearFilter",clearButtonTitle:null,initialFilter:"",enableDrag:false,draggable:null,list:[],itemLabel:null,itemAdapter:h}})})(jQuery);
/*
  UI widget for menus including menu bars, popup menus and menu items.
  Copyright (c) 2009, 2010, Oracle and/or its affiliates. All rights reserved.
*/
(function(e){var d=37,a=38,o=39,g=40,j=13,k=32,b=9,x=27;var i=null;var f=null;var n=null;var A=false;var r=[];var t=false;var m=0;var l=0;var w=0;var u=0;var C=null;var p=null;var h=null;function B(){var E,F,D;if(n){s(r[0],false,e(n));for(E=1;E<r.length;E++){F=r[E];D=F.parents(".menuItem").eq(0);s(F,true,D)}}else{}}function y(){e(window).bind("blur.menuTracking",function(D){});e("html").bind("mousedown.menuTracking",function(E){var D=e(E.target);if(D.closest(".menu").length===0&&D.get(0)!==n){q.closeAll()}}).bind("mousemove.menuTracking",function(E){var D,F;if(w==E.pageX&&u==E.pageY){return}w=E.pageX;u=E.pageY;D=e(E.target);F=D.parents(".menu").get(0);if(!F&&p!=F){mvc.setFocus(p,0)}p=F});mvc.bindResize(B,100)}function c(){e(window).unbind(".menuTracking");e("html").unbind(".menuTracking");mvc.unbindResize(B)}function v(F){var H=0;var G=0;var D=F.find("ul:first").children("li").children("a, label, span.hSeparator, .label");var E=F.find(".subMenuCol").outerWidth();D.each(function(){var I=e(this).outerWidth();H=(I>H)?I:H});D.each(function(){var I=H-e(this).outerWidth();if(I>0){I+=parseInt(e(this).css("paddingRight"),10);if(this.className=="hSeparator"){I+=E-2}e(this).css("paddingRight",I)}})}function s(D,I,O,M){var L=e(window).width()+e(document).scrollLeft();var G=e(window).height()+e(document).scrollTop();var P,N,R,K,F,Q,H;var E;var J=D.css("display")!="none";if(!J){D.css({display:"block",position:"absolute",top:-99999,left:0})}v(D);if(typeof O=="number"&&typeof M=="number"){R=0;K=0}else{E=O;H=E.offset();O=H.left;M=H.top;R=E.outerWidth();K=E.outerHeight()}F=D.width();Q=D.height();if(I){P=O+R;N=M;if(P+10+F>L){P=O-F}if(N+10+Q>G){P=O+R;N=M+K-Q}if(P+10+F>L){P=O-F;N=M+K-Q}}else{P=O;N=M+K;if(P+10+F>L){P=O+R-F}if(N+10+Q>G){P=O;N=M-Q}if(P+10+F>L){P=O+R-F}}H=D.offsetParent().offset();D.css({display:(J?"block":"none"),top:N-H.top,left:P-H.left});if(!J){D.slideDown(200,function(){mvc.setFocus(D.get(0),0)})}}var q={openMenu:function(F,E,D,G){i=F;f=E;if(typeof D=="object"&&D.get){n=D.get(0)}else{n=null}A=false;t=true;if(r.length===0){y()}this.closeAll();r.push(F);t=false;s(F,false,D,G)},isCurrentMenu:function(D){return i&&i.get(0)===D.get(0)},openSubMenu:function(D,E){this.closeOpenSiblings(D);r.push(E);s(E,true,D);D.addClass("opened")},closeOpenSiblings:function(D){var E=D.parent().find(".opened");while(E.length>0){this.closeLast(false);E=D.parent().find(".opened")}},closeLast:function(D){var F,E;if(r.length>0){F=r.pop();E=F.parents(".menuItem").eq(0);if(E.length>0){E.removeClass("opened");if(D){mvc.setFocus(E.find("a, input").get(0),0)}}F.hide();if(r.length===0){if(n&&!A){mvc.setFocus(n,0)}i=null;if(!t){c()}}}},closeAll:function(){while(r.length>0){this.closeLast(false)}}};function z(D,F){var E=null;e.each(D.items,function(G,H){if(H.id==F){E=H;return false}if(H.type=="subMenu"){E=z(H.menu,F);if(E!==null){return false}}});return E}e.widget("ui.menu",{_init:function(){var E=this;var G=this.options;var F=this.element;function H(K){var I=null;var J=K.search(/_c[0-9]+$/);if(J>=0){I=K.substring(J+2)*1}return I}function D(L,I){var K=L.type;if(L.disabled){return false}try{if(K=="toggle"){L.set(!L.get())}else{if(K=="radioGroup"){L.set(L.choices[I].value)}else{if(K=="action"){A=L.action(G,n)||false}else{if(K=="subMenu"){return false}}}}}catch(J){mvc.logError(J)}return true}F.attr("tabindex",-1).addClass(G.menubar?"menubar":"menu").hide();F.mouseup(function(M){var I=e(M.target).closest(".menuItem, .menuItemSep").eq(0);var L,K,J,N;if(M.which===3){return}if(I.length>0){if(I.hasClass("menuItem")){N=I.get(0).id;L=E._getMenuItemFromId(N);J=H(N);if(D(L,J)){q.closeAll()}}}else{q.closeAll()}return false}).click(function(I){return false}).mousemove(function(L){var I,J,K;if(m==L.pageX&&l==L.pageY){return}m=L.pageX;l=L.pageY;I=e(L.target);J=I.parents(".menuItem").eq(0);if(J.length>0){if(!J.hasClass("disabled")){if(!J.hasClass("focused")&&!J.hasClass("opened")){if(C){clearTimeout(C)}q.closeOpenSiblings(J);mvc.setFocus(J.find("a, input").get(0),0);if(J.find(".menu").length>0&&!J.hasClass("opened")){C=setTimeout(function(){C=null;q.openSubMenu(J,J.find(".menu"))},400)}}return}}else{J=I.parents(".menuItemSep").eq(0)}if(J.length>0&&J.get(0)!=h){if(C){clearTimeout(C)}q.closeOpenSiblings(J)}h=J.get(0);K=I.closest(".menu").eq(0);if(K.length>0&&!K.hasClass("focused")){mvc.setFocus(K.get(0),0)}}).keydown(function(L){var K=L.keyCode;var I,J;if(L.altKey){return}if(F.hasClass("focused")){I=F}else{I=F.find(".focused")}if(K==a){if(I.hasClass("menu")){J=I.find("ul:first").children(".menuItem:not(.disabled):last")}else{J=I.prevAll(".menuItem:not(.disabled)").eq(0)}if(J.length===0){J=I.parent().children(".menuItem:not(.disabled):last")}mvc.setFocus(J.find("a, input").get(0),0);return false}else{if(K==g||K==b){if(I.hasClass("menu")){J=I.find("ul:first").children(".menuItem:not(.disabled):first")}else{J=I.nextAll(".menuItem:not(.disabled)").eq(0)}if(J.length===0){J=I.parent().children(".menuItem:not(.disabled):first")}mvc.setFocus(J.find("a, input").get(0),0);return false}else{if(K==o){J=I.children(".menu");if(J.length>0){q.openSubMenu(I,J);J=J.find("ul:first").children(".menuItem:not(.disabled):first");mvc.setFocus(J.find("a, input").get(0),0)}else{}return false}else{if(K==d){J=I.parents(".menuItem");if(J.length>0){q.closeLast(true)}else{}return false}else{if(K==x){q.closeLast(true);return false}else{if(K==j||K==k){return false}}}}}}}).keyup(function(M){var K=M.keyCode;var I,L,J,N;if(M.altKey){return}if(F.hasClass("focused")){I=F}else{I=F.find(".focused")}if(K==j||K==k){N=I.get(0).id;L=E._getMenuItemFromId(N);J=H(N);if(L&&D(L,J)){q.closeAll()}return false}}).focus(function(I){e(this).addClass("focused")}).blur(function(I){e(this).removeClass("focused")})},toggle:function(D,F){var E=this.element;if(q.isCurrentMenu(E)){q.closeAll()}else{this.open(D,F)}},open:function(D,J){var E=this;var G=this.element;var I=this.options;var H=this.element.get(0).id||"";var F=mvc.htmlBuilder();this._renderMenu(F,H,I);G.html(F.toString());mvc.initIcons(G);G.find("div.menu").focus(function(K){e(this).addClass("focused")}).blur(function(K){e(this).removeClass("focused")});G.find(".menuItem").find("a, input").focus(function(K){e(this).parents(".menuItem").eq(0).addClass("focused")}).blur(function(K){e(this).parents(".menuItem").eq(0).removeClass("focused")});q.openMenu(G,null,D,J)},find:function(E){var D=this.options;return z(D,E)},destroy:function(){var D=this.options;e(this.element).html("").removeClass(D.menubar?"menubar":"menu");e.widget.prototype.destroy.call(this)},_getMenuItemFromId:function(J){var I=this.options;var E=J.split("_");var H=[];var F,D,G=null;F=E.length-1;if(E[F].match(/^c[0-9]+$/)){F--}for(;F>0;F--){if(E[F].match(/^[0-9]+$/)){H.unshift(E[F]*1)}else{break}}D=I.items;for(F=0;F<H.length;F++){G=D[H[F]];if(!G||(F<H.length-1&&!G.menu)){return null}if(G.menu){D=G.menu.items}}return G},_renderMenu:function(E,H,G){var D=this;function F(){E.markup("<li class='menuItemSep'><span class='statusCol'>&nbsp;</span><span class='hSeparator'></span></li>")}E.markup("<div class='dstr'></div><div class='dsbl'><div class='ds'><div class='menuContent'><ul>");e.each(G.items,function(J,L){var K=L.type;var M,I,O;var P=H+"_"+J;var N=H+"I"+J;O=K=="separator"?"menuItemSep":"menuItem";if(L.disabled){O+=" disabled"}if(K=="radioGroup"){if(J>0&&G.items[J-1].type!="separator"){F()}M=L.get();e.each(L.choices,function(R,Q){var S=P+"_c"+R;var U=N+"_c"+R;var T=M==Q.value;E.markup("<li id='").attr(S).markup("' class='menuItem'>");E.markup("<span class='statusCol'>");mvc.renderIcon(E,T?"menuBullet":"");E.markup("<input type='radio' name='").attr(P).markup("C' id='").attr(U).markup("'").optionalBoolAttr("disabled",Q.disabled).optionalBoolAttr("checked",T).markup(">");E.markup("&nbsp;</span>");if(Q.disabled){E.markup("<span class='label'>").content(Q.label).markup("</span>")}else{E.markup("<label for='").attr(U).markup("'>").content(Q.label).markup("</label>")}E.markup("<span class='subMenuCol'>&nbsp;</span>");E.markup("</li>")});if(J<G.items.length-1&&G.items[J+1].type!="separator"){F()}}else{if(K=="separator"){F()}else{E.markup("<li id='").attr(P).markup("' class='").attr(O).markup("'>");if(K=="action"){E.markup("<span class='statusCol'>");if(L.icon){mvc.renderIcon(E,L.icon)}E.markup("&nbsp;</span>");if(L.disabled){E.markup("<span class='label'>").content(L.label).markup("</span>")}else{E.markup("<a href=''>").content(L.label).markup("</a>")}E.markup("<span class='subMenuCol'>&nbsp;</span>")}else{if(K=="toggle"){M=L.get();E.markup("<span class='statusCol'>");if(L.label){mvc.renderIcon(E,M?"menuChecked":"")}E.markup("<input type='checkbox' id='").attr(N).markup("'").optionalBoolAttr("disabled",L.disabled).optionalBoolAttr("checked",M).markup(">");E.markup("&nbsp;</span>");I=L.label;if(!I){I=M?L.onLabel:L.offLabel}if(L.disabled){E.markup("<span class='label'>").content(I).markup("</span>")}else{E.markup("<label for='").attr(N).markup("'>").content(I).markup("</label>")}E.markup("<span class='subMenuCol'>&nbsp;</span>")}else{if(K=="subMenu"){E.markup("<span class='statusCol'>");if(L.icon){mvc.renderIcon(E,L.icon)}E.markup("&nbsp;</span>");if(L.disabled){E.markup("<span class='label'>").content(L.label).markup("</span>")}else{E.markup("<a href=''>").content(L.label).markup("</a>")}E.markup("<span class='subMenuCol'>");mvc.renderIcon(E,"subMenu");E.markup("&nbsp;</span><div class='menu'>");D._renderMenu(E,P,L.menu);E.markup("</div>")}}}E.markup("</li>")}}});E.markup("</ul></div></div></div>")}});e.extend(e.ui.menu,{version:"1.7",getter:"find",defaults:{menubar:true,items:[]}})})(jQuery);
/*
  UI widget for dashboard chart
  Copyright (c) 2009, 2010, Oracle and/or its affiliates. All rights reserved.
*/
(function(P){var an=13,b=27,z=37,T=38,ag=39,E=40,k=107,w=187,l=109,n=189,r=48,S=46,ai=113;var Y=24*60*60;var x=60*60;var A="#888888";var y="dashboard";var a=60;var K=100;var ah=300;var m="plot";var D="overviewPlot";var d="gauge";var Q="timeAxis";var af="curPoint";var u="showCurPoint";var t="editMode";var L="linearHGauge";var ab="linearVGauge";var W="radialGauge";var G="barChart";var h="linePlot";var ak="scatterPlot";var ad="statechange";var I="chart";var R="selected";var e="h3, button, .chartMain, .chartOverview, .legendLabel";var aj=5*60;var g=20;var N="S";var al=[{color:"#FFCC33",shape:"circle",fill:true},{color:"#33CCFF",shape:"diamond",fill:true},{color:"#CC3333",shape:"triangleUp",fill:true},{color:"#669966",shape:"triangleDown",fill:true},{color:"#666699",shape:"square",fill:true},{color:"#009900",shape:"bar",fill:true},{color:"#990000",shape:"halfCircleLeft",fill:true},{color:"#000099",shape:"halfCircleRight",fill:true},{color:"#999900",shape:"circle",fill:false},{color:"#009999",shape:"diamond",fill:false},{color:"#990099",shape:"triangleUp",fill:false},{color:"#FF0099",shape:"triangleDown",fill:false},{color:"#00FF99",shape:"square",fill:false},{color:"#9900FF",shape:"bar",fill:false},{color:"#0099FF",shape:"halfCircleLeft",fill:false},{color:"#99FF00",shape:"halfCircleRight",fill:false}];function o(aq,at,ap){var ar;function ao(av,ax){var aw,au;for(aw=0;aw<at.length;aw++){au=at[aw];if(au!==aq&&av==au.markerShape&&ax===au.markerFill){return true}}return false}if(!aq.color||!aq.markerShape||(aq.markerShape&&ao(aq.markerShape,aq.markerFill))){if(at.length>=al.length){ar=ap+Math.floor(at.length/al.length);ar=ar%al.length}else{while(ao(al[ap].shape,al[ap].fill)){ap+=1;if(ap>=al.length){ap=0}}ar=ap}aq.color=al[ar].color;aq.markerShape=al[ap].shape;aq.markerFill=al[ap].fill}ap+=1;if(ap>=al.length){ap=0}return ap}var ae=[{id:"chartTitle",prop:"name",constraints:["required"]},{prop:"type",constraints:[{fn:"required"},{fn:"member",args:[["linearHGauge","linearVGauge","radialGauge","barChart","linePlot","scatterPlot"]]}]},{id:"chartUnits",prop:"units"},{id:"chartColor",prop:"color",constraints:["required","color"]},{id:"chartBackgroundColor",prop:"background",constraints:["required","color"]},{id:"chartHighlightColor",prop:"highlight",constraints:["required","color"]},{id:"chartAutoRange",prop:"autoRange",type:"boolean"},{id:"chartRangeMax",prop:"rangeMax",type:"number",constraints:["required","number"]},{id:"chartRangeMin",prop:"rangeMin",type:"number",constraints:["required","number"]},{id:"chartThresholdMax",prop:"thresholdMax",type:"number",constraints:["number"]},{id:"chartThresholdMin",prop:"thresholdMin",type:"number",constraints:["number"]},{name:"chartRangeType",prop:"timeRange",constraints:[{fn:"member",args:[["current","custom"]]}]},{id:"chartTimeRangeStart",prop:"timeStart",type:"date",formatter:{fn:"datetime",args:[]},constraints:["required",{fn:"datetime",args:[]}]},{id:"chartTimeRangeDuration",prop:"timeDuration",formatter:{fn:"deltatime",args:["m"]},constraints:["required","deltatime"]}];var C=[{prop:"markerShape",constraints:[{fn:"member",args:[["circle","diamond","triangleUp","triangleDown","square","bar","halfCircleLeft","halfCircleRight"]]}]},{prop:"markerFill",type:"boolean",constraints:[{fn:function(ao){ao=ao.toString();if(ao=="true"||ao=="false"){return null}return"Must be a boolean value"}}]},{prop:"color",constraints:["color"]}];function f(ao){return ao==L||ao==ab||ao==W}function Z(ao){return mvc.formatDate(ao,{fullYear:true})}function U(ao){return mvc.formatTime(ao,{})}function p(ao){return mvc.formatDateTime(ao,{fullYear:true})}function s(ao){var ap=new Date(ao);return mvc.formatTime(ap,{excludeAmPm:true})}function c(ao){var ap=new Date(ao);return mvc.formatDate(ap,{fullYear:true})+"<br>"+mvc.formatTime(ap,{excludeAmPm:true})}function j(ao){ao=""+ao;return ao.length==1?"0"+ao:ao}function M(aq){var ar=Math.floor(aq/Y);aq-=ar*Y;var ao=Math.floor(aq/x);aq-=ao*x;var ap=Math.floor(aq/60);aq-=ap*60;aq=Math.floor(aq);return ar+" "+j(ao)+":"+j(ap)+":"+j(aq)}function v(ao){return mvc.formatNumber(ao)}var V=false;var am=false;function O(aq,ar){var ap=new Date(aq.series.data[aq.dataIndex][0]);var ao=mvc.formatNoteContent(y,[{label:"chart.note.name",value:aq.series.label},{label:"chart.note.date",value:Z(ap)},{label:"chart.note.time",value:U(ap)},{label:"chart.note.value",value:v(aq.datapoint[1])}]);mvc.showNote(ao,ar,aq.pageX,aq.pageY)}function ac(av,ar,aq){var au,aw,ay,ap,ao,at,ax;au=av.getData();ay=au[ar.series];ap=ar.point;ao=ay.datapoints.pointsize;ax=ay.datapoints.points.slice(ap*ao,(ap+1)*ao);at=av.offset();aw={datapoint:ax,dataIndex:ap,series:ay,seriesIndex:ar.series,pageX:parseInt(ay.xaxis.p2c(ax[0]),10)+at.left,pageY:parseInt(ay.yaxis.p2c(ax[1]),10)+at.top};av.unhighlight();av.highlight(ay,ax);O(aw,aq)}function aa(ap,aq){var ao=mvc.formatNoteContent(y,[{label:"chart.note.name",value:ap.data.label},{label:"chart.note.from",value:p(new Date(ap.data.since))},{label:"chart.note.to",value:p(new Date(ap.data.time))},{label:"chart.note.value",value:v(ap.data.value)},{label:"chart.note.min",value:v(ap.data.min)},{label:"chart.note.max",value:v(ap.data.max)},{label:"chart.note.avg",value:v(ap.data.avg)},{label:"chart.note.stdev",value:v(ap.data.stdev)}]);mvc.showNote(ao,aq,ap.pageX,ap.pageY)}function q(at,ao,av){var ar,aq,ap,au,aw;ar=at.data;ap=ao.series;aq=ar[ap];au=at.offset();aw=at.getValuePos(ap,aq.value);aq={data:aq,index:ap,pageX:aw.x+au.left,pageY:aw.y+au.top};at.unhighlight();at.highlight(ap);aa(aq,av)}function B(ay,aw,ap){var av,au,ax,aq=0,aB,az;var at=ay.getData();var aA=0;var ar=Number.MAX_VALUE;var ao=0;for(av=0;av<at.length;av++){au=at[0].datapoints;ax=au.points.length/au.pointsize;if(ax>aq){aq=ax}if(au.points[0]<ar){ar=au.points[0]}aB=au.points.length-au.pointsize;if(au.points[aB]>ao){ao=au.points[aB]}}if(aq>0){aA=M((ao-ar)/1000);az=mvc.formatNoteContent(y,[{label:"chart.note.samples",value:aq},{label:"chart.note.range",value:M(aw.range)},{label:"chart.note.totalRange",value:aA},{label:"chart.note.from",value:p(new Date(ar))},{label:"chart.note.to",value:p(new Date(ao))}]);mvc.showNote(az,ap)}else{az=mvc.formatNoteContent(y,[{label:"chart.note.overviewEmpty",value:null},{label:"chart.note.range",value:M(aw.range)}]);mvc.showNote(az,ap)}}function X(ap,av,ar){var ao,au,aq;var at=true;ao=ar[ap.point][0];au=ar[ap.point][1];if(au===null){if(ap.point<ar.length-1){ap.point+=1}else{ap.point-=1}}if(ao<av.min){at=false;for(aq=ap.point;aq<ar.length;aq++){ao=ar[aq][0];au=ar[aq][1];if(ao>=av.min&&au!==null){at=true;ap.point=aq;break}}}else{if(ao>av.max){at=false;for(aq=ap.point;aq>=0;aq--){ao=ar[aq][0];au=ar[aq][1];if(ao<=av.max&&au!==null){at=true;ap.point=aq;break}}}}return at}function F(ao){return P("#"+ao+"ChartMenu")}function J(ao){return P("#"+ao+"MetricMenu")}function H(ao){ao.find("canvas").each(function(){P.event.remove(this);P.removeData(this)});ao.each(function(){this.innerHTML=""})}function i(at,au,aq,ap,av){var ar,ao;if(window.G_vmlCanvasManager){window.G_vmlCanvasManager.init_(document)}ar=document.createElement("canvas");ar.width=12;ar.height=12;if(window.G_vmlCanvasManager){ar=window.G_vmlCanvasManager.initElement(ar)}at.css({position:"relative"});at.html("").append(ar);ao=ar.getContext("2d");if(au){ao.fillStyle=au;ao.fillRect(0,0,12,12)}P.plot.markers.draw(ao,aq,6,6,4,2,0,ap,av)}P.widget("ui.chart",{_init:function(){var aC=this;var ar=this.options;var ao;var aB=this.element;var aq=aB.get(0).id;var at=null;var ax=null;var au=mvc.htmlBuilder();var ap,aw,av,az;function aA(aG,aE){var aF;if(!V){return}V=false;var aD=aE.xaxis;if(aD){aC.setRange(aD.from,Math.round((aD.to-aD.from)/1000));am=false}else{aF=aC._getData(D);aF.clearSelection(true);aF=aC._getData(m);aF.clearSelection(true)}}function ay(aE,aD){if(aD){V=true}}aq=aq?aq:"";P.each(P.ui.chart.defaults.state,function(aE,aD){if(ar.state[aE]===undefined){ar.state[aE]=aD}});ao=ar.state;az=ao.metrics;for(av=0;av<az.length;av++){ao.markerIndex=o(az[av],az,ao.markerIndex)}ar.isCustomRange=false;ar.viewportRange=aj;ap=new Date();ap=ap.getTime()-ap.getTimezoneOffset()*60*1000;this._setData(Q,{offset:0,range:ar.viewportRange,maxRange:ar.viewportRange,max:ap,min:ap-(ar.viewportRange*1000)});aw=aC._getRange();if(aw){aC._registerRange(aw)}au.markup("<div class='dashPanelHeader'><h3 tabindex='-1'>").content(ao.name).markup("</h3><div class='headerBtns'>");mvc.renderButton(au,{id:aq+"Edit",icon:"edit",nb:true,tooltip:mvc.getMessage(y,"chart.edit")});mvc.renderButton(au,{id:aq+"Menu",icon:"menu",nb:true,tooltip:mvc.getMessage(y,"chart.menu")});au.markup("</div></div><div class='chartArea'><p class='chartYaxis'><span class='yAxisUnits'>").content(ao.units).markup("</span>&nbsp;<span class='yAxisMsg'></span></p>");au.markup("<div class='chartMain' tabindex='-1'></div></div>");au.markup("<div class='chartCtrls' style='overflow:hidden;width:100%;'><div class='chartLegend' style='float:left;'></div>");au.markup("<div class='overview' style='float:right;'><div class='chartOverview' tabindex='-1'></div>");au.markup("<div class='chartActions ui-toolbar'>");mvc.renderButton(au,{id:aq+"PanLeft",icon:"panLeft",tooltip:mvc.getMessage(y,"chart.panLeft")});mvc.renderButton(au,{id:aq+"ZoomIn",icon:"zoomIn",tooltip:mvc.getMessage(y,"chart.zoomIn")});mvc.renderButton(au,{id:aq+"ZoomOut",icon:"zoomOut",tooltip:mvc.getMessage(y,"chart.zoomOut")});mvc.renderButton(au,{id:aq+"PanRight",icon:"panRight",tooltip:mvc.getMessage(y,"chart.panRight")});au.markup("</div></div></div>");aB.html(au.toString()).addClass(I).find(".chartArea").css({backgroundColor:ao.background,color:ao.color});mvc.initIcons(aB);ar.selectedMetricIndex=-1;au.clear();au.markup("<div id='").attr(aq+"ChartMenu").markup("'></div>");P(au.toString()).appendTo("body").hide();au.clear();au.markup("<div id='").attr(aq+"MetricMenu").markup("'></div>");P(au.toString()).appendTo("body").hide();this._initMenus();P("#"+aq+"ZoomIn").click(function(){aC.zoomIn()});P("#"+aq+"ZoomOut").click(function(){aC.zoomOut()});P("#"+aq+"PanLeft").click(function(){aC.panLeft()});P("#"+aq+"PanRight").click(function(){aC.panRight()});P("#"+aq+"Edit").click(function(){aC._editMode(P(this))});P("#"+aq+"Menu").click(function(){var aD=F(aq);aD.menu("find","addMetric").disabled=ar.restrictChanges?ar.restrictChanges:!ar.hasNewMetric();aD.menu("toggle",P(this))});aB.find(".chartMain").bind("plothover",function(aE,aG,aD){var aF=aC._getData(m);if(aD){if(at!==aD.dataIndex||ax!==aD.seriesIndex){at=aD.dataIndex;ax=aD.seriesIndex;aF.unhighlight();aF.highlight(aD.series,aD.datapoint);O(aD,P(this))}}else{aF.unhighlight();mvc.hideNote();at=null;ax=null}}).bind("plotclick",function(aF,aG,aE){var aD;if(aE){aD={series:aE.seriesIndex,point:aE.dataIndex};aC._setData(af,aD)}}).bind("gaugehover",function(aE,aG,aD){var aF=aC._getData(d);if(aD){if(at!==aD.index){at=aD.index;aF.unhighlight();aF.highlight(aD.index);aa(aD,P(this))}}else{aF.unhighlight();mvc.hideNote();at=null}}).bind("gaugeclick",function(aE,aF,aD){}).mouseleave(function(){mvc.hideNote();at=null;ax=null}).bind("focus",function(aJ){var aE,aI,aH,aD,aG;var aF;aE=aC._getData(af);if(!aE){aF=aC._getRange();for(aH=0;aH<ao.metrics.length;aH++){aD=ao.metrics[aH];aG=wldfDM.getMetricSeries(aD.metric);if(aG){if(aF){aI=aG.harvested[aF].data}else{aI=aG.data}if(aI.length>0){aE={series:aH,point:aI.length-1};break}}}if(aE){aC._setData(af,aE)}}if(aE){aC._setData(u,true);aC._showCurrentMetricPoint()}}).bind("blur",function(aE){var aD=aC._getData(m);if(aD){aD.unhighlight();mvc.hideNote()}aC._setData(u,false)}).bind("plotselecting",ay).bind("plotselected",aA);aB.find(".chartOverview").hover(function(aD){var aF=aC._getData(m);var aE=aC._getData(Q);B(aF,aE,P(this))},function(){mvc.hideNote()}).bind("focus",function(aF){var aE=aC._getData(m);var aD=aC._getData(Q);B(aE,aD,P(this))}).bind("blur",function(aD){mvc.hideNote()}).bind("plotunselected",function(aF){var aG=aC._getData(m);var aH=aG.getAxes().xaxis;var aD=aC._getData(D);var aE={xaxis:{from:aH.min,to:aH.max}};aD.setSelection(aE)}).bind("plotselecting",ay).bind("plotselected",aA);this._internalUpdateOverviewState(false);this._renderLegend();this.resize();this.unSelect();aB.bind("keydown.chart",function(aH){var aG,aF,aK;var aE=false;var aJ=false;var aD=P(aH.target);var aI;if(aH.altKey||aD.is("input, select, textarea")){return}aG=aH.keyCode;aJ=f(ao.type);if(aH.ctrlKey){aE=P(aH.target).hasClass("chartMain");if(aG==z){if(!aJ){if(aE){aC._moveCurrentPoint(aH.shiftKey?-10:-1)}else{aC.panLeft(aH.shiftKey)}}return false}else{if(aG==ag){if(!aJ){if(aE){aC._moveCurrentPoint(aH.shiftKey?10:1)}else{aC.panRight(aH.shiftKey)}}return false}else{if(aG==T){if(aE){aC._moveCurrentSeries(-1)}return false}else{if(aG==E){if(aE){aC._moveCurrentSeries(1)}return false}}}}}else{if(!aJ){if(aG==w||aG==k){aC.zoomIn();return false}else{if(aG==n||aG==l){aC.zoomOut();return false}else{if(aG==r){aC.viewportRestore();return false}}}}}if(aG==ai){aI=aH.target.tabIndex===0?aD:null;if(!aC._getData(t)){aC._editMode(P("#"+aq+"Edit"),aI)}}if(!ar.restrictChanges){if(aD.closest(".legendLabel").length>0){if(aG==S){aK=aD.closest("li");aF=aK.parent().children("li").index(aK.get(0));aC._removeMetric(aF)}}}});if(ar.dropAccept&&!ar.restrictChanges){aB.droppable({accept:function(aE){var aD=aE.parents(".chart:first");return aE.is(ar.dropAccept+", .chartMetric")&&(aD.length===0||aD.get(0)!==aB.get(0))},greedy:true,addClasses:false,hoverClass:"dropActive",drop:function(aE,aD){aC.addMetricFromDraggable(aD.draggable)}})}},getMinSize:function(){var ap=this.element;var aq=ap.find(".chartMain");var ar=K;var ao=ah;ao+=parseInt(aq.css("margin-left"),10)+parseInt(aq.css("margin-right"),10);ar+=parseInt(aq.css("margin-top"),10)+parseInt(aq.css("margin-bottom"),10);ar+=ap.find(".dashPanelHeader").outerHeight(true);ar+=ap.find(".chartYaxis").outerHeight(true);ar+=ap.find(".chartCtrls").outerHeight(true);return{h:ar,w:ao}},resize:function(){var ap=this.element;var aq=ap.find(".chartMain");var ar=ap.innerHeight()-parseInt(aq.css("margin-top"),10)-parseInt(aq.css("margin-bottom"),10);var ao=ap.innerWidth()-parseInt(aq.css("margin-left"),10)-parseInt(aq.css("margin-right"),10);ar-=ap.find(".dashPanelHeader").outerHeight()+ap.find(".chartYaxis").outerHeight();ar-=Math.max(a,ap.find(".chartLegend").outerHeight());if(ar<K){ar=K}aq.css({height:ar,width:ao});if(this._overviewShowing()){ap.find(".chartLegend").css({width:ao/2});ap.find(".overview").css({width:ao/2});ap.find(".chartOverview").css({height:30})}else{ap.find(".chartLegend").css({width:ao})}this.update(true)},update:function(ap){if(V){am=true;return}var aq=this.options;var ao=aq.state;if(ap===true||!aq.isCustomRange||!aq.rangeUpdated){if(f(ao.type)){this._updateGauge()}else{this._updateSeries()}this._updateActionStates();if(this._getData(u)){this._showCurrentMetricPoint()}}},getSelectedMetric:function(){var ap=this.options;var ao=ap.state.metrics;if(ap.selectedMetricIndex==-1){return null}return ao[ap.selectedMetricIndex]},addMetricFromDraggable:function(ap){var ao=this.options;if(!ao.restrictChanges){if(ap.hasClass("chartMetric")){this._addMetricFromOtherChart(ap.parents(".chart:first"),true)}else{this._addMetric()}}},addMetric:function(ap){var ao=this.element;var au=ao.find(".chartLegend");var aw=this.options;var at=aw.state;var aq;var ar=at.metrics;function av(ay){var az,ax;for(az=0;az<ar.length;az++){ax=ar[az].metric;if(ax.on==ay.on&&ax.a==ay.a&&ax.type==ay.type&&ax.server==ay.server){return true}}return false}if(av(ap.metric)){setTimeout(function(){var ax=mvc.htmlBuilder();ax.markup("<p>").content(mvc.getMessage(y,"chart.msg.dupMetric")).markup("</p>");mvc.doMessageDialog(mvc.getMessage(y,"chart.msg.dupMetric.title"),ax.toString(),ao.find("h3").get(0))},10);return false}at.markerIndex=o(ap,ar,at.markerIndex);at.metrics.push(ap);aq=aw.getActiveView();if(aq!==null){wldfDM.register(ap.metric,aq)}if(aw.isCustomRange){aw.rangeUpdated=false;wldfDM.registerRange(ap.metric,this._getRange())}this._renderLegend();if(au.height()>a){this.resize()}else{this.update(true)}this._trigger(ad,0);return true},removeMetric:function(aq){var av=this.element.find(".chartLegend");var aw=this.options;var au=aw.state;var ar=aw.getActiveView();var at=au.metrics;var ao=aq.metric;var ap=null;P.each(at,function(ay,ax){var az=ax.metric;if(az.on==ao.on&&az.a==ao.a&&az.type==ao.type&&az.server==ao.server){ap=ay;return false}});if(ap===null){mvc.logError("No metric to remove");return}aq=at[ap];if(ar!==null){wldfDM.unregister(aq.metric,ar)}if(aw.isCustomRange){wldfDM.unregisterRange(aq.metric,this._getRange())}at.splice(ap,1);if(at.length===0){au.markerIndex=0}this._renderLegend();if(av.height()>a){this.resize()}else{this.update(true)}this._trigger(ad,0)},setRange:function(aq,ao){var ap=this._getData(Q);if(ao<1){ao=1}ap.offset=aq;ap.range=ao;this.update(true)},zoomIn:function(){var ao=this._getData(Q);ao.range-=this._getZoomAmount();if(ao.range<1){ao.range=1}if(ao.offset!==0){ao.offset+=this._getZoomAmount()*500}this.update(true)},zoomOut:function(){var aq=this.options;var ap=this._getData(Q);var ao=ap.maxRange/1000;if(ao<aq.viewportRange){ao=aq.viewportRange}ap.range+=this._getZoomAmount();if(ap.range>ao){ap.range=ao}if(ap.offset!==0){ap.offset-=this._getZoomAmount()*500}this.update(true)},viewportRestore:function(){var ap=this.options;var ao=this._getData(Q);ao.range=ap.viewportRange;ao.offset=0;this.update(true)},panLeft:function(aq){var ao=aq?500:250;var ar=this._getData(Q);var ap=ar.min;if(ar.offset===0){ar.offset=ar.max-(ar.range*1000)}ar.offset-=ar.range*ao;if(ar.offset<ap){ar.offset=ap}this.update(true)},panRight:function(aq){var ap=aq?500:250;var ar=this._getData(Q);var ao=ar.max-(ar.range*1000);if(ar.offset!==0){ar.offset+=ar.range*ap}if(ar.offset>ao){ar.offset=ao}this.update(true)},select:function(ap){var ao=this.element;ao.addClass(R);this._setTabIndex(e,0);if(this._getData(t)){ap=false;this._setTabIndex("h3, .legendLabel",-1)}if(ap){mvc.setFocus(ao.find("h3").get(0))}this.updateOverviewState()},unSelect:function(){var ao=this.element;var ap=ao.get(0).id;ao.removeClass(R);if(this._getData(t)){this._editMode(P("#"+ap+"Edit"))}this._setTabIndex(e,-1);this.updateOverviewState()},updateOverviewState:function(){return this._internalUpdateOverviewState(true)},destroy:function(){var ao=this.element;var ap=ao.get(0).id;ap=ap?ap:"";ao.unbind(".chart");ao.droppable("destroy");P(this.element).html("").removeClass(I);F(ap).remove();J(ap).remove();P.widget.prototype.destroy.call(this)},_updateGauge:function(){var aC=this.element;var ar=this.options;var ao=ar.state;var av,az,at,ap,au,ax,ay,aB;var aq=[];var aw=null;if(ar.isCustomRange){aw=this._getRange();ar.rangeUpdated=true}for(av=0;av<ao.metrics.length;av++){at=ao.metrics[av];ap=wldfDM.getMetricSeries(at.metric);if(ap){if(aw){aB=ap.harvested[aw];au=aB.data;ax=aB.stats;if(aB.checkForHarvested){ar.rangeUpdated=false}}else{au=ap.data;ax=ap.stats}}else{au=[];ax=null}if(au&&au.length>0){ay=au[au.length-1];az={label:at.name,time:ay[0],color:at.color,shape:at.markerShape,fill:at.markerFill,value:ay[1],since:ax.since,avg:ax.avg,stdev:ax.stdev,min:ax.min,max:ax.max}}else{az={value:null}}aq[av]=az}var aA={type:null,min:ao.autoRange?null:ao.rangeMin,max:ao.autoRange?null:ao.rangeMax,thresholdMin:ao.thresholdMin,thresholdMax:ao.thresholdMax,tickFormatter:v,color:ao.color,fillColor:ao.background,highlightColor:ao.highlight,clickable:true,hoverable:true};if(ao.type==L){aA.type="linearHorizontal"}else{if(ao.type==ab){aA.type="linearVertical"}else{if(ao.type==W){aA.type="radial"}}}var aD=P.gauge(aC.find(".chartMain"),aq,aA);this._setData(d,aD)},_updateSeries:function(){var az=this;var aB=this.options;var ar=aB.state;var aA=this.element;var ap=this._getData(Q);var aK=this._getData(af);var ao=[];var aJ,aH,aD,ax,aC,aP,au,aO,ay,aM,aN;var aG=Number.MAX_VALUE;var aL=0;var aI=0;var aw=null;if(aB.isCustomRange){aw=this._getRange();aB.rangeUpdated=true}for(aJ=0;aJ<ar.metrics.length;aJ++){aD=ar.metrics[aJ];aC=wldfDM.getMetricSeries(aD.metric);if(aC){if(aw){aO=aC.harvested[aw];aP=aO.data;if(aO.checkForHarvested){aB.rangeUpdated=false}}else{if(aK&&aJ==aK.series){if(aC.lastShift){aK.point-=aC.lastShift;if(aK.point<0){aK.point=0}}}aP=aC.data}}else{aP=[]}if(aP.length>0){if(aP.length>aI){aI=aP.length}if(aP[0][0]<aG){aG=aP[0][0]}if(aP[aP.length-1][0]>aL){aL=aP[aP.length-1][0]}}ax={label:aD.name,data:aP,markers:{shape:aD.markerShape,fill:aD.markerFill},color:aD.color};if(ar.type==G){ax.order=aJ}ao[aJ]=ax}if(aI===0){aL=new Date();aL=aL.getTime()-aL.getTimezoneOffset()*60*1000;aG=aL-(ap.range*1000)}var aq,at;if(ap.offset===0){aq=aL-(ap.range*1000);at=aL}else{aq=ap.offset;at=ap.offset+(ap.range*1000);if(Math.abs(aL-at)<10000){ap.offset=0}}ay=(new Date(at)).getUTCDate()-(new Date(aq)).getUTCDate();au=false;if(!ar.autoRange||ar.type==G){aN=at-aq;for(aJ=0;aJ<ao.length&&(!au||ar.type==G);aJ++){aP=ao[aJ].data;for(aH=0;aH<aP.length;aH++){aD=aP[aH];if(aD[0]>=aq&&aD[0]<=at){if(aH>1){aM=aD[0]-aP[aH-1][0];if(aM<aN){aN=aM}}if(aD[1]>ar.rangeMax||aD[1]<ar.rangeMin){au=true;if(ar.type!=G){break}}}}}}var aF={legend:{show:false},xaxis:{mode:"time",tickFormatter:ay>0?c:s,min:aq-2000,max:at+2000},yaxis:{tickFormatter:function(aR,aQ){return v(aR)},min:ar.autoRange?null:ar.rangeMin,max:ar.autoRange?null:ar.rangeMax},series:{lines:{show:(ar.type==h)},bars:{show:(ar.type==G),adjustX:true,lineWidth:0,fill:1,barWidth:Math.ceil(aN/(ao.length+1))},markers:{show:(ar.type==h||ar.type==ak),radius:5,fillColor:ar.background},shadowSize:0},selection:{mode:"x",color:A},grid:{clickable:true,hoverable:true,color:ar.color},autoHighlight:false};if(ar.thresholdMax!==null||ar.thresholdMin!==null){aF.grid.markings=[];if(ar.thresholdMax!==null){aF.grid.markings.push({yaxis:{from:ar.thresholdMax,to:Number.MAX_VALUE},color:ar.highlight})}if(ar.thresholdMin!==null){aF.grid.markings.push({yaxis:{from:-Number.MAX_VALUE,to:ar.thresholdMin},color:ar.highlight})}}au=false;if(!ar.autoRange){for(aJ=0;aJ<ao.length&&!au;aJ++){aP=ao[aJ].data;for(aH=0;aH<aP.length;aH++){aD=aP[aH];if(aD[0]>=aq&&aD[0]<=at){if(aD[1]>ar.rangeMax||aD[1]<ar.rangeMin){au=true;break}}}}}aA.find(".yAxisMsg").html(au?mvc.getMessage(y,"chart.msg.outOfRange"):"");var aE=P.plot(aA.find(".chartMain"),ao,aF);this._setData(m,aE);aG=aG<aq?aG:aq;aL=aL>at?aL:at;ap.min=aG;ap.max=aL;ap.maxRange=aL-aG;if(this._overviewShowing()){var av={legend:{show:false},xaxis:{mode:"time",ticks:0,min:aG,max:aL},yaxis:{ticks:0},series:{lines:{show:true},points:{show:false},bars:{show:false},shadowSize:0},selection:{mode:"x",color:A},grid:{clickable:false,hoverable:false,color:ar.color},autoHighlight:false};aE=P.plot(aA.find(".chartOverview"),ao,av);aE.setSelection({xaxis:{from:aq,to:at}},true);this._setData(D,aE)}},_renderLegend:function(){var aB=this;var ar=this.options;var ap=ar.state;var aA=this.element;var av=aA.find(".chartLegend");var aq=aA.get(0).id;var aw=mvc.htmlBuilder();var az=aA.hasClass(R);var ay=ap.metrics;var at,ax,au;aq=aq?aq:"";au+="_m_";function ao(aF,aC){var aE=ay[aF].metric;var aD=ay[aF].name;var aG=mvc.formatNoteContent(y,[{label:"chart.note.name",value:aD},{label:"chart.note.metric",value:aE.a},{label:"chart.note.type",value:aE.type},{label:"chart.note.server",value:aE.server},{label:"chart.note.instance",value:aE.on.replace(/,/g,", ")}]);mvc.showNote(aG,aC)}aw.markup("<ul>");for(ax=0;ax<ay.length;ax++){at=ay[ax];aw.markup("<li class='chartMetric'><span class='legendLabel'><span class='canvasPlaceholder'></span><span class='label'>").content(at.name).markup("</span></span>");mvc.renderButton(aw,{id:au+ax,icon:"menu",nb:true,tooltip:mvc.getMessage(y,"chart.menu")});aw.markup("</li>")}aw.markup("</ul>");H(av.find(".canvasPlaceholder"));av.html(aw.toString()).find("li").each(function(aC){at=ay[aC];i(P(this).find(".canvasPlaceholder"),ap.background,at.markerShape,at.color,at.markerFill?ap.background:at.color);P(this).find(".legendLabel").hover(function(aD){ao(aC,P(this))},function(){mvc.hideNote()}).focus(function(aD){P(this).parent().addClass(R);ar.selectedMetricIndex=aC;ao(aC,P(this))}).blur(function(aD){P(this).parent().removeClass(R);ar.selectedMetricIndex=-1;mvc.hideNote()}).click(function(aD){mvc.setFocus(this,0)}).get(0).tabIndex=az?0:-1;if(!ar.restrictChanges){P(this).draggable({addClasses:false,cursor:"default",opacity:0.8,distance:5,revert:"invalid",scroll:false,appendTo:"#main",containment:"#main",zIndex:950,helper:function(){var aE=ay[aC];var aD=mvc.htmlBuilder();aD.markup("<div class='dragMetric'>").content(aE.name).markup("</div>");return P(aD.toString())},start:function(){ar.selectedMetricIndex=aC;mvc.hideNote()},stop:function(){ar.selectedMetricIndex=-1}})}P(this).find("button").click(function(aH){var aF=J(aq);var aG;var aD=ar.getPanels();function aE(aL,aI,aO){var aJ,aN,aP;var aK=0;function aM(aQ){aB._moveOrCopyMetricTo(aQ.metricIndex,this.value,aI)}aL.menu.items=[];for(aJ=0;aJ<aD.length;aJ++){aN=aD[aJ];if(aO){aP=ar.getPanel(aN.r,aN.c);if(aP.get(0)===aA.get(0)){continue}}aK+=1;aL.menu.items.push({type:"action",label:aN.name,value:aN,action:aM})}aL.disabled=(aK===0)}aF.menu("option","metricIndex",aC);aF.menu("find","moveUp").disabled=(aC===0);aF.menu("find","moveDown").disabled=(aC==ay.length-1);aG=aF.menu("find","moveTo");if(ar.restrictChanges){aG.disabled=true}else{aE(aG,true,true)}aG=aF.menu("find","copyTo");if(ar.restrictChanges){aG.disabled=true}else{aE(aG,false,true)}aF.menu("find","moveUp").disabled=ar.restrictChanges;aF.menu("find","moveDown").disabled=ar.restrictChanges;aF.menu("find","delete").disabled=ar.restrictChanges;aF.menu("toggle",P(this))}).focus(function(aD){P(this).parent().addClass(R)}).blur(function(aD){P(this).parent().removeClass(R)})});mvc.initIcons(av)},_internalUpdateOverviewState:function(aq){var ap=this.element;var ar=this.options.state;var at=this._overviewShowing();var ao;if(!f(ar.type)){ao=true;if(N=="N"||(N=="S"&&!ap.hasClass(R))){ao=false}}else{ao=false}if(ao!=at){ap.find(".overview").css("display",ao?"block":"none");if(aq){this.resize(false);return true}}return false},_overviewShowing:function(){var ao=this.element;return ao.find(".overview").css("display")!="none"},_updateActionStates:function(){var aq=this.options;var ao=aq.state;var ap=this.element.get(0).id;ap=ap?ap:"";var ay=F(ap);var au=this._getData(Q);var ar=true;var at=true;var av=true;var ax=true;var aw=true;if(!f(ao.type)){ar=au.range<=1;at=au.range>=Math.max(au.maxRange/1000,aq.viewportRange);av=au.offset===0?au.range>=au.maxRange/1000:au.offset<=au.min;ax=au.offset===0||au.offset>=au.max-(au.range*1000);aw=au.range===aq.viewportRange&&au.offset===0}P.each([{id:"zoomIn",sel:"#"+ap+"ZoomIn",d:ar},{id:"zoomOut",sel:"#"+ap+"ZoomOut",d:at},{id:"panLeft",sel:"#"+ap+"PanLeft",d:av},{id:"panRight",sel:"#"+ap+"PanRight",d:ax},{id:"restore",d:aw}],function(az,aB){var aA=ay.menu("find",aB.id);if(aA){aA.disabled=aB.d}if(aB.sel){P(aB.sel).toggleClass("disabled",aB.d).each(function(){this.disabled=aB.d})}})},_moveCurrentSeries:function(ar){var ao=this.options.state;var aq,au,av,az,ax,ap,at,aw,ay;aq=this._getData(af);if(f(ao.type)){az=this._getData(d);if(az){au=az.data;aq.series+=ar;if(aq.series<0){aq.series=au.length-1}else{if(aq.series>=au.length){aq.series=0}}q(az,aq,this.element.find(".chartMain"))}}else{av=this._getData(m);if(av){au=av.getData();ax=aq.series;aq.series+=ar;if(aq.series<0){aq.series=au.length-1}else{if(aq.series>=au.length){aq.series=0}}ap=av.getData()[ax].data;at=av.getData()[aq.series].data;if(ap.length===0||at.length===0){aq.point=at.length>0?at.length-1:0}else{if(ap[ap.length-1][0]==at[at.length-1][0]){aw=ap.length-aq.point;aq.point=at.length-aw;if(aq.point<0){aq.point=0}}else{if(aq.point>=at.length){aq.point=at.length-1}}}if(at.length>0){ay=av.getAxes().xaxis;if(X(aq,ay,at)){ac(av,aq,this.element.find(".chartMain"))}}else{mvc.hideNote()}}}},_moveCurrentPoint:function(ap){var ao,aq,ax,au,at,ar,aw;function av(ay){ao.point+=ay;if(ao.point<0){ao.point=0}else{if(ao.point>=aq.data.length){ao.point=aq.data.length-1}}}ar=this._getData(m);if(ar){ao=this._getData(af);aq=ar.getData()[ao.series];if(aq.data.length===0){return}av(ap);ax=aq.data[ao.point];au=ax[0];at=ax[1];if(at===null){av(ap<0?-1:1);ax=aq.data[ao.point];au=ax[0]}aw=ar.getAxes().xaxis;if(au<aw.min){this.panLeft(true);return}else{if(au>aw.max){this.panRight(true);return}}ac(ar,ao,this.element.find(".chartMain"))}},_showCurrentMetricPoint:function(){var at=this.options.state;var ao,ap,av,ar;var au,aq;ao=this._getData(af);if(f(at.type)){aq=this._getData(d);q(aq,ao,this.element.find(".chartMain"))}else{au=this._getData(m);ap=au.getData();ar=ap[ao.series].data;av=au.getAxes().xaxis;if(X(ao,av,ar)){ac(au,ao,this.element.find(".chartMain"))}}},_addMetric:function(){var ap=this.options;if(!ap.getNewMetric){return}var ao=ap.getNewMetric();if(ao){this.addMetric(ao)}else{mvc.logError("No metric to add")}},_addMetricFromOtherChart:function(ap,ao){var ar=this.element;var aq,at;if(ar.get(0)===ap.get(0)){return}aq=ap.chart("getSelectedMetric");if(aq){at=this.addMetric(P.extend(true,{},aq));if(at&&ao){setTimeout(function(){ap.chart("removeMetric",aq)},10)}}},_removeMetric:function(ap){var ao=this.element;var ar=this.options.state;var aq=ar.metrics;mvc.hideNote();this.removeMetric(aq[ap]);if(aq.length>0){if(ap>aq.length-1){ap=aq.length-1}mvc.setFocus(ao.find(".legendLabel:eq("+ap+")").get(0),0)}else{mvc.setFocus(ao.find("h3").get(0),0)}},_moveOrCopyMetricTo:function(at,ao,ap){var aw=this.options;var av=aw.state.metrics;var ar=av[at];var aq=aw.getPanel(ao.r,ao.c);var au=false;au=aq.chart("addMetric",P.extend(true,{},ar));if(au&&ap){this.removeMetric(ar)}},_metricUp:function(ar){var ao=this;var aq=this.element;var au=this.options.state;var at=au.metrics;var ap,av;if(ar>=1&&ar<at.length){ap=at[ar];at.splice(ar,1);ar-=1;at.splice(ar,0,ap);this._renderLegend();mvc.setFocus(aq.find(".chartLegend li:eq("+ar+") button").get(0),0)}},_metricDown:function(ar){var ao=this;var aq=this.element;var au=this.options.state;var at=au.metrics;var ap,av;if(ar>=0&&ar<at.length-1){ap=at[ar];at.splice(ar,1);ar+=1;at.splice(ar,0,ap);this._renderLegend();mvc.setFocus(aq.find(".chartLegend li:eq("+ar+") button").get(0),0)}},_doMetricPropertiesDialog:function(at,av){var ap=this;var ar=this.element;var aq=this.options.state.metrics[at];var au=P("#chartMetricDialog");var ao=mvc.formHelper([{id:"metricName",prop:"name",constraints:["required"]}],{formContext:au,layout:function(aw){aw.find(".filteredList").filteredList("resize")}});P("#metricMarkers").filteredList("select",aq.markerShape+","+aq.markerFill);P("#metricColors").filteredList("select",aq.color);mvc.doModalDialog(au,{title:mvc.getMessage(y,"chart.metric.properties.title"),formHelper:ao,formData:aq,ok:function(){var aw=P("#metricMarkers").filteredList("selection").split(",");aq.markerShape=aw[0];aq.markerFill=(aw[1]=="true");aq.color=P("#metricColors").filteredList("selection");ap._trigger(ad,0);setTimeout(function(){ap._renderLegend();ap.update(true);mvc.setFocus(ar.find(".chartLegend li:eq("+at+") button").get(0),0)},10)},focusElemAfter:av});H(P("#metricMarkers").find(".canvasPlaceholder"));P("#metricMarkers").find(".canvasPlaceholder").each(function(ax){var aw=al[ax];i(P(this),null,aw.shape,"#000000",aw.fill?"#ffffff":"#000000")})},_getZoomAmount:function(){return g*this.options.viewportRange/100},_getRange:function(){var aq=this.options.state;var at,ap,ao;var ar=0;if(aq.timeRange=="custom"){at=new Date(aq.timeStart);ap=aq.timeDuration.split(" ");if(ap.length==2){ar=ap[0]*24*60;ap=ap[1]}else{ap=ap[0]}ap=ap.split(":");ar+=(ap[0]*60)+(ap[1]*1);ao=j(at.getUTCMonth()+1)+"/"+j(at.getUTCDate())+"/"+at.getUTCFullYear()+" "+j(at.getUTCHours())+":"+j(at.getUTCMinutes())+";"+ar;return ao}return null},_registerRange:function(ap){var av=this.options;var au=av.state;var aq,ao;var ar=au.metrics;var at=this._getData(Q);av.isCustomRange=true;av.rangeUpdated=false;av.viewportRange=ap.split(";")[1]*30;at.offset=0;at.range=av.viewportRange;at.maxRange=av.viewportRange;for(aq=0;aq<ar.length;aq++){ao=ar[aq];wldfDM.registerRange(ao.metric,ap)}},_unregisterRange:function(ap){var av=this.options;var au=av.state;var aq,ao;var ar=au.metrics;var at=this._getData(Q);av.isCustomRange=false;av.viewportRange=aj;at.offset=0;at.range=av.viewportRange;at.maxRange=av.viewportRange;for(aq=0;aq<ar.length;aq++){ao=ar[aq];wldfDM.unregisterRange(ao.metric,ap)}},_doPropertiesDialog:function(at){var ax=this;var aw=this.element;var ap=aw.get(0).id;var ao=this.options.state;var ar=P("#chartDialog");var av=this._getRange();if(ao.timeStart!==null){ao.timeStart=new Date(Date.parse(ao.timeStart));if(isNaN(ao.timeStart)){ao.timeStart=null}}var ay=mvc.formHelper(ae,{formContext:ar,globalConstraints:function(aA){var aC=aA.find("autoRange").value;var aB,az;if(!aC){aB=aA.find("rangeMin").value*1;az=aA.find("rangeMax").value*1;if(aB>=az){return mvc.getMessage(y,"chart.props.validation.range")}}aB=aA.find("thresholdMin").value;az=aA.find("thresholdMax").value;if(aB!==""&&az!==""){aB=aB*1;az=az*1;if(aB>=az){return mvc.getMessage(y,"chart.props.validation.threshold")}}return null}});if(P("#chartTimeRangeStartFormat").text()===""){P("#chartTimeRangeStartFormat").text(mvc.getDateTimeDisplayFormat())}function aq(az){P("#chartRangeMax, #chartRangeMin").each(function(){this.disabled=az;P(this).toggleClass("disabled",az)})}P("#chartAutoRange").click(function(az){aq(this.checked)});aq(ao.autoRange);function au(az){P("#chartTimeRangeStart, #chartTimeRangeDuration").each(function(){this.disabled=az;P(this).toggleClass("disabled",az)})}P("input:radio[name=chartRangeType]").click(function(az){au(P(this).filter(":checked").val()!="custom")});au(ao.timeRange!="custom");mvc.doModalDialog(ar,{title:mvc.getMessage(y,"chart.properties.title"),formHelper:ay,formData:ao,ok:function(){var aA=mvc.htmlBuilder();var az=ax._getRange();if(az!=av){if(av!==null){ax._unregisterRange(av)}if(az!==null){ax._registerRange(az)}}if(ao.timeStart!==null){ao.timeStart=ao.timeStart.toUTCString()}aw.find(".chartArea").css({backgroundColor:ao.background,color:ao.color});ax._renderLegend();if(!ax.updateOverviewState()){ax.update(true)}aA.clear();aw.find("h3").html(aA.content(ao.name).toString());aA.clear();aw.find(".yAxisUnits").html(aA.content(ao.units).toString());ax._trigger(ad,0)},focusElemAfter:at})},_initMenus:function(){this._initChartMenus();this._initMetricMenus()},_initChartMenus:function(){var ao=this;var ap=this.element;var ar=this.options.state;var au=ap.get(0).id;au=au?au:"";var aq=F(au);var at={menubar:false,items:[{id:"addMetric",type:"action",label:mvc.getMessage(y,"chart.menu.addMetric"),action:function(){ao._addMetric()}},{type:"subMenu",label:mvc.getMessage(y,"chart.menu.type"),menu:{items:[{type:"radioGroup",get:function(){return ar.type},set:function(av){if(av!=ar.type){ar.type=av;if(!ao.updateOverviewState()){ao.update(true)}ao._trigger(ad,0)}},choices:[{label:mvc.getMessage(y,"chart.menu.type.bar"),value:G},{label:mvc.getMessage(y,"chart.menu.type.line"),value:h},{label:mvc.getMessage(y,"chart.menu.type.scatter"),value:ak},{label:mvc.getMessage(y,"chart.menu.type.linearV"),value:ab},{label:mvc.getMessage(y,"chart.menu.type.linearH"),value:L},{label:mvc.getMessage(y,"chart.menu.type.radial"),value:W}]}]}},{type:"separator"},{id:"zoomIn",type:"action",label:mvc.getMessage(y,"chart.menu.zoomIn"),icon:"zoomIn",action:function(){ao.zoomIn()}},{id:"zoomOut",type:"action",label:mvc.getMessage(y,"chart.menu.zoomOut"),icon:"zoomOut",action:function(){ao.zoomOut()}},{id:"panLeft",type:"action",label:mvc.getMessage(y,"chart.menu.panLeft"),icon:"panLeft",action:function(){ao.panLeft()}},{id:"panRight",type:"action",label:mvc.getMessage(y,"chart.menu.panRight"),icon:"panRight",action:function(){ao.panRight()}},{id:"restore",type:"action",label:mvc.getMessage(y,"chart.menu.restore"),action:function(){ao.viewportRestore()}},{type:"separator"},{type:"action",label:mvc.getMessage(y,"chart.menu.properties"),action:function(aw,av){ao._doPropertiesDialog(av);return true}}]};aq.menu(at)},_initMetricMenus:function(){var ao=this;var aq=this.element;var at=this.options.state;var au=aq.get(0).id;au=au?au:"";var ar=J(au);var ap={menubar:false,metricIndex:null,items:[{id:"delete",type:"action",label:mvc.getMessage(y,"chart.menu.delete"),action:function(av){ao._removeMetric(av.metricIndex)}},{id:"moveTo",type:"subMenu",label:mvc.getMessage(y,"chart.menu.moveTo"),menu:{items:[]}},{id:"copyTo",type:"subMenu",label:mvc.getMessage(y,"chart.menu.copyTo"),menu:{items:[]}},{type:"separator"},{id:"moveUp",type:"action",label:mvc.getMessage(y,"chart.menu.moveUp"),action:function(av){ao._metricUp(av.metricIndex)}},{id:"moveDown",type:"action",label:mvc.getMessage(y,"chart.menu.moveDown"),action:function(av){ao._metricDown(av.metricIndex)}},{type:"separator"},{type:"action",label:mvc.getMessage(y,"chart.menu.properties"),action:function(av,aw){ao._doMetricPropertiesDialog(av.metricIndex,aw);return true}}]};ar.menu(ap)},_editMode:function(ax,aB){var aC=this;var aq=this.options.state;var az=this.element;var ao=this._getData(t);var aw,ap;var at;function aA(aF,aE){var aD=mvc.htmlBuilder();aD.markup("<input type='text' maxlength='100' value='").attr(aE).markup("'>");az.find(aF).html(aD.toString())}function av(aF,aG){var aD=mvc.htmlBuilder();var aE=az.find(aF+" input").val();if(!aE&&aG){aE=aG}az.find(aF).html(aD.content(aE).toString());return aE}function au(aG,aF){var aD=mvc.htmlBuilder();var aE;if(!aF){aE="&nbsp"}else{aE=aD.content(aF).toString()}az.find(aG).html(aE)}function ay(){var aD=aq.name+aq.units;P.each(aq.metrics,function(aF,aE){aD+=aE.name});return aD}function ar(){az.find(".chartLegend li, .yAxisUnits").removeClass("editMode");if(az.hasClass(R)){aC._setTabIndex("h3, .legendLabel",0)}ax.removeClass("active").attr("title",mvc.getMessage(y,"chart.edit"));az.unbind("keydown.editmode");if(az.hasClass(R)){mvc.setFocus(aB?aB.get(0):ax.get(0),0)}}ao=!ao;this._setData(t,ao);if(ao){aA("h3",aq.name);aA(".yAxisUnits",aq.units);P.each(aq.metrics,function(aE,aD){aA(".legendLabel:eq("+aE+") .label",aD.name)});az.find(".chartLegend li, .yAxisUnits").addClass("editMode");at=az.find("h3 input").get(0);if(aB&&aB.is(".legendLabel")){at=aB.find("input").get(0)}at.select();mvc.setFocus(at,0);this._setTabIndex("h3, .legendLabel",-1);ax.addClass("active").attr("title",mvc.getMessage(y,"chart.edit.active"));az.bind("keydown.editmode",function(aE){var aD=aE.keyCode;if(aE.altKey||aE.ctrlKey||!P(aE.target).is(":text")){return}if(aD==b){aC._setData(t,false);au("h3",aq.name);au(".yAxisUnits",aq.units);P.each(aq.metrics,function(aG,aF){au(".legendLabel:eq("+aG+") .label",aF.name)});ar();return false}else{if(aD==an){aC._editMode(ax,aB);return false}}})}else{aw=ay();aq.name=av("h3",aq.name);aq.units=av(".yAxisUnits");P.each(aq.metrics,function(aE,aD){aD.name=av(".legendLabel:eq("+aE+") .label",aD.name)});ar();ap=ay();if(ap!=aw){this._trigger(ad,0)}}},_setTabIndex:function(ap,aq){var ao=this.element;ao.find(ap).each(function(){this.tabIndex=aq})}});P.extend(P.ui.chart,{version:"1.7",getter:["getSelectedMetric","addMetric","getMinSize"],defaults:{getNewMetric:null,hasNewMetric:null,dropAccept:null,getPanels:null,getPanel:null,getActiveView:null,restrictChanges:false,state:{name:null,units:"",type:h,color:"#000000",background:"#ffffff",highlight:"#FBC8CA",autoRange:true,rangeMin:0,rangeMax:100,thresholdMin:null,thresholdMax:null,markerIndex:0,timeRange:"current",timeStart:"",timeDuration:"",metrics:[]}},setDefaultTimeRange:function(ao){aj=ao*60},setZoomPercent:function(ao){g=ao},setShowOverview:function(ao){if(ao=="always"){N="A"}else{if(ao=="never"){N="N"}else{N="S"}}},start:function(ar,ao){var ap;var aq=ar.metrics;for(ap=0;ap<aq.length;ap++){wldfDM.register(aq[ap].metric,ao)}},stop:function(ar,ao){var ap;var aq=ar.metrics;for(ap=0;ap<aq.length;ap++){wldfDM.unregister(aq[ap].metric,ao)}},validateState:function(au){var ar,at,ap,ao;function aq(av,ax,aw){P.each(av,function(ay,aC){var aA=ax[aC.prop];var aB;var az;if(aA===null||aA===""){return true}aC.value=aA;az=mvc.validate(aC,null,function(aE,aD){aB=aD});if(!az){delete ax[aC.prop];mvc.logError(aw+": ["+aC.prop+"="+aA+"]. Reason: "+aB)}})}if(!au.name){mvc.logError("Missing chart name");return false}if(au.timeStart){au.timeStart=new Date(Date.parse(au.timeStart));if(isNaN(au.timeStart)){au.timeStart=null}else{au.timeStart=mvc.formatDateTime(au.timeStart,{fullYear:true})}}aq(ae,au,"Ignoring bad chart value");if(au.timeStart){au.timeStart=mvc.parseDateTime(au.timeStart,{fullYear:true});au.timeStart=au.timeStart.toUTCString()}else{au.timeRange="current"}at=au.metrics;for(ar=0;ar<at.length;ar++){ap=at[ar];if(!ap.name){mvc.logError("Missing metric name");return false}ao=ap.metric;if(!ao||!ao.on||!ao.a||!ao.type||!ao.server){mvc.logError("Missing or invalid metric");return false}aq(C,ap,"Ignoring bad metric value");if(!ap.markerShape||!ap.color||typeof ap.markerFill!="boolean"){delete ap.markerShape;delete ap.color;delete ap.markerFill}}return true}});P(document).ready(function(){mvc.formHelper.addValidator("color",function(ao){if(ao===""){return null}if(/^rgb\(\s*[0-9]{1,3}\s*,\s*[0-9]{1,3}\s*,\s*[0-9]{1,3}\s*\)$/.test(ao)||/^rgb\(\s*[0-9]+(?:\.[0-9]+)?\%\s*,\s*[0-9]+(?:\.[0-9]+)?\%\s*,\s*[0-9]+(?:\.[0-9]+)?\%\s*\)$/.test(ao)||/^#[a-fA-F0-9]{6}$/.test(ao)||/^#[a-fA-F0-9]{3}$/.test(ao)){return null}return mvc.getMessage(y,"chart.validation.color")});P("#metricMarkers").filteredList({itemAdapter:{value:function(ao){return ao.shape+","+ao.fill},renderLabel:function(ao,ap){ao.markup("<span class='label'><span class='canvasPlaceholder'></span></span>")}},label:null,list:al});P("#metricColors").filteredList({itemAdapter:{value:function(ao){return ao.color},renderLabel:function(ao,ap){ao.markup("<span class='label'><span style='background-color:").attr(ap.color).markup(";'/></span></span>")}},label:null,list:al})})})(jQuery);
/*
  UI widget for Tree view
  Copyright (c) 2010 Oracle and/or its affiliates. All rights reserved.
*/
(function(h){var e=37,a=38,w=39,o=40,y=36,c=35,b=33,j=34,t=14,B=13,z=27,m=46,s=113;var f="treeView";var k="change";var r="lastFocused";var n="span.nodelabel",q="span.treeItem",i="selected",u=".treeItem.selected",l="focused",g="expandable",d="collapsable",p="processing",A="leaf";function x(C){var D=C.get(0).id;return D.substring(D.lastIndexOf("_")+1)}function v(D,C,E){if(E.renderIcon){E.renderIcon(D,C)}C.markup("<span class='nodelabel' tabIndex='-1'>");E.renderLabel(D,C);C.markup("</span>")}h.widget("ui.treeView",{_init:function(){var D=this;var F=this.element;var I=this.options;var H=I.nodeAdapter;var E=mvc.htmlBuilder();var C,G,J;I.treeMap={};I.nextNodeId=0;if(I.collapsibleRoot===false){I.expandRoot=true}E.markup("<div class='treeContainer' style='position:relative;overflow:auto;height:100%;'><ul>");C=H.root();if(I.showRoot){this._renderNode(C,E)}else{if(H.hasChildren(C)){this._renderChildren(C,E)}}E.markup("</ul></div>");F.html(E.toString()).addClass(f);if(I.expandRoot){J=F.find("ul:first li:first");if(J.length>0){this._expandNode(J)}}F.bind("click.treeView",function(O){var K=h(O.target);var N,L,M;if(K.is(".hitarea")){N=K.parent();if(N.hasClass(g)){D._expandNode(N)}else{D._collapseNode(N)}return false}else{L=K.closest(q);if(L.length>0){D.selectNode(L,false);return false}}}).bind("keydown.treeView",function(P){var M=P.keyCode;var K,L,N,O,Q;if(P.altKey||P.target.nodeName=="INPUT"){return}if(P.keyCode==b||P.keyCode==j){N=F.find(".nodelabel:visible:first").outerHeight()||24;Q=F.find("li:visible:first");N+=parseInt(Q.css("margin-top"),10)+parseInt(Q.css("margin-bottom"),10);O=Math.floor(F.find(".treeContainer").get(0).clientHeight/N)-1}if(M==y){F.find(".treeItem:visible:first").each(function(){D.selectNode(h(this),true,true)});return false}else{if(M==c){F.find(".treeItem:visible:last").each(function(){D.selectNode(h(this),true,true)});return false}else{if(M==o){D._traverseDown(1);return false}else{if(M==a){D._traverseUp(1);return false}else{if(M==j){D._traverseDown(O);return false}else{if(M==b){D._traverseUp(O);return false}else{if(M==e){L=D._getData(r);if(L){K=h(L).parent().parent();if(K.hasClass(d)){D._collapseNode(K)}else{K.parent().prev(q).each(function(){D.selectNode(h(this),true,true)})}}return false}else{if(M==w){L=D._getData(r);if(L){K=h(L).parent().parent();if(K.hasClass(g)){D._expandNode(K)}else{if(K.hasClass(d)){K.find("ul:first li:first .treeItem").each(function(){D.selectNode(h(this),true,true)})}}}return false}else{if(M==s){L=D._getData(r);if(L){D._rename(h(L).parent())}}else{if(M==m){L=D._getData(r);if(L){D._delete(h(L).parent())}}}}}}}}}}}});G=F.find("ul:first").get(0);mvc.bindFocus(G,function(L){var K=h(L.target).closest(n);if(K.length===0){return}K.addClass(l);D._setFocusable(K)});mvc.bindBlur(G,function(L){var K=h(L.target).closest(n);K.removeClass(l)});D._setData(r,null);F.find("ul:first .nodelabel:visible:first").each(function(){this.tabIndex=0;D._setData(r,this)})},selectNode:function(D,K,G){var I=this.element;var J=this;var E=this.options;var C=I.find(u);var H,F;if(C.length>0){C.removeClass(i)}D.addClass(i);H=D.parent().parents("li:first");while(H.length>0&&H.hasClass("expandable")){this._expandNode(H);H=H.parents("li:first")}F=D.find(n);if(K){mvc.setFocus(F.get(0),0)}else{this._setFocusable(F)}if(C.get(0)!==D.get(0)){if(E.triggerTimerId){clearTimeout(E.triggerTimerId);E.triggerTimerId=null}E.triggerTimerId=setTimeout(function(){E.triggerTimerId=null;J._trigger(k,0)},G?350:1)}},selection:function(){var C=this.element;return C.find(u)},getNodes:function(F){var D=this.element;var E=this.options;var C=[];F.each(function(){C.push(E.treeMap[x(h(this).closest("li"))])});return C},selectionNodes:function(){return this.getNodes(this.selection())},find:function(C,I,H){var L=this;var K=this.element;var E=this.options;var J,F;var D=null;var G;H=H||1;if(!C&&!E.showRoot){J=K.find("ul:first > li")}else{F=C?C.parent():K.find("ul:first > li");this._addChildrenIfNeeded(F);J=F.find("ul:first > li")}J.each(function(M){G=E.treeMap[x(h(this))];if(I(G)){D=h(this).children(q);return false}});if(D===null&&H>1){J.each(function(M){D=L.find(h(this).children(q),I,H-1);if(D!==null){return false}})}return D},addNode:function(S,T,D){var N=this;var O=this.element;var P=this.options;var G=(O.get(0).id||"")+"_";var Q=G+"new";var H=P.nodeAdapter;var K,C,I,L;var R=false;var E=N._getData(r);function F(){C.remove();N._makeLeafIfNeeded(S);mvc.setFocus(E,0)}function M(U){if(R){return}R=true;H.addNode(I,U,D,function(Y,X){var V,W;if(Y===false){R=false;L=C.find("input").val(T).get(0);mvc.setFocus(L,0);L.select();return}if(Y){C.remove();W=mvc.htmlBuilder();N._renderNode(Y,W);if(X>=K.children("li").length){K.append(W.toString())}else{K.children("li").eq(X).before(W.toString())}V=K.children("li").eq(X);N.selectNode(V.children(q),true)}else{F()}})}function J(){K.append("<li><span id='"+Q+"' class='treeItem'><span class='nodelabel'><input type='text'></span></span></li>");C=K.find("#"+Q).parent();L=C.find("input").val(T).keydown(function(U){if(U.keyCode==t||U.keyCode==B){M(h(this).val());return false}else{if(U.keyCode==z){setTimeout(function(){F()},10);return false}}}).blur(function(U){M(h(this).val())}).get(0);mvc.setFocus(L,0);L.select()}if(S===null){I=H.root();if(P.showRoot){S=O.find("ul:first > li")}else{K=O.find("ul:first");J();return}}else{I=P.treeMap[x(S.parent())]}N._makeParentIfNeeded(S);this._expandNode(S.parent(),function(){K=S.next("ul");J()})},renameNode:function(E){var P=this;var N=this.element;var G=this.options;var I=G.nodeAdapter;var J,M,D;var F=E.parent();var H=x(F);var L=false;var K=mvc.htmlBuilder();function O(){K.clear();v(J,K,I);E.html(K.toString());P.selectNode(E,true)}function C(Q){if(L){return}L=true;if(Q==D){O();return}I.renameNode(J,Q,function(U,T){var V;var S,R;if(U===false){L=false;M=E.find("input").val(D).get(0);mvc.setFocus(M,0);M.select();return}if(U){K.clear();v(U,K,I);E.html(K.toString());G.treeMap[H]=U;S=F.parent();R=S.children("li");V=R.index(F);if(V!=T){if(T>V){T+=1}if(T>=R.length){S.append(F)}else{R.eq(T).before(F)}}P.selectNode(E,true);P._trigger(k,0)}else{O()}})}J=G.treeMap[H];D=I.getName(J);E.html("<input type='text'>");M=E.find("input").val(D).keydown(function(Q){if(Q.keyCode==t||Q.keyCode==B){C(h(this).val());return false}else{if(Q.keyCode==z){setTimeout(function(){O()},10);return false}}}).blur(function(Q){C(h(this).val())}).get(0);mvc.setFocus(M,0);M.select()},deleteNode:function(D){var E=this.options;var I=D.parents("ul").eq(0).prev();var C=x(D.parent());var K,G,J;var F=D.children(n);var L=F.hasClass(l);var M=this._getData(r)==F.get(0);var H=D.hasClass(i);delete E.treeMap[C];K=D.parent();if(H||M){G=K.next();if(G.length===0){G=K.prev();if(G.length>0){if(G.hasClass(d)){G=G.find("li:visible:last")}}else{G=K.parent().parent("li")}}if(M){if(G.length>0){J=G.find(".treeItem > .nodelabel").get(0);J.tabIndex=0;this._setData(r,J)}else{this._setData(r,null)}}if(G.length>0){if(H){this.selectNode(G.children(q),L)}}}K.remove();this._makeLeafIfNeeded(I)},destroy:function(){var C=this.element;C.unbind(".treeView");C.html("").removeClass(f);h.widget.prototype.destroy.apply(this,arguments)},_renderNode:function(H,I){var F=this.options;var G=F.nodeAdapter;var K=this.element;var D=(K.get(0).id||"")+"_";var J,E,C;E=F.nextNodeId;F.treeMap[E]=H;F.nextNodeId+=1;if(E===0&&F.showRoot&&!F.collapsibleRoot){J=false;C=g}else{J=G.hasChildren(H);C=J?g:A}I.markup("<li id='").attr(D+E).markup("' class='").attr(C).markup("'>");if(J===null||J===true){I.markup("<div class='hitarea'/>")}I.markup("<span class='treeItem'>");v(H,I,G);I.markup("</span>");I.markup("</li>")},_renderChildren:function(F,G,J,D){var K=this;var C=this.options;var E=C.nodeAdapter;var I;function H(){var L;for(L=0;L<I;L++){K._renderNode(E.child(F,L),G)}if(J){J(true)}}I=E.childCount(F);if(I===null){if(J){D.removeClass(d).addClass(p);E.fetchChildNodes(F,function(L){if(L){I=E.childCount(F);H()}else{J(false)}D.removeClass(p).addClass(d)})}}else{H()}},_makeParentIfNeeded:function(C){if(C&&C.prev("div").length===0){C.parent().removeClass(A);C.before("<div class='hitarea'></div>");C.after("<ul></ul>")}},_makeLeafIfNeeded:function(C){if(C&&C.next("ul").find("li").length===0){C.parent().removeClass(g).removeClass(d).addClass(A);C.prev(".hitarea").remove();C.next("ul").remove()}},_addChildrenIfNeeded:function(C){var H=this.options;var G=H.nodeAdapter;var F=H.treeMap[x(C)];var E,D;E=C.children("ul");if(E.length>0||C.hasClass(A)){return}else{D=mvc.htmlBuilder();D.markup("<ul>");this._renderChildren(F,D);D.markup("</ul>");C.append(D.toString()).children("ul").hide()}},_expandNode:function(C,F){var I=this.options;var H=I.nodeAdapter;var G=I.treeMap[x(C)];var E,D;C.removeClass(g).addClass(d);E=C.children("ul");if(E.length>0&&H.childCount(G)!==null){E.show();if(F){F()}}else{E.remove();D=mvc.htmlBuilder();D.markup("<ul>");this._renderChildren(G,D,function(J){if(J){D.markup("</ul>");C.append(D.toString());if(F){F()}}},C)}},_collapseNode:function(C){C.removeClass(d).addClass(g);if(C.find(u).length>0){this.selectNode(C.children(q),true)}C.children("ul").hide()},_delete:function(D){var C=this;var G=this.options;var F=G.nodeAdapter;var E=G.treeMap[x(D.parent())];if(F.allowDelete(E)){F.deleteNode(E,function(H){if(H){C.deleteNode(D)}})}},_rename:function(C){var F=this.options;var E=F.nodeAdapter;var D=F.treeMap[x(C.parent())];if(E.allowRename(D)){this.renameNode(C)}},_traverseDown:function(G){var C,D,F;var E=this._getData(r);if(!E){return}C=h(E).parent().parent();for(F=0;F<G;F++){if(C.hasClass(d)){C=C.find("ul:first li:first")}else{D=C.next();if(D.length>0){C=D}else{D=C.parents("ul").eq(0).parents("li").next("li");if(D.length===0){break}C=D}}}if(C.length>0){this.selectNode(C.children(q),true,true)}},_traverseUp:function(G){var C,D,F;var E=this._getData(r);if(!E){return}C=h(E).parent().parent();for(F=0;F<G;F++){D=C.prev();if(D.length>0){if(D.hasClass(d)){C=D.find("li:visible:last")}else{C=D}}else{D=C.parent().parent("li");if(D.length===0){break}C=D}}if(C.length>0){this.selectNode(C.children(q),true,true)}},_setFocusable:function(C){var E=C.get(0);var D=this._getData(r);if(D&&D!==E){D.tabIndex=-1}E.tabIndex=0;this._setData(r,E)}});h.extend(h.ui.treeView,{getter:["selection","selectionNodes","getNodes","find"],defaults:{showRoot:true,expandRoot:true,collapsibleRoot:true,multiSelect:false,nodeAdapter:null,triggerTimerId:null}})})(jQuery);
/*
  Dashboard entry point
  Copyright (c) 2009, 2010, Oracle and/or its affiliates. All rights reserved.
*/
(function(aB){var Z="dashboard";var H=13;var p=500;var E=10*1000;var aK=[{id:"prefSampleInterval",prop:"sampleInterval",type:"number",constraints:[{fn:"required"},{fn:"integer"},{fn:"range",args:[10,null]}]},{id:"prefMaxSamples",prop:"maxSamples",type:"number",constraints:[{fn:"required"},{fn:"integer"},{fn:"range",args:[1,10000]}]},{id:"prefDefaultTimeRange",prop:"defaultTimeRange",type:"number",constraints:[{fn:"required"},{fn:"integer"},{fn:"range",args:[1,null]}]},{id:"prefZoomPercent",prop:"zoomPercent",constraints:[{fn:"required"},{fn:"integer"},{fn:"range",args:[1,99]}]},{id:"prefDefaultChartType",prop:"defaultChartType",constraints:[{fn:"required"},{fn:"member",args:[["barChart","linePlot","scatterPlot","linearVGauge","linearHGauge","radialGauge"]]}]},{id:"prefShowOverview",prop:"showOverview",constraints:[{fn:"required"},{fn:"member",args:[["always","whenSelected","never"]]}]}];var an={sampleInterval:20,maxSamples:100,zoomPercent:20,defaultTimeRange:5,defaultChartType:"linePlot",showOverview:"whenSelected"};var av={splitterWidth:300,splitterClosed:false,lastViewId:null};var J=true;var w=null;var az;var ap;var ax=null;var u=null;var v={};var o=0;var ae="#000000";var R="#FFFFFF";var T="#FBC8CA";function e(aQ,aP){if(!J){return}aP=aP||null;mvc.ajax("PUT","data/preferences/current/dashboard",aP,aQ)}function aD(){e(an)}var j=null;var P=null;function ab(){var aP;if(j){return}if(P===null){aP=0}else{aP=(P+E)-(new Date()).getTime();aP=aP<0?0:aP}j=setTimeout(function(){j=null;P=(new Date()).getTime();e(av)},aP)}function n(aP){wldfDM.setSamplePeriod(an.sampleInterval);wldfDM.setMaxSamples(an.maxSamples);aB.ui.chart.setDefaultTimeRange(an.defaultTimeRange);aB.ui.chart.setZoomPercent(an.zoomPercent);aB.ui.chart.setShowOverview(an.showOverview);if(aP===true){aD()}}function g(aP){var aQ=false;aB.each(aK,function(aR,aV){var aT=aP[aV.prop];var aU;var aS;if(!aT){return true}aV.value=aT;aS=mvc.validate(aV,null,function(aX,aW){aU=aW});if(!aS){aQ=true;delete aP[aV.prop];mvc.logError("Ignoring bad preference value: ["+aV.prop+"="+aT+"]. Reason: "+aU)}});return aQ}function z(aQ){var aT,aS,aU,aR,aP;if(!aQ.id||!aQ.name||!aQ.panels){mvc.logError("Ignoring bad view: missing name, id or, panels");return false}aR=aQ.panels;for(aT=0;aT<aR.length;aT++){aU=aR[aT];for(aS=0;aS<aU.length;aS++){aP=aU[aS];if(aP.type!="chart"){mvc.logError("Ignoring bad view '"+aQ.name+"': bad chart type");return false}if(!aB.ui.chart.validateState(aU[aS].state)){mvc.logError("Ignoring bad view '"+aQ.name+"': bad chart content");return false}}}return true}function O(aP){mvc.ajax("GET","data/diagnostics/toolbar",function(aQ){if(aQ){J=true;aB("#user").text(mvc.escapeHTMLContent(aQ.body.loggedInUser));aB("#domain").text(mvc.escapeHTMLContent(aQ.body.domain));mvc.setLocaleSettings(aQ.body.localeSettings);if(aP){aP()}}})}function au(){ax=null;u=null;aB("#viewArea").dashboardView("destroy");aB("#viewTree").treeView("destroy");az.removeAllChildren();ap.removeAllChildren();aj();if(!J){O(au);return}mvc.ajax("GET","data/preferences/current/dashboard",function(aP){var aQ,aR=false,aS;if(aP){aQ=aP.body;aR=g(aQ);aB.each(an,function(aT,aU){if(aQ[aT]){an[aT]=aQ[aT]}});if(aQ.splitterWidth&&aQ.splitterWidth>10&&aQ.splitterWidth<2000){av.splitterWidth=aQ.splitterWidth}if(aQ.splitterClosed=="true"||aQ.splitterClosed=="false"){av.splitterClosed=aQ.splitterClosed=="true"}if(aQ.lastViewId){av.lastViewId=aQ.lastViewId}aB.each(aQ,function(aU,aV){var aT;if(aU.match(/^view_[a-z,A-Z,\-,0-9]*$/)){aT=JSON.parse(aV);if(z(aT)){ac(aT)}}})}n(aR);aS=av.splitterClosed?0:av.splitterWidth;aB("#mainContent > .splitterH").css("left",aS+"px");if(av.splitterClosed){aB("#mainContent > .splitterH button").click()}aB("#explorer").width(av.splitterWidth+"px");C(aS,av.splitterClosed);aJ()})}function f(aV){var aP={},aT;var aR,aU,aS,aQ;aR=aV.indexOf(":");if(aR<0){throw"invalid object name"}aP.domain=aV.substring(0,aR);aP.keys={};aT=aP.keys;aV=aV.substring(aR+1);aU=aV.split(",");for(aS=0;aS<aU.length;aS++){aQ=aU[aS].split("=");if(aQ.length!=2){throw"invalid object name key"}aT[aQ[0]]=aQ[1]}return aP}var k=[{path:"JVMRuntime",template:[{category:"",name:{templateFormatKey:"bview.jvm.viewTitle",bundle:Z},panels:{templateForeach:"servers",merge:"flattenInstances",body:[{type:"chart",state:{name:{templateFormatKey:"bview.jvm.chartTitle",bundle:Z,args:["server"]},type:"linePlot",units:{templateFormatKey:"bview.units.bytes",bundle:Z},background:{templateValue:"background"},color:{templateValue:"color"},highlight:{templateValue:"highlight"},autoScale:true,metrics:[{name:{templateFormatKey:"bview.jvm.metricSize",bundle:Z},metric:{on:{templateValue:"instance"},a:"HeapSizeCurrent",type:"weblogic.management.runtime.JVMRuntimeMBean",server:{templateValue:"server"}},color:"#FFCC33",markerShape:"circle",markerFill:true},{name:{templateFormatKey:"bview.jvm.metricFree",bundle:Z},metric:{on:{templateValue:"instance"},a:"HeapFreeCurrent",type:"weblogic.management.runtime.JVMRuntimeMBean",server:{templateValue:"server"}},color:"#33CCFF",markerShape:"diamond",markerFill:true}]}}]}}]},{path:"WorkManagerRuntimes",template:{templateForeach:"servers",body:{category:{templateValue:"server"},name:{templateFormatKey:"bview.serverwm.viewTitle",bundle:Z,args:["server"]},panels:{templateForeach:"instances",merge:"instanceName",body:[{type:"chart",state:{name:{templateFormatKey:"bview.wm.chartTitle1",bundle:Z,args:["instanceName"]},type:"linePlot",units:"",background:{templateValue:"background"},color:{templateValue:"color"},highlight:{templateValue:"highlight"},autoScale:true,metrics:[{name:{templateFormatKey:"bview.wm.metricCompleted",bundle:Z},metric:{on:{templateValue:"instance"},a:"CompletedRequests",type:"weblogic.management.runtime.WorkManagerRuntimeMBean",server:{templateValue:"server"}},color:"#FFCC33",markerShape:"circle",markerFill:true}]}},{type:"chart",state:{name:{templateFormatKey:"bview.wm.chartTitle2",bundle:Z,args:["instanceName"]},type:"linePlot",units:"",background:{templateValue:"background"},color:{templateValue:"color"},highlight:{templateValue:"highlight"},autoScale:true,metrics:[{name:{templateFormatKey:"bview.wm.metricPending",bundle:Z},metric:{on:{templateValue:"instance"},a:"PendingRequests",type:"weblogic.management.runtime.WorkManagerRuntimeMBean",server:{templateValue:"server"}},color:"#FFCC33",markerShape:"circle",markerFill:true},{name:{templateFormatKey:"bview.wm.metricStuck",bundle:Z},metric:{on:{templateValue:"instance"},a:"StuckThreadCount",type:"weblogic.management.runtime.WorkManagerRuntimeMBean",server:{templateValue:"server"}},color:"#33CCFF",markerShape:"diamond",markerFill:true}]}}]}}}},{path:"ApplicationRuntimes.WorkManagerRuntimes",template:{templateForeach:"servers",body:{category:{templateValue:"server"},name:{templateFormatKey:"bview.appwm.viewTitle",bundle:Z,args:["server"]},panels:{templateForeach:"instances",merge:"instanceName",keys:["ApplicationRuntime","Name"],body:[{type:"chart",state:{name:{templateFormatKey:"bview.wm.chartTitle1",bundle:Z,args:["instanceName"]},type:"linePlot",units:"",background:{templateValue:"background"},color:{templateValue:"color"},highlight:{templateValue:"highlight"},autoScale:true,metrics:[{name:{templateFormatKey:"bview.wm.metricCompleted",bundle:Z},metric:{on:{templateValue:"instance"},a:"CompletedRequests",type:"weblogic.management.runtime.WorkManagerRuntimeMBean",server:{templateValue:"server"}},color:"#FFCC33",markerShape:"circle",markerFill:true}]}},{type:"chart",state:{name:{templateFormatKey:"bview.wm.chartTitle2",bundle:Z,args:["instanceName"]},type:"linePlot",units:"",background:{templateValue:"background"},color:{templateValue:"color"},highlight:{templateValue:"highlight"},autoScale:true,metrics:[{name:{templateFormatKey:"bview.wm.metricPending",bundle:Z},metric:{on:{templateValue:"instance"},a:"PendingRequests",type:"weblogic.management.runtime.WorkManagerRuntimeMBean",server:{templateValue:"server"}},color:"#FFCC33",markerShape:"circle",markerFill:true},{name:{templateFormatKey:"bview.wm.metricStuck",bundle:Z},metric:{on:{templateValue:"instance"},a:"StuckThreadCount",type:"weblogic.management.runtime.WorkManagerRuntimeMBean",server:{templateValue:"server"}},color:"#33CCFF",markerShape:"diamond",markerFill:true}]}}]}}}},{path:"JMSRuntime",template:[{category:"",name:{templateFormatKey:"bview.jms.viewTitle",bundle:Z},panels:{templateForeach:"servers",merge:"flattenInstances",body:[{type:"chart",state:{name:{templateFormatKey:"bview.jms.chartTitle",bundle:Z,args:["server"]},type:"linePlot",units:"",background:{templateValue:"background"},color:{templateValue:"color"},highlight:{templateValue:"highlight"},autoScale:true,metrics:[{name:{templateFormatKey:"bview.jms.metricConn",bundle:Z},metric:{on:{templateValue:"instance"},a:"ConnectionsCurrentCount",type:"weblogic.management.runtime.JMSRuntimeMBean",server:{templateValue:"server"}},color:"#FFCC33",markerShape:"circle",markerFill:true}]}}]}}]},{path:"JMSRuntime.JMSServers",template:{templateForeach:"servers",body:{category:{templateValue:"server"},name:{templateFormatKey:"bview.jmssvr.viewTitle",bundle:Z,args:["server"]},panels:{templateForeach:"instances",merge:"instanceName",body:[{type:"chart",state:{name:{templateFormatKey:"bview.jmssvr.chartTitle1",bundle:Z,args:["instanceName"]},type:"linePlot",units:{templateFormatKey:"bview.units.messages",bundle:Z},background:{templateValue:"background"},color:{templateValue:"color"},highlight:{templateValue:"highlight"},autoScale:true,metrics:[{name:{templateFormatKey:"bview.jmssvr.metricMessagesCurrent",bundle:Z},metric:{on:{templateValue:"instance"},a:"MessagesCurrentCount",type:"weblogic.management.runtime.JMSServerRuntimeMBean",server:{templateValue:"server"}},color:"#FFCC33",markerShape:"circle",markerFill:true},{name:{templateFormatKey:"bview.jmssvr.metricMessagesPending",bundle:Z},metric:{on:{templateValue:"instance"},a:"MessagesPendingCount",type:"weblogic.management.runtime.JMSServerRuntimeMBean",server:{templateValue:"server"}},color:"#33CCFF",markerShape:"diamond",markerFill:true}]}},{type:"chart",state:{name:{templateFormatKey:"bview.jmssvr.chartTitle2",bundle:Z,args:["instanceName"]},type:"linePlot",units:{templateFormatKey:"bview.units.bytes",bundle:Z},background:{templateValue:"background"},color:{templateValue:"color"},highlight:{templateValue:"highlight"},autoScale:true,metrics:[{name:{templateFormatKey:"bview.jmssvr.metricBytesCurrent",bundle:Z},metric:{on:{templateValue:"instance"},a:"BytesCurrentCount",type:"weblogic.management.runtime.JMSServerRuntimeMBean",server:{templateValue:"server"}},color:"#FFCC33",markerShape:"circle",markerFill:true},{name:{templateFormatKey:"bview.jmssvr.metricBytesPending",bundle:Z},metric:{on:{templateValue:"instance"},a:"BytesPendingCount",type:"weblogic.management.runtime.JMSServerRuntimeMBean",server:{templateValue:"server"}},color:"#33CCFF",markerShape:"diamond",markerFill:true}]}}]}}}},{path:"ThreadPoolRuntime",template:[{category:"",name:{templateFormatKey:"bview.threadpool.viewTitle",bundle:Z},panels:{templateForeach:"servers",merge:"flattenInstances",body:[{type:"chart",state:{name:{templateFormatKey:"bview.threadpool.chartTitle",bundle:Z,args:["server"]},type:"linePlot",units:"",background:{templateValue:"background"},color:{templateValue:"color"},highlight:{templateValue:"highlight"},autoScale:true,metrics:[{name:{templateFormatKey:"bview.threadpool.metricHogging",bundle:Z},metric:{on:{templateValue:"instance"},a:"HoggingThreadCount",type:"weblogic.management.runtime.ThreadPoolRuntimeMBean",server:{templateValue:"server"}},color:"#FFCC33",markerShape:"circle",markerFill:true},{name:{templateFormatKey:"bview.threadpool.metricStandby",bundle:Z},metric:{on:{templateValue:"instance"},a:"StandbyThreadCount",type:"weblogic.management.runtime.ThreadPoolRuntimeMBean",server:{templateValue:"server"}},color:"#33CCFF",markerShape:"diamond",markerFill:true},{name:{templateFormatKey:"bview.threadpool.metricUser",bundle:Z},metric:{on:{templateValue:"instance"},a:"PendingUserRequestCount",type:"weblogic.management.runtime.ThreadPoolRuntimeMBean",server:{templateValue:"server"}},color:"#CC3333",markerShape:"triangleUp",markerFill:true}]}}]}}]},{path:"JDBCServiceRuntime.JDBCDataSourceRuntimeMBeans",template:{templateForeach:"servers",body:{category:{templateValue:"server"},name:{templateFormatKey:"bview.jdbc.viewTitle",bundle:Z,args:["server"]},panels:{templateForeach:"instances",merge:"instanceName",bodyItems:[[{type:"chart",state:{name:{templateFormatKey:"bview.jdbc.chartTitle1",bundle:Z,args:["instanceName"]},type:"linePlot",units:"",background:{templateValue:"background"},color:{templateValue:"color"},highlight:{templateValue:"highlight"},autoScale:true,metrics:[{name:{templateFormatKey:"bview.jdbc.metricCap",bundle:Z},metric:{on:{templateValue:"instance"},a:"CurrCapacity",type:"weblogic.management.runtime.JDBCDataSourceRuntimeMBean",server:{templateValue:"server"}},color:"#FFCC33",markerShape:"circle",markerFill:true},{name:{templateFormatKey:"bview.jdbc.metricAvail",bundle:Z},metric:{on:{templateValue:"instance"},a:"NumAvailable",type:"weblogic.management.runtime.JDBCDataSourceRuntimeMBean",server:{templateValue:"server"}},color:"#33CCFF",markerShape:"diamond",markerFill:true}]}},{type:"chart",state:{name:{templateFormatKey:"bview.jdbc.chartTitle2",bundle:Z,args:["instanceName"]},type:"linePlot",units:"",background:{templateValue:"background"},color:{templateValue:"color"},highlight:{templateValue:"highlight"},autoScale:true,metrics:[{name:{templateFormatKey:"bview.jdbc.metricActive",bundle:Z},metric:{on:{templateValue:"instance"},a:"ActiveConnectionsCurrentCount",type:"weblogic.management.runtime.JDBCDataSourceRuntimeMBean",server:{templateValue:"server"}},color:"#FFCC33",markerShape:"circle",markerFill:true},{name:{templateFormatKey:"bview.jdbc.metricWaiting",bundle:Z},metric:{on:{templateValue:"instance"},a:"WaitingForConnectionCurrentCount",type:"weblogic.management.runtime.JDBCDataSourceRuntimeMBean",server:{templateValue:"server"}},color:"#33CCFF",markerShape:"diamond",markerFill:true}]}}],[{type:"chart",state:{name:{templateFormatKey:"bview.jdbc.chartTitle3",bundle:Z,args:["instanceName"]},type:"linePlot",units:"",background:{templateValue:"background"},color:{templateValue:"color"},highlight:{templateValue:"highlight"},autoScale:true,metrics:[{name:{templateFormatKey:"bview.jdbc.metricLeaked",bundle:Z},metric:{on:{templateValue:"instance"},a:"LeakedConnectionCount",type:"weblogic.management.runtime.JDBCDataSourceRuntimeMBean",server:{templateValue:"server"}},color:"#FFCC33",markerShape:"circle",markerFill:true},{name:{templateFormatKey:"bview.jdbc.metricFailed",bundle:Z},metric:{on:{templateValue:"instance"},a:"FailedReserveRequestCount",type:"weblogic.management.runtime.JDBCDataSourceRuntimeMBean",server:{templateValue:"server"}},color:"#33CCFF",markerShape:"diamond",markerFill:true}]}},{type:"chart",state:{name:{templateFormatKey:"bview.jdbc.chartTitle4",bundle:Z,args:["instanceName"]},type:"linePlot",units:"",background:{templateValue:"background"},color:{templateValue:"color"},highlight:{templateValue:"highlight"},autoScale:true,metrics:[{name:{templateFormatKey:"bview.jdbc.metricSize",bundle:Z},metric:{on:{templateValue:"instance"},a:"PrepStmtCacheCurrentSize",type:"weblogic.management.runtime.JDBCDataSourceRuntimeMBean",server:{templateValue:"server"}},color:"#FFCC33",markerShape:"circle",markerFill:true},{name:{templateFormatKey:"bview.jdbc.metricHit",bundle:Z},metric:{on:{templateValue:"instance"},a:"PrepStmtCacheHitCount",type:"weblogic.management.runtime.JDBCDataSourceRuntimeMBean",server:{templateValue:"server"}},color:"#33CCFF",markerShape:"diamond",markerFill:true},{name:{templateFormatKey:"bview.jdbc.metricMiss",bundle:Z},metric:{on:{templateValue:"instance"},a:"PrepStmtCacheMissCount",type:"weblogic.management.runtime.JDBCDataSourceRuntimeMBean",server:{templateValue:"server"}},color:"#CC3333",markerShape:"triangleUp",markerFill:true}]}}]]}}}},{path:"ServerChannelRuntimes",template:{templateForeach:"servers",filter:"byInstanceKey",key:"Name",body:{category:{templateValue:"server"},name:{templateFormatKey:"bview.chan.viewTitle",bundle:Z,args:["server","name"]},panels:[[{type:"chart",state:{name:{templateFormatKey:"bview.chan.chartTitle1",bundle:Z},type:"linePlot",units:"",background:{templateValue:"background"},color:{templateValue:"color"},highlight:{templateValue:"highlight"},autoScale:true,metrics:[{name:{templateFormatKey:"bview.chan.metricAccept",bundle:Z},metric:{on:{templateValue:"instance"},a:"AcceptCount",type:"weblogic.management.runtime.ServerChannelRuntimeMBean",server:{templateValue:"server"}},color:"#FFCC33",markerShape:"circle",markerFill:true}]}},{type:"chart",state:{name:{templateFormatKey:"bview.chan.chartTitle2",bundle:Z},type:"linePlot",units:"",background:{templateValue:"background"},color:{templateValue:"color"},highlight:{templateValue:"highlight"},autoScale:true,metrics:[{name:{templateFormatKey:"bview.chan.metricConnect",bundle:Z},metric:{on:{templateValue:"instance"},a:"ConnectionsCount",type:"weblogic.management.runtime.ServerChannelRuntimeMBean",server:{templateValue:"server"}},color:"#FFCC33",markerShape:"circle",markerFill:true}]}}],[{type:"chart",state:{name:{templateFormatKey:"bview.chan.chartTitle3",bundle:Z},type:"linePlot",units:{templateFormatKey:"bview.units.bytes",bundle:Z},background:{templateValue:"background"},color:{templateValue:"color"},highlight:{templateValue:"highlight"},autoScale:true,metrics:[{name:{templateFormatKey:"bview.chan.metricBRecv",bundle:Z},metric:{on:{templateValue:"instance"},a:"BytesReceivedCount",type:"weblogic.management.runtime.ServerChannelRuntimeMBean",server:{templateValue:"server"}},color:"#FFCC33",markerShape:"circle",markerFill:true},{name:{templateFormatKey:"bview.chan.metricBSent",bundle:Z},metric:{on:{templateValue:"instance"},a:"BytesSentCount",type:"weblogic.management.runtime.ServerChannelRuntimeMBean",server:{templateValue:"server"}},color:"#33CCFF",markerShape:"diamond",markerFill:true}]}},{type:"chart",state:{name:{templateFormatKey:"bview.chan.chartTitle4",bundle:Z},type:"linePlot",units:{templateFormatKey:"bview.units.messages",bundle:Z},background:{templateValue:"background"},color:{templateValue:"color"},highlight:{templateValue:"highlight"},autoScale:true,metrics:[{name:{templateFormatKey:"bview.chan.metricMRecv",bundle:Z},metric:{on:{templateValue:"instance"},a:"MessagesReceivedCount",type:"weblogic.management.runtime.ServerChannelRuntimeMBean",server:{templateValue:"server"}},color:"#FFCC33",markerShape:"circle",markerFill:true},{name:{templateFormatKey:"bview.chan.metricMSent",bundle:Z},metric:{on:{templateValue:"instance"},a:"MessagesSentCount",type:"weblogic.management.runtime.ServerChannelRuntimeMBean",server:{templateValue:"server"}},color:"#33CCFF",markerShape:"diamond",markerFill:true}]}}]]}}}];var B={"default":function(aP){var aQ=aP;if(typeof aP!="object"){aQ={};aQ[this.item]=aP}return aQ},flattenInstances:function(aP){return{server:aP.server,instance:aP.instances[0]}},instanceName:function(aS){var aP=f(aS);var aR=this.keys||["Name"];var aQ=[];aB.each(aR,function(aU,aT){aQ.push(aP.keys[aT])});return{instanceName:aQ.join(", "),instance:aS}},byInstanceKey:function(aQ){var aR=[];function aP(aU,aS,aT){aB.each(aU,function(aX,aV){var aW=f(aV);aR.push({server:aT,name:aW.keys[aS],instance:aV})})}aB.each(aQ[this.templateForeach],function(aS,aT){aP(aT.instances,this.key||"Name",aT.server)});return aR}};function am(aR,aS){var aP,aU,aQ,aT;if(aR===null){aP=aR}else{if(aB.isArray(aR)){aP=[];aB.each(aR,function(aV,aW){aP.push(am(aW,aS))})}else{if(typeof aR==="object"){if(aR.templateValue){aP=aS[aR.templateValue]}else{if(aR.templateFormatKey){aQ=[aR.bundle,aR.templateFormatKey];if(aR.args){aB.each(aR.args,function(aV,aW){aQ.push(aS[aW])});aP=mvc.format.apply(this,aQ)}else{aP=mvc.getMessage.apply(this,aQ)}}else{if(aR.templateForeach){aP=[];aT=aR.filter?B[aR.filter].call(aR,aS):aS[aR.templateForeach];aB.each(aT,function(aV,aX){var aY=B[aR.merge?aR.merge:"default"].call(aR,aX);aY.index=aV;var aW=aB.extend({},aS,aY);if(aR.body){aP.push(am(aR.body,aW))}else{if(aR.bodyItems){aP=aP.concat(am(aR.bodyItems,aW))}}})}else{aP={};aB.each(aR,function(aV,aW){aP[aV]=am(aW,aS)})}}}}else{aP=aR}}}return aP}var Q=null;function I(aQ){var aP=aQ;var aR="custom";if(aQ.indexOf("weblogic.")===0&&aQ.indexOf("weblogic.management.mbeanservers.")!==0){aP=aQ.substring(aQ.lastIndexOf(".")+1).replace(/(.)RuntimeMBean$/,"$1");aR="wls"}else{if(aQ.indexOf("sun.")===0||aQ.indexOf("com.sun.")===0){aP=aQ.substring(aQ.lastIndexOf(".")+1);aR="platform"}else{if(aQ.indexOf("javax.management")===0){aP=aQ.substring(aQ.lastIndexOf(".")+1);aR="jmx"}}}return{display:aP,category:aR}}function aq(aS,aP){var aT=aP;var aQ,aR,aU;if(aS=="wls"){aU=[];aQ=f(aP);aR=aQ.keys;aB.each(["Name","ApplicationRuntime","WseePortRuntime"],function(aW,aV){if(aR[aV]){aU.push(aR[aV])}});if(aU.length>0){aT=aU.join(", ")}}return aT}function U(aP){return aP.name+" ("+aP.type+")"}function aH(aR,aP){var aQ=aR.metric.name;if(aP){aQ+="@"+aq(I(aP.type).category,aP.instance.on)}return aQ}var G={custom:"metricTypeCust",wls:"metricTypeWLS",platform:"metricTypePlatform",jmx:"metricTypeJMX"};var a={custom:"mb.note.category.custom",wls:"mb.note.category.wls",platform:"mb.note.category.platform",jmx:"mb.note.category.jmx"};function K(){if(!Q){return null}var aQ=Q.harvestableTypes;var aP=aB("#mbTypesFL").filteredList("selection");if(aP===null||aP===""){return aP}return aQ[aP].type}function aN(){if(!Q){return null}var aT=Q.harvestableTypes;var aR=aB("#mbInstancesFL").filteredList("selection");if(aR===null){return null}var aQ=aR.indexOf("/");var aS=aR.substring(0,aQ)*1;var aU=aT[aS];var aP=aU.harvestableInstances[aR.substring(aQ+1)];return{instance:aP,type:aU.type,typeIndex:aS}}function A(){if(!Q){return null}var aT=Q.harvestableTypes;var aQ=aB("#mbMetricsFL").filteredList("selection");if(aQ===null){return null}var aP=aQ.indexOf("/");var aS=aQ.substring(0,aP)*1;var aU=aT[aS];var aR=aU.harvestableAttributes[aQ.substring(aP+1)];return{metric:aR,type:aU.type,typeIndex:aS}}function ar(aP,aR){if(aR===""){return}var aS=I(aR);var aQ=mvc.formatNoteContent(Z,[{label:a[aS.category],value:null},{label:"mb.note.type",value:aR}]);mvc.showNote(aQ,aP)}function d(aQ,aP){var aR=aP.instance;var aS=mvc.formatNoteContent(Z,[{label:"mb.note.objectname",value:aR.on.replace(/,/g,", ")},{label:"mb.note.harvested",value:mvc.getMessage("mvccore",aR.harvested?"field.true":"field.false")}]);mvc.showNote(aS,aQ)}var aI=null;function F(aR,aS){var aQ=aS.metric;var aP=aN();var aU=aQ.description||"";if(aQ.description===undefined){aw(Q.serverName,aS.typeIndex)}var aV=[{label:"mb.note.metric",value:aQ.name},{label:"mb.note.mbeanType",value:aS.type},{label:"mb.note.type",value:aQ.type},{label:"mb.note.harvested",value:mvc.getMessage("mvccore",aQ.harvested?"field.true":"field.false")},{label:"mb.note.description",value:aU,markup:true}];if(aP===null){aV.push({separator:true});aV.push({label:"mb.selectInstance",value:null})}var aT=mvc.formatNoteContent(Z,aV);aI=mvc.showNote(aT,aR)}function ay(aX){var a1,a5,aS,aU;var aR,a4,a6,aY,aV;var a3,a2;var aZ=[];var aQ=[];var aT=[];var aP=aB("#mbHarvestedOnly").get(0).checked;var a0=aP?false:aB("#mbAllTypes").get(0).checked;a1=Q.harvestableTypes;for(a5=0;a5<a1.length;a5++){aS=a1[a5];if(!aX||aX==aS.type){aU=I(aS.type);aR=aS.harvestableInstances;a3=aS.harvestableAttributes;if(a0||(a3.length>0&&aR.length>0)){aV=0;for(a4=0;a4<aR.length;a4++){a6=aR[a4];if(aP&&!a6.harvested){continue}aV+=1;aQ.push({l:aq(aU.category,a6.on),v:a5+"/"+a4})}for(a4=0;a4<a3.length;a4++){a2=a3[a4];if(aP&&!a2.harvested){continue}aV+=1;aY=U(a2);aT.push({l:aY,v:a5+"/"+a4})}if(aV>0){aZ.push({l:aU.display,v:a5,icon:G[aU.category],numInstances:aR.length})}}}}function aW(a9,a8){var a7=a9.l,ba=a8.l;return a7>ba?1:a7<ba?-1:0}if(!aX&&aX!==""){aZ.sort(aW);aZ.unshift({l:mvc.getMessage(Z,"mb.typeNone"),v:""})}aQ.sort(aW);aT.sort(aW);mvc.hideNote();if(!aX&&aX!==""){aB("#mbTypesFL").filteredList("update",aZ)}aB("#mbInstancesFL").filteredList("update",aQ);aB("#mbMetricsFL").filteredList("option","enableDrag",false).filteredList("update",aT)}function aw(aU,aR){var aS=Q.harvestableTypes[aR];var aT=aN();var aP=aT?aT.instance.on:aS.harvestableInstances.length>0?aS.harvestableInstances[0].on:null;var aQ=mvc.uriTemplate("data/diagnostics/MBeanMetaData?serverName={server}&mbeanType={type}{-prefix|&instanceName=|on}");if(!J){return}mvc.ajax("GET",aQ.expand({server:aU,type:aS.type,on:aP}),function(aW){var aY,a0,aZ,aX;var aV;if(Q&&Q.serverName==aU){a0=aW?aW.body:{};aZ=aS.harvestableAttributes;for(aY=0;aY<aZ.length;aY++){aX=aZ[aY];aX.description=a0[aX.name]||mvc.getMessage(Z,"mb.note.description.unavailable")}if(aI==mvc.getCurrentNote()){aV=aB("#mbMetricsFL").find(".select");aX=A();if(aX){F(aV,aX)}}}})}function ah(aQ){var aP=mvc.uriTemplate("data/servers/{server}/diagnostics/metriclist");aB("#mbTypesFL").filteredList("update",[]);aB("#mbInstancesFL").filteredList("update",[]);aB("#mbMetricsFL").filteredList("update",[]);Q=null;if(!J){O(function(){ah(aQ)});return}mvc.ajax("GET",aP.expand({server:aQ}),function(aR){if(aR){Q=aR.body;ay()}})}function N(){if(!J){O(N);return}mvc.ajax("GET","data/diagnostics/runningServers",function(aP){var aV=[],aU,aS,aT;var aQ=aB("#mbServers");var aR=mvc.htmlBuilder();if(aP){aV=aP.body.servers}aT=aQ.val();for(aS=0;aS<aV.length;aS++){aU=aV[aS];aR.markup("<option value='").attr(aU).markup("'").optionalBoolAttr("selected",aU===aT).markup(">");aR.content(aU).markup("</option>")}aQ.html(aR.toString());if(aQ.val()!==aT){ah(aQ.val())}})}var V={icon:"",value:function(aP){return aP.v},renderLabel:function(aQ,aS){var aR=this.icon||aS.icon;var aP="label";mvc.renderIcon(aQ,aR);if(aS.numInstances===0){aP+=" dim"}aQ.markup("<span class='").attr(aP).markup("'>").content(aS.l).markup("</span>")}};function aF(aP){var aQ=Object.create(V);aQ.icon=aP;return aQ}function q(){var aP=K();ay(aP===null?"":aP)}function at(){var aR=aB("#mbInstancesFL").filteredList("selection");var aP=aN();var aQ=K();if(aP&&aP.type!=aQ){aB("#mbTypesFL").filteredList("select",aP.typeIndex);aB("#mbInstancesFL").filteredList("select",aR)}aB("#mbMetricsFL").filteredList("option","enableDrag",aP!==null)}function i(){var aS=aB("#mbMetricsFL").filteredList("selection");var aQ=A();var aP=aN();var aR=K();if(aQ&&aQ.type!=aR){aB("#mbTypesFL").filteredList("select",aQ.typeIndex);aB("#mbMetricsFL").filteredList("select",aS)}}function ak(){var aP=aN();var aR=A();var aS=Q.serverName;var aQ;if(aR!==null&&aP!==null){aQ=aH(aR,aP);return{name:aQ,metric:{on:aP.instance.on,a:aR.metric.name,type:aP.type,server:aS}}}return null}function aa(){var aP=aN();var aQ=A();return aQ!==null&&aP!==null}function ad(aQ,aT,aS){var aU=0;var aR=aQ.length;var aP,aV;while(aR-aU>0){aP=aU+Math.floor((aR-aU)/2);aV=aS(aT,aQ[aP]);if(aV===0){return aP}else{if(aV<0){aR=aP}else{aU=aP+1}}}return -(aU+1)}function m(aR,aP){var aQ=aR.getName();var aS=aP.getName();if(aQ===aS){return 0}else{if(aQ<aS){return -1}}return 1}function L(aQ,aP){var aR=aP.getName();if(aQ===aR){return 0}else{if(aQ<aR){return -1}}return 1}var W={insertChild:function(aQ){var aR=this.children;var aP=ad(aR,aQ,m);if(aP>=0){return -1}aP=-aP-1;aQ.parent=this;if(aP>=aR.length){aR.push(aQ)}else{aR.splice(aP,0,aQ)}return aP},getChildCount:function(){return this.children.length},getChild:function(aP){return this.children[aP]},removeAllChildren:function(){this.children=[]},removeChild:function(aP){var aR=this.children;var aQ=aR[aP];aQ.parent=null;aR.splice(aP,1);return aQ},removeChildByName:function(aP){var aR=this.children;var aQ=ad(aR,aP,L);if(aQ>=0){return this.removeChild(aQ)}return null},findChildByName:function(aP){var aR=this.children;var aQ=ad(aR,aP,L);if(aQ>=0){return aR[aQ]}return null}};function ag(aP){var aQ=Object.create(W);aQ.children=[];aQ.name=aP;aQ.parent=null;aQ.getName=function(){return this.name};return aQ}function S(aP){var aQ={view:aP};aQ.parent=null;aQ.getName=function(){return this.view.name};return aQ}function ac(aP){var aQ;aP.activeState=!!v[aP.id];aQ=ap.insertChild(S(aP));if(aQ<0){mvc.logError("Duplicate view name: "+aP.name)}return}function x(){var aP=aB("#viewTree").treeView("selectionNodes");if(aP&&aP.length>0&&aP[0].view){return aP[0].view}return null}function r(){var aQ=aB("#viewTree").treeView("selection");var aP=aB("#viewTree").treeView("getNodes",aQ);if(aP.length>0&&aP[0].view){return{node:aP[0],view:aP[0].view,uiNode:aQ.eq(0)}}return null}function aL(aP,aR){var aQ;var aS={};if(!aP){aP=ax}if(!aP){return}if(aP.fromTemplate){return}aQ="view_"+aP.id;aS[aQ]=JSON.stringify(aP);e(aS,aR)}var aA=null;var b=null;function af(){var aP=ax;if(aA===null){b=aP;aA=setTimeout(function(){b=null;aA=null;aL(aP)},p)}else{if(aP!=b){clearTimeout(aA);aA=null;aL(b);b=null;af();return}}}function aO(){return""+Math.random().toFixed(10).substring(2)+"-"+(new Date()).getTime()}function t(aS){var aQ=aS;var aV=0;var aR,aT,aP,aU;do{aV+=1;aR=false;aP=ap.getChildCount();for(aT=0;aT<aP;aT++){aU=ap.getChild(aT);if(aU.view.name==aQ){aR=true;aQ=aS+" "+aV;break}}}while(aR);return aQ}var aG={root:function(){return w},getName:function(aP){return aP.getName()},child:function(aQ,aP){return aQ.getChild(aP)},childCount:function(aP){return aP.getChildCount()},hasChildren:function(aP){return aP.getChildCount&&aP.getChildCount()>0},renderIcon:function(aR,aP){var aQ;if(aR.view){aQ=v[aR.view.id]?"viewListActive":"viewListInactive"}else{aQ=aR.categoryType&&aR.categoryType=="server"?"viewListServer":"viewListFolder"}if(aQ){mvc.renderIcon(aP,aQ)}},renderLabel:function(aQ,aP){aP.markup("<span title='").attr(aQ.getName()).markup("'>").content(aQ.getName()).markup("</span>")},addNode:function(aV,aS,aT,aU){var aP=aT?aT:{name:aS,id:aO(),panels:[]};aP.name=aS;var aW=S(aP);var aR=aV.insertChild(aW);var aQ;if(aR<0){aQ=mvc.htmlBuilder();aQ.markup("<p>").content(mvc.getMessage(Z,"viewlist.msg.dupView")).markup("</p>");mvc.doMessageDialog(mvc.getMessage(Z,"viewlist.msg.dupView.title"),aQ.toString(),function(){aU(false,-1)});return}aL(aP,function(aX){if(!aX){aV.removeChild(aR);aU(null,-1)}else{aU(aW,aR)}})},allowRename:function(aP){return(aP.view&&!aP.view.fromTemplate)},allowDelete:function(aP){return(aP.view&&!aP.view.fromTemplate)},renameNode:function(aW,aQ,aU){var aP,aT,aS,aR;var aV=aW.parent;if(!aV){aU(null,-1);return}if(aV.findChildByName(aQ)!==null){aS=mvc.htmlBuilder();aS.markup("<p>").content(mvc.getMessage(Z,"viewlist.msg.dupViewRename")).markup("</p>");mvc.doMessageDialog(mvc.getMessage(Z,"viewlist.msg.dupView.title"),aS.toString(),function(){aU(false,-1)});return}aW=aV.removeChildByName(aW.getName());aP=aW.view;if(!aW||!aP){aU(null,-1);return}aT=aP.name;aP.name=aQ;aR=aV.insertChild(aW);aL(aP,function(aX){if(!aX){aP.name=aT;aV.insertChild(aW);aU(null,-1)}else{ax=null;aU(aW,aR)}})},deleteNode:function(aQ,aP){ai(aQ,aP)}};function aE(){az=ag(mvc.getMessage(Z,"viewlist.node.builtin"));ap=ag(mvc.getMessage(Z,"viewlist.node.custom"));w=ag("<root>");w.insertChild(az);w.insertChild(ap)}function D(aP){var aR=az;var aQ;if(aP.category){aR=az.findChildByName(aP.category);if(!aR){aQ=az.insertChild(ag(aP.category));aR=az.getChild(aQ);aR.categoryType="server"}}aP.activeState=!!v[aP.id];aQ=aR.insertChild(S(aP));if(aQ<0){mvc.logError("Duplicate built-in view name: "+aP.name)}}function aJ(){var aP=[];aB.each(k,function(aQ,aR){aP.push(aR.path)});mvc.ajax("GET","data/diagnostics/instances",function(a1){var aZ,a0,aT,aS,aW,aX,aY,aV,aR;var aQ=null;var aU={background:R,color:ae,highlight:T,servers:null};if(a1){aZ={};aB.each(a1.body.paths,function(a2,a3){aZ[a3.path]=a3});aW=k;aR=0;for(aT=0;aT<aW.length;aT++){aX=aW[aT];a0=aZ[aX.path];if(!a0){continue}aU.servers=a0.servers;aY=am(aX.template,aU);for(aS=0;aS<aY.length;aS++){aV=aY[aS];aR+=1;aV.id="builtin-"+aR;aV.fromTemplate=true;D(aV)}}aB("#viewTree").treeView({showRoot:false,expandRoot:false,nodeAdapter:aG});if(av.lastViewId){aQ=aB("#viewTree").treeView("find",null,function(a2){return !!(a2.view&&a2.view.id==av.lastViewId)},10)}if(!aQ||aQ.length===0){aQ=aB("#viewTree").treeView("find",null,function(a2){return !!a2.view},2)}if(aQ&&aQ.length>0){aB("#viewTree").treeView("selectNode",aQ)}}},{paths:aP})}function ao(){var aQ=aB("#viewTree").treeView("find",null,function(aR){return aR===ap});var aP=t(mvc.getMessage(Z,"viewlist.newViewName"));aB("#viewTree").treeView("addNode",aQ,aP)}function h(){var aQ=aB("#viewTree").treeView("find",null,function(aS){return aS===ap});var aP=x();if(!aP){return}var aR=aB.extend(true,{},aP);aR.name=t(aP.name);delete aR.fromTemplate;aR.activeState=false;aR.id=aO();aB("#viewTree").treeView("addNode",aQ,aR.name,aR)}function ai(aU,aR){var aT,aP,aQ,aS;if(aU){aP=aU.view;if(!aP){return}aS=aU}else{aQ=r();if(!aQ){return}aP=aQ.view;aS=aQ.node}s();aT={preferences:["view_"+aP.id]};mvc.ajax("MULTI_DELETE","data/preferences/current/dashboard",function(aV){var aW;if(aV){aW=aS.parent;aW.removeChildByName(aS.getName());ax=null;u=null;av.lastViewId=null;aj();aB("#viewArea").dashboardView("destroy");if(aR){aR(true)}else{aB("#viewTree").treeView("deleteNode",aQ.uiNode)}}else{if(aR){aR(false)}}},aT)}function Y(){var aP;var aQ=r();if(!aQ){return}aP=aQ.view;aB("#viewTree").treeView("renameNode",aQ.uiNode)}function c(){var aQ=r();var aP;if(!aQ){return}aP=aQ.view;if(!aP||aP==ax){return}ax=aP;u=aQ.uiNode;aB("#viewArea").dashboardView("destroy");aB("#viewArea").dashboardView({state:aP,dropAccept:".browserMetric, .chartMetric",getViews:function(){var aR=[];function aS(aW,aV){var aU,aT;aV(aW);if(aW.getChildCount){aT=aW.getChildCount();for(aU=0;aU<aT;aU++){aS(aW.getChild(aU),aV)}}}aS(ap,function(aU){var aT=aU.view;if(aT){aR.push({name:aT.name,value:aT.id})}});aR.sort(function(aV,aU){var aT=aV.name,aW=aU.name;return aT>aW?1:aT<aW?-1:0});return aR},addPanelToView:function(aU,aS,aX){var aT,aV,aW,aR,aY;aR=ap.getChildCount();for(aW=0;aW<aR;aW++){aY=ap.getChild(aW);if(aY.view.id==aS){aT=aY.view;break}}if(aT){aV=aT.panels;aV.push([aU]);aL(aT,function(aZ){aX(aZ!==null)})}else{mvc.logError("Move/copy panel to view could not find view");aX(false)}},adapter:{newPanelState:function(aS,aR){if(aS=="chart"){return{name:aR,type:an.defaultChartType,background:R,color:ae,highlight:T,units:"",timeRange:"current",metrics:[]}}return null},getName:function(aR){return aR.name},setName:function(aS,aR){aS.name=aR},initPanel:function(aS,aT,aU,aR){if(aT=="chart"){aS.chart({dropAccept:".browserMetric",getNewMetric:ak,hasNewMetric:aa,getPanels:aR.getPanels,getPanel:aR.getPanel,getActiveView:aR.getActiveView,restrictChanges:aP.fromTemplate===true,state:aU})}},updatePanel:function(aR,aS,aT){if(aS=="chart"){aR.chart("update")}}}});aj();av.lastViewId=aP.id;ab()}function X(){var aP=ax;if(!v[aP.id]){aB("#viewArea").dashboardView("start");u.children(".icon").removeClass("viewListInactive").addClass("viewListActive");v[aP.id]=aP;o+=1}aj()}function s(){var aP=ax;if(v[aP.id]){aB("#viewArea").dashboardView("stop");u.children(".icon").removeClass("viewListActive").addClass("viewListInactive");delete v[aP.id];o-=1}aj()}function aC(){s();var aP=aB("#viewTree .viewListActive");aP.removeClass("viewListActive").addClass("viewListInactive");aB.each(v,function(aS,aR){var aW,aV,aT;var aU,aX,aQ;aW=aR.panels;for(aU=0;aU<aW.length;aU++){aV=aW[aU];for(aX=0;aX<aV.length;aX++){aT=aV[aX].state.metrics;for(aQ=0;aQ<aT.length;aQ++){wldfDM.unregister(aT[aQ].metric,aR.id)}}}aR.activeState=false});v={};o=0;aj()}function aj(){var aS=aB("#viewListMenu");var aR=x();var aQ=ax;var aU=(aR!==null);var aV=!!(aU&&!aR.fromTemplate);var aT=!!(aQ!==null&&v[aQ.id]===undefined);var aP=!!(aQ!==null&&v[aQ.id]!==undefined);aB.each([{id:"cloneView",sel:"#tbViewClone",d:!aU},{id:"deleteView",sel:"#tbViewDelete",d:!aV},{id:"renameView",sel:null,d:!aV},{id:"start",sel:"#tbMainStart",d:!aT},{id:"stop",sel:"#tbMainStop",d:!aP},{id:"stopAll",sel:"#tbMainStopAll",d:o===0}],function(aW,aY){var aX=aS.menu("find",aY.id);if(aX){aX.disabled=aY.d}if(aY.sel){aB(aY.sel).toggleClass("disabled",aY.d).each(function(){this.disabled=aY.d})}})}function al(){aB("#stamps .stampPoller span").removeClass("pollerInactive").addClass("pollerActive").attr("title",mvc.getMessage(Z,"main.poller.active"))}function l(){aB("#stamps .stampPoller span").removeClass("pollerActive").addClass("pollerInactive").attr("title",mvc.getMessage(Z,"main.poller.inactive"))}wls.console.pageHelpURL=null;wls.console.pageHelpKey="clientdashboardpagetitle";function M(){var aQ=aB("#explorerTabs");var aS=aB("#metricBrowser");var aR=aQ.innerHeight()-parseInt(aS.css("paddingTop"),10)-parseInt(aS.css("paddingBottom"),10)-aQ.find("ul:first").outerHeight();var aP=aQ.innerWidth()-parseInt(aS.css("paddingRight"),10)-parseInt(aS.css("paddingLeft"),10);aR-=aS.find(".filteredList").offset().top-aS.offset().top;aS.find("div:not(.filteredList) select").each(function(){aB(this).width(aP-16-aS.find("#mbGo").outerWidth())});aS.find(".filteredList").css({width:aP-6,height:(aR/3)-6}).filteredList("resize")}function y(){var aP=aB("#explorerTabs");var aR=aB("#viewList");var aQ=aP.innerHeight()-parseInt(aR.css("paddingTop"),10)-parseInt(aR.css("paddingBottom"),10)-aP.find("ul:first").outerHeight();aQ-=aR.find(".ui-toolbar").outerHeight();aR.find("#viewTree").height(aQ-4)}function C(aR,aQ){var aP=document.documentElement.clientWidth-7;if(!aQ){aP=aP-aR;aB("#explorer").show().width(aR);if(aB("#metricBrowser").css("display")!="none"){M()}else{if(aB("#viewList").css("display")!="none"){y()}}}else{aB("#explorer").hide()}aB("#content").width(aP);aB("#viewArea").dashboardView("resize")}function aM(){var aP;var aQ=document.documentElement.clientHeight;aQ-=aB("#hd").outerHeight();aQ-=aB("#mainMenuBar").outerHeight();aB("#mainContent").height(aQ);aB("#explorer, #content, #mainContent > .splitterH").height(aQ);aB("#viewArea").height(aQ-1);aP=aB("#explorerTabs");aB.each(["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],function(aS,aT){var aR=parseInt(aP.css(aT),10);if(!isNaN(aR)){aQ-=aR}});aP.height(aQ-1);C(aB("#explorer").width(),!aB("#explorer").is(":visible"))}aB(document).ready(function(){var aS=mvc.htmlBuilder();mvc.ajaxOptions({processing:function(aT){aB("#pageStatus").toggleClass("busy",aT);aB("body").css("cursor",aT?"wait":"auto")},sessionExpired:function(){J=false;aB("#user").text("");aB("#domain").text("");var aT=mvc.htmlBuilder();aT.markup("<p>").content(mvc.getMessage(Z,"message.status.expiredSession")).markup("</p>");aT.markup("<p><a href='#' onclick='window.location.reload();'>").content(mvc.getMessage(Z,"main.login.link")).markup("</a></p>");mvc.doMessageDialog(mvc.getMessage(Z,"main.sessionExpired.title"),aT.toString())}});var aQ=[Z,"mvccore"];document.title=mvc.getMessage(aQ,"dashboard.title");aB(".label.dol10n, label.dol10n").each(function(){var aT=aB(this).html();var aV=aB(this).attr("for");var aU="";var aW;if(aV){aU=aB("#"+aV).attr("type")}aW=(aU=="checkbox"||aU=="radio")?"":":";aB(this).html(mvc.getMessage(aQ,aT)+aW).removeClass("dol10n");aT=aB(this).attr("title");if(aT){aB(this).attr("title",mvc.getMessage(aQ,aT))}});aB("a.dol10n, span.dol10n, button.dol10n").each(function(){var aT=aB(this).html();if(aT&&aT.indexOf("<")==-1){aB(this).html(mvc.getMessage(aQ,aT)).removeClass("dol10n")}aT=aB(this).attr("title");if(aT){aB(this).attr("title",mvc.getMessage(aQ,aT)).removeClass("dol10n")}});aB("input.dol10n").each(function(){var aT=aB(this).attr("title");aB(this).attr("title",mvc.getMessage(aQ,aT)).removeClass("dol10n")});aB("p.dol10n, option.dol10n, legend.dol10n").each(function(){var aT=aB(this).html();aB(this).html(mvc.getMessage(aQ,aT)).removeClass("dol10n")});aB("img.dol10n").each(function(){var aT=aB(this).attr("alt");aB(this).attr("alt",mvc.getMessage(aQ,aT)+" ").removeClass("dol10n");aT=aB(this).attr("title");if(aT){aB(this).attr("title",mvc.getMessage(aQ,aT)+" ").removeClass("dol10n")}});aB("#pageStatus").removeClass("busy");aB("#logoutLink").attr("href",mvc.getContextRoot()+"/jsp/common/warnuserlockheld.jsp");aS.clear();mvc.renderButton(aS,{id:"tbMainStart",icon:"start",nb:true,tooltip:mvc.getMessage(Z,"main.start")});mvc.renderButton(aS,{id:"tbMainStop",icon:"stop",nb:true,tooltip:mvc.getMessage(Z,"main.stop")});mvc.renderButton(aS,{id:"tbMainStopAll",icon:"stopAll",nb:true,tooltip:mvc.getMessage(Z,"main.stopAll")});mvc.renderButton(aS,{id:"tbMainMenu",icon:"menu",nb:true,tooltip:mvc.getMessage(Z,"main.menu")});aB("#mainMenuBar .ui-toolbar").html(aS.toString());O();aB("#tbMainStart").click(function(){X()});aB("#tbMainStop").click(function(){s()});aB("#tbMainStopAll").click(function(){aC()});aB("#tbMainMenu").click(function(){var aT=aB("#mainMenu");aT.menu("toggle",aB(this))});var aR={menubar:false,items:[{id:"clear",type:"action",label:mvc.getMessage(Z,"main.menu.clearData"),action:function(){wldfDM.clear()}},{id:"reset",type:"action",label:mvc.getMessage(Z,"main.menu.resetStats"),action:function(){wldfDM.resetStats()}}]};aB("#mainMenu").menu(aR);aB("#explorerTabs").tabs({show:function(aU,aT){if(aT.panel.id=="metricBrowser"){M();N()}else{if(aT.panel.id=="viewList"){y()}}}}).show();aS.clear();mvc.renderButton(aS,{id:"tbViewNew",icon:"new",nb:true,tooltip:mvc.getMessage(Z,"viewlist.menu.new")});mvc.renderButton(aS,{id:"tbViewClone",icon:"clone",nb:true,tooltip:mvc.getMessage(Z,"viewlist.menu.clone")});mvc.renderButton(aS,{id:"tbViewDelete",icon:"delete",nb:true,tooltip:mvc.getMessage(Z,"viewlist.menu.delete")});mvc.renderButton(aS,{id:"tbViewMenu",icon:"menu",nb:true,tooltip:mvc.getMessage(Z,"viewlist.menu")});aB("#viewList .ui-toolbar").html(aS.toString());aB("#tbViewNew").click(function(){ao()});aB("#tbViewClone").click(function(){h()});aB("#tbViewDelete").click(function(){ai()});aB("#tbViewMenu").click(function(){var aT=aB("#viewListMenu");aj();aT.menu("toggle",aB(this))});var aP={menubar:false,items:[{id:"newView",type:"action",label:mvc.getMessage(Z,"viewlist.menu.new"),icon:"new",action:function(){ao();return true}},{id:"cloneView",type:"action",label:mvc.getMessage(Z,"viewlist.menu.clone"),icon:"clone",action:function(){h();return true}},{id:"deleteView",type:"action",label:mvc.getMessage(Z,"viewlist.menu.delete"),icon:"delete",action:function(){ai()}},{id:"renameView",type:"action",label:mvc.getMessage(Z,"viewlist.menu.rename"),action:function(){Y();return true}},{type:"separator"},{type:"action",label:mvc.getMessage(Z,"viewlist.menu.refresh"),action:function(){au()}}]};aB("#viewListMenu").menu(aP);aE();aB("#viewTree").bind("treeViewchange",function(){aj();c()});aB("#mbTypesFL").filteredList({itemAdapter:aF(),label:mvc.getMessage(Z,"mb.types"),filterOnTitle:false}).bind("filteredListchange",q);aB("#mbInstancesFL").filteredList({itemAdapter:aF("metricInstance"),label:mvc.getMessage(Z,"mb.instances"),filterOnTitle:false}).bind("filteredListchange",at);aB("#mbMetricsFL").filteredList({itemAdapter:aF("metricAttr"),itemLabel:"browserMetric",label:mvc.getMessage(Z,"mb.metrics"),filterOnTitle:false,enableDrag:false,draggable:{addClasses:false,cursor:"default",opacity:0.8,distance:5,revert:"invalid",appendTo:"#mainContent",containment:"#mainContent",zIndex:950,helper:function(){var aW=A();var aT=aN();var aV=mvc.htmlBuilder();var aU=aH(aW,aT);aV.markup("<div class='dragMetric'>").content(aU).markup("</div>");return aB(aV.toString())}}}).bind("filteredListchange",i);mvc.bindFocus(aB("#mbTypesFL").get(0),function(aV){var aT=aB(aV.target).closest(".select");var aU=K();if(aU!==null){ar(aT,aU)}});mvc.bindBlur(aB("#mbTypesFL").get(0),function(aT){mvc.hideNote()});mvc.bindFocus(aB("#mbInstancesFL").get(0),function(aV){var aU=aB(aV.target).closest(".select");var aT=aN();if(aT){d(aU,aT)}});mvc.bindBlur(aB("#mbInstancesFL").get(0),function(aT){mvc.hideNote()});mvc.bindFocus(aB("#mbMetricsFL").get(0),function(aV){var aT=aB(aV.target).closest(".select");var aU=A();if(aU){F(aT,aU)}});mvc.bindBlur(aB("#mbMetricsFL").get(0),function(aT){mvc.hideNote()});aB("#mbHarvestedOnly").click(function(){var aT=aB(this).get(0).checked;aB("#mbAllTypes").get(0).disabled=aT;ay()});aB("#mbAllTypes").click(function(){ay()});aB("#mbServers").keypress(function(aT){if(aT.keyCode==H){aB("#mbGo").click()}});aB("#mbGo").click(function(){var aT=aB("#mbServers").val();if(aT){ah(aT)}});mvc.initIcons();mvc.bindResize(aM);aM();aB("#global-links a:eq(0)").click(function(){var aV=aB("#preferencesDialog");var aT=mvc.formHelper(aK,{formContext:aV});var aU=an.showOverview;mvc.doModalDialog(aV,{title:mvc.getMessage(Z,"main.preferences.title"),formHelper:aT,formData:an,ok:function(){n(true);if(aU!=an.showOverview){aB("#viewArea .chart").chart("updateOverviewState")}},focusElemAfter:this});return false});aB("#global-links a:eq(1)").click(function(){return wls.console.launchHelp()});mvc.splitter({orientation:"horizontal",edge:"left",after:"#explorer",closed:false,collapseText:mvc.getMessage("mvccore","button.collapsePane.label"),restoreText:mvc.getMessage("mvccore","button.restorePane.label"),change:function(aU,aT){C(aU,aT);if(!aT){av.splitterWidth=aU}av.splitterClosed=aT;ab()}});au();aB("#viewArea").bind("chartstatechange",function(aT){af()}).bind("dashboardViewstatechange",function(aT){af()});l();wldfDM.bind(function(aT){if(aT=="start"){al()}else{if(aT=="stop"){l()}else{if(aT=="newData"){if(aB("#viewArea").dashboardView("isActive")){aB("#viewArea").dashboardView("update")}}else{if(aT=="harvestedData"){aB("#viewArea").dashboardView("update")}}}}});window.onbeforeunload=function(){if(wldfDM.hasData()){return mvc.getMessage(Z,"main.unsavedchanges")}}})})(jQuery);