/*
  UI widget for Tree view
  Copyright (c) 2010 Oracle and/or its affiliates. All rights reserved.
*/
(function(h){var e=37,a=38,w=39,o=40,y=36,c=35,b=33,j=34,t=14,B=13,z=27,m=46,s=113;var f="treeView";var k="change";var r="lastFocused";var n="span.nodelabel",q="span.treeItem",i="selected",u=".treeItem.selected",l="focused",g="expandable",d="collapsable",p="processing",A="leaf";function x(C){var D=C.get(0).id;return D.substring(D.lastIndexOf("_")+1)}function v(D,C,E){if(E.renderIcon){E.renderIcon(D,C)}C.markup("<span class='nodelabel' tabIndex='-1'>");E.renderLabel(D,C);C.markup("</span>")}h.widget("ui.treeView",{_init:function(){var D=this;var F=this.element;var I=this.options;var H=I.nodeAdapter;var E=mvc.htmlBuilder();var C,G,J;I.treeMap={};I.nextNodeId=0;if(I.collapsibleRoot===false){I.expandRoot=true}E.markup("<div class='treeContainer' style='position:relative;overflow:auto;height:100%;'><ul>");C=H.root();if(I.showRoot){this._renderNode(C,E)}else{if(H.hasChildren(C)){this._renderChildren(C,E)}}E.markup("</ul></div>");F.html(E.toString()).addClass(f);if(I.expandRoot){J=F.find("ul:first li:first");if(J.length>0){this._expandNode(J)}}F.bind("click.treeView",function(O){var K=h(O.target);var N,L,M;if(K.is(".hitarea")){N=K.parent();if(N.hasClass(g)){D._expandNode(N)}else{D._collapseNode(N)}return false}else{L=K.closest(q);if(L.length>0){D.selectNode(L,false);return false}}}).bind("keydown.treeView",function(P){var M=P.keyCode;var K,L,N,O,Q;if(P.altKey||P.target.nodeName=="INPUT"){return}if(P.keyCode==b||P.keyCode==j){N=F.find(".nodelabel:visible:first").outerHeight()||24;Q=F.find("li:visible:first");N+=parseInt(Q.css("margin-top"),10)+parseInt(Q.css("margin-bottom"),10);O=Math.floor(F.find(".treeContainer").get(0).clientHeight/N)-1}if(M==y){F.find(".treeItem:visible:first").each(function(){D.selectNode(h(this),true,true)});return false}else{if(M==c){F.find(".treeItem:visible:last").each(function(){D.selectNode(h(this),true,true)});return false}else{if(M==o){D._traverseDown(1);return false}else{if(M==a){D._traverseUp(1);return false}else{if(M==j){D._traverseDown(O);return false}else{if(M==b){D._traverseUp(O);return false}else{if(M==e){L=D._getData(r);if(L){K=h(L).parent().parent();if(K.hasClass(d)){D._collapseNode(K)}else{K.parent().prev(q).each(function(){D.selectNode(h(this),true,true)})}}return false}else{if(M==w){L=D._getData(r);if(L){K=h(L).parent().parent();if(K.hasClass(g)){D._expandNode(K)}else{if(K.hasClass(d)){K.find("ul:first li:first .treeItem").each(function(){D.selectNode(h(this),true,true)})}}}return false}else{if(M==s){L=D._getData(r);if(L){D._rename(h(L).parent())}}else{if(M==m){L=D._getData(r);if(L){D._delete(h(L).parent())}}}}}}}}}}}});G=F.find("ul:first").get(0);mvc.bindFocus(G,function(L){var K=h(L.target).closest(n);if(K.length===0){return}K.addClass(l);D._setFocusable(K)});mvc.bindBlur(G,function(L){var K=h(L.target).closest(n);K.removeClass(l)});D._setData(r,null);F.find("ul:first .nodelabel:visible:first").each(function(){this.tabIndex=0;D._setData(r,this)})},selectNode:function(D,K,G){var I=this.element;var J=this;var E=this.options;var C=I.find(u);var H,F;if(C.length>0){C.removeClass(i)}D.addClass(i);H=D.parent().parents("li:first");while(H.length>0&&H.hasClass("expandable")){this._expandNode(H);H=H.parents("li:first")}F=D.find(n);if(K){mvc.setFocus(F.get(0),0)}else{this._setFocusable(F)}if(C.get(0)!==D.get(0)){if(E.triggerTimerId){clearTimeout(E.triggerTimerId);E.triggerTimerId=null}E.triggerTimerId=setTimeout(function(){E.triggerTimerId=null;J._trigger(k,0)},G?350:1)}},selection:function(){var C=this.element;return C.find(u)},getNodes:function(F){var D=this.element;var E=this.options;var C=[];F.each(function(){C.push(E.treeMap[x(h(this).closest("li"))])});return C},selectionNodes:function(){return this.getNodes(this.selection())},find:function(C,I,H){var L=this;var K=this.element;var E=this.options;var J,F;var D=null;var G;H=H||1;if(!C&&!E.showRoot){J=K.find("ul:first > li")}else{F=C?C.parent():K.find("ul:first > li");this._addChildrenIfNeeded(F);J=F.find("ul:first > li")}J.each(function(M){G=E.treeMap[x(h(this))];if(I(G)){D=h(this).children(q);return false}});if(D===null&&H>1){J.each(function(M){D=L.find(h(this).children(q),I,H-1);if(D!==null){return false}})}return D},addNode:function(S,T,D){var N=this;var O=this.element;var P=this.options;var G=(O.get(0).id||"")+"_";var Q=G+"new";var H=P.nodeAdapter;var K,C,I,L;var R=false;var E=N._getData(r);function F(){C.remove();N._makeLeafIfNeeded(S);mvc.setFocus(E,0)}function M(U){if(R){return}R=true;H.addNode(I,U,D,function(Y,X){var V,W;if(Y===false){R=false;L=C.find("input").val(T).get(0);mvc.setFocus(L,0);L.select();return}if(Y){C.remove();W=mvc.htmlBuilder();N._renderNode(Y,W);if(X>=K.children("li").length){K.append(W.toString())}else{K.children("li").eq(X).before(W.toString())}V=K.children("li").eq(X);N.selectNode(V.children(q),true)}else{F()}})}function J(){K.append("<li><span id='"+Q+"' class='treeItem'><span class='nodelabel'><input type='text'></span></span></li>");C=K.find("#"+Q).parent();L=C.find("input").val(T).keydown(function(U){if(U.keyCode==t||U.keyCode==B){M(h(this).val());return false}else{if(U.keyCode==z){setTimeout(function(){F()},10);return false}}}).blur(function(U){M(h(this).val())}).get(0);mvc.setFocus(L,0);L.select()}if(S===null){I=H.root();if(P.showRoot){S=O.find("ul:first > li")}else{K=O.find("ul:first");J();return}}else{I=P.treeMap[x(S.parent())]}N._makeParentIfNeeded(S);this._expandNode(S.parent(),function(){K=S.next("ul");J()})},renameNode:function(E){var P=this;var N=this.element;var G=this.options;var I=G.nodeAdapter;var J,M,D;var F=E.parent();var H=x(F);var L=false;var K=mvc.htmlBuilder();function O(){K.clear();v(J,K,I);E.html(K.toString());P.selectNode(E,true)}function C(Q){if(L){return}L=true;if(Q==D){O();return}I.renameNode(J,Q,function(U,T){var V;var S,R;if(U===false){L=false;M=E.find("input").val(D).get(0);mvc.setFocus(M,0);M.select();return}if(U){K.clear();v(U,K,I);E.html(K.toString());G.treeMap[H]=U;S=F.parent();R=S.children("li");V=R.index(F);if(V!=T){if(T>V){T+=1}if(T>=R.length){S.append(F)}else{R.eq(T).before(F)}}P.selectNode(E,true);P._trigger(k,0)}else{O()}})}J=G.treeMap[H];D=I.getName(J);E.html("<input type='text'>");M=E.find("input").val(D).keydown(function(Q){if(Q.keyCode==t||Q.keyCode==B){C(h(this).val());return false}else{if(Q.keyCode==z){setTimeout(function(){O()},10);return false}}}).blur(function(Q){C(h(this).val())}).get(0);mvc.setFocus(M,0);M.select()},deleteNode:function(D){var E=this.options;var I=D.parents("ul").eq(0).prev();var C=x(D.parent());var K,G,J;var F=D.children(n);var L=F.hasClass(l);var M=this._getData(r)==F.get(0);var H=D.hasClass(i);delete E.treeMap[C];K=D.parent();if(H||M){G=K.next();if(G.length===0){G=K.prev();if(G.length>0){if(G.hasClass(d)){G=G.find("li:visible:last")}}else{G=K.parent().parent("li")}}if(M){if(G.length>0){J=G.find(".treeItem > .nodelabel").get(0);J.tabIndex=0;this._setData(r,J)}else{this._setData(r,null)}}if(G.length>0){if(H){this.selectNode(G.children(q),L)}}}K.remove();this._makeLeafIfNeeded(I)},destroy:function(){var C=this.element;C.unbind(".treeView");C.html("").removeClass(f);h.widget.prototype.destroy.apply(this,arguments)},_renderNode:function(H,I){var F=this.options;var G=F.nodeAdapter;var K=this.element;var D=(K.get(0).id||"")+"_";var J,E,C;E=F.nextNodeId;F.treeMap[E]=H;F.nextNodeId+=1;if(E===0&&F.showRoot&&!F.collapsibleRoot){J=false;C=g}else{J=G.hasChildren(H);C=J?g:A}I.markup("<li id='").attr(D+E).markup("' class='").attr(C).markup("'>");if(J===null||J===true){I.markup("<div class='hitarea'/>")}I.markup("<span class='treeItem'>");v(H,I,G);I.markup("</span>");I.markup("</li>")},_renderChildren:function(F,G,J,D){var K=this;var C=this.options;var E=C.nodeAdapter;var I;function H(){var L;for(L=0;L<I;L++){K._renderNode(E.child(F,L),G)}if(J){J(true)}}I=E.childCount(F);if(I===null){if(J){D.removeClass(d).addClass(p);E.fetchChildNodes(F,function(L){if(L){I=E.childCount(F);H()}else{J(false)}D.removeClass(p).addClass(d)})}}else{H()}},_makeParentIfNeeded:function(C){if(C&&C.prev("div").length===0){C.parent().removeClass(A);C.before("<div class='hitarea'></div>");C.after("<ul></ul>")}},_makeLeafIfNeeded:function(C){if(C&&C.next("ul").find("li").length===0){C.parent().removeClass(g).removeClass(d).addClass(A);C.prev(".hitarea").remove();C.next("ul").remove()}},_addChildrenIfNeeded:function(C){var H=this.options;var G=H.nodeAdapter;var F=H.treeMap[x(C)];var E,D;E=C.children("ul");if(E.length>0||C.hasClass(A)){return}else{D=mvc.htmlBuilder();D.markup("<ul>");this._renderChildren(F,D);D.markup("</ul>");C.append(D.toString()).children("ul").hide()}},_expandNode:function(C,F){var I=this.options;var H=I.nodeAdapter;var G=I.treeMap[x(C)];var E,D;C.removeClass(g).addClass(d);E=C.children("ul");if(E.length>0&&H.childCount(G)!==null){E.show();if(F){F()}}else{E.remove();D=mvc.htmlBuilder();D.markup("<ul>");this._renderChildren(G,D,function(J){if(J){D.markup("</ul>");C.append(D.toString());if(F){F()}}},C)}},_collapseNode:function(C){C.removeClass(d).addClass(g);if(C.find(u).length>0){this.selectNode(C.children(q),true)}C.children("ul").hide()},_delete:function(D){var C=this;var G=this.options;var F=G.nodeAdapter;var E=G.treeMap[x(D.parent())];if(F.allowDelete(E)){F.deleteNode(E,function(H){if(H){C.deleteNode(D)}})}},_rename:function(C){var F=this.options;var E=F.nodeAdapter;var D=F.treeMap[x(C.parent())];if(E.allowRename(D)){this.renameNode(C)}},_traverseDown:function(G){var C,D,F;var E=this._getData(r);if(!E){return}C=h(E).parent().parent();for(F=0;F<G;F++){if(C.hasClass(d)){C=C.find("ul:first li:first")}else{D=C.next();if(D.length>0){C=D}else{D=C.parents("ul").eq(0).parents("li").next("li");if(D.length===0){break}C=D}}}if(C.length>0){this.selectNode(C.children(q),true,true)}},_traverseUp:function(G){var C,D,F;var E=this._getData(r);if(!E){return}C=h(E).parent().parent();for(F=0;F<G;F++){D=C.prev();if(D.length>0){if(D.hasClass(d)){C=D.find("li:visible:last")}else{C=D}}else{D=C.parent().parent("li");if(D.length===0){break}C=D}}if(C.length>0){this.selectNode(C.children(q),true,true)}},_setFocusable:function(C){var E=C.get(0);var D=this._getData(r);if(D&&D!==E){D.tabIndex=-1}E.tabIndex=0;this._setData(r,E)}});h.extend(h.ui.treeView,{getter:["selection","selectionNodes","getNodes","find"],defaults:{showRoot:true,expandRoot:true,collapsibleRoot:true,multiSelect:false,nodeAdapter:null,triggerTimerId:null}})})(jQuery);
/*
  Method signature util
  Copyright (c) 2009, 2010, Oracle and/or its affiliates. All rights reserved.
*/
(function(){function b(m){var k=m.length;var n=0;var g=false;var f="";for(var j=0;j<k;j++){var d=m.charAt(j);var l=null;switch(d){case"[":n++;break;case"L":var e=j+1;j=m.indexOf(";",e);l=m.substring(e,j).replace(/\//g,".");break;case"B":l="byte";break;case"C":l="char";break;case"D":l="double";break;case"F":l="float";break;case"I":l="int";break;case"J":l="long";break;case"S":l="short";break;case"Z":l="boolean";break;case"V":l="void";break}if(l!==null){if(g){f=f+", "}f=f+l;for(var h=0;h<n;h++){f=f+"[]"}n=0;g=true}}return f}function a(d){if(!d){return""}var f=d.indexOf(")");var e=d.substring(1,f);return"("+b(e)+")"}function c(e){if(!e){return""}var f=e.indexOf(")");var d=e.substring(f+1);return b(d)}window.getFormattedMethodSignature=function(e,d){return c(d)+" "+e+a(d)}})();
/*
  Request Performance (Diagnostics) page.
  Copyright (c) 2010 Oracle and/or its affiliates. All rights reserved.
*/
(function(w){var l="span.nodelabel";var p="requestperf";var i="mvccore";var J="MISSING-CHILD-NODE";var A=mvc.getMessage(p,"req.perf.gap.node");var H="sortascicon";var j="sortdescicon";var B=1000000;var a=[{id:"reqInterDuration",prop:"reqInterDuration",type:"string",formatter:{fn:"deltatime",args:["m"]},constraints:["required","deltatime"]}];var d={reqInterDuration:""};var n=[{id:"reqInterCustomStart",prop:"reqInterCustomStart",type:"date",formatter:"datetime",constraints:["required","datetime"]},{id:"reqTimeCustomDuration",prop:"reqTimeCustomDuration",type:"string",formatter:{fn:"deltatime",args:["m"]},constraints:["required","deltatime"]}];var f={reqInterCustomStart:null,reqTimeCustomDuration:""};var z=mvc.uriTemplate("data/servers/{server}/diagnostics/instrumentation/requestInfoTrees?duration={duration}");var x=mvc.uriTemplate("data/servers/{server}/diagnostics/instrumentation/requestInfoTrees?duration={duration}&startDate={startDate}&startTime={startTime}");var D=mvc.uriTemplate("data/servers/{server}/diagnostics/instrumentation/requestInfoTree/{diagnosticContextId}");var e=[{label:mvc.getMessage(p,"req.perf.last.5.mins"),value:"5"},{label:mvc.getMessage(p,"req.perf.last.15.mins"),value:"15"},{label:mvc.getMessage(p,"req.perf.last.30.mins"),value:"30"},{label:mvc.getMessage(p,"req.perf.last.60.mins"),value:"60"},{label:mvc.getMessage(p,"req.perf.last.ddhhmm"),value:"ddhhmm"},{label:mvc.getMessage(p,"req.perf.custom.duration"),value:"custom"}];var y=[{label:mvc.getMessage(p,"req.perf.tree.note.contextId"),attrName:"contextId"},{label:mvc.getMessage(p,"req.perf.tree.note.elapsed"),attrName:"elapsedTime"}];var E=[{label:mvc.getMessage(p,"req.perf.grid.classname"),attrName:"className"},{label:mvc.getMessage(p,"req.perf.grid.methodname"),attrName:"methodName"},{label:mvc.getMessage(p,"req.perf.grid.count"),attrName:"invocationCount"},{label:mvc.getMessage(p,"req.perf.grid.totaltime"),attrName:"totalElapsedTime"},{label:mvc.getMessage(p,"req.perf.grid.averagetime"),attrName:"averageTime"},{label:mvc.getMessage(p,"req.perf.grid.scopename"),attrName:"scope"},{label:mvc.getMessage(p,"req.perf.grid.modulename"),attrName:"moduleName"},{label:mvc.getMessage(p,"req.perf.grid.signature"),attrName:"methodSignature"}];var u=[{label:mvc.getMessage(p,"req.perf.grid.contextid"),attrName:"contextId"},{label:mvc.getMessage(p,"req.perf.grid.transactionid"),attrName:"transactionId"},{label:mvc.getMessage(p,"req.perf.grid.user"),attrName:"userId"},{label:mvc.getMessage(p,"req.perf.grid.domainname"),attrName:"domainName"},{label:mvc.getMessage(p,"req.perf.grid.servername"),attrName:"serverName"},{label:mvc.getMessage(p,"req.perf.grid.startTime"),attrName:"startTime"},{label:mvc.getMessage(p,"req.perf.grid.elapsed"),attrName:"elapsedTime"},{label:mvc.getMessage(p,"req.perf.grid.elapsedPercent"),attrName:"elapsedTimePercent"},{label:mvc.getMessage(p,"req.perf.grid.scopename"),attrName:"scopeName"},{label:mvc.getMessage(p,"req.perf.grid.modulename"),attrName:"moduleName"},{label:mvc.getMessage(p,"req.perf.grid.monitorname"),attrName:"monitorName"},{label:mvc.getMessage(p,"req.perf.grid.filename"),attrName:"fileName"},{label:mvc.getMessage(p,"req.perf.grid.linenumber"),attrName:"lineNumber"},{label:mvc.getMessage(p,"req.perf.grid.classname"),attrName:"className"},{label:mvc.getMessage(p,"req.perf.grid.methodname"),attrName:"methodName"},{label:mvc.getMessage(p,"req.perf.grid.signature"),attrName:"signature"},{label:mvc.getMessage(p,"req.perf.grid.contextpayload"),attrName:"contextPayload"},{label:mvc.getMessage(p,"req.perf.grid.dyes"),attrName:"dyes"}];var I=[{label:mvc.getMessage(p,"req.perf.grid.elapsed"),attrName:"elapsedTime"},{label:mvc.getMessage(p,"req.perf.grid.elapsedPercent"),attrName:"elapsedTimePercent"}];function q(P,O){var N=mvc.htmlBuilder();var M=this;var L;if(P){N.markup("<div class='messagesbox' >");N.markup("<div class='tbframeContent' >");N.markup("<h1 class='messagestitle'>").content("Messages").markup("</h1>");N.markup("<div class='message' >");N.markup("<img alt='Message icon - Error' src='images/error_status.gif'>");N.markup("<span class='message_ERROR'>").content(mvc.getMessage(i,"validation.dialog.messageTitle")).markup("</span>");if(O){N.markup("<p>").content(O).markup("</p>")}N.markup("</div>");N.markup("</div>");N.markup("</div>");w("#asyncmessages").html(N.toString()).show()}else{w("#asyncmessages").html("").hide()}}function t(R,N,O){var Q,M;var P=mvc.htmlBuilder();var L=null;var V=null;var U=null;var S="ERROR";function T(W,Y,X){P.markup("<li><div>");P.markup("<span class='icon ").attr(V[W]).markup("'></span>").markup("<span class='screenReadersOnly'>").content(L[W]).markup(" </span>");P.markup("<span class='").attr(U[W]).markup("'>").content(Y).markup("</span></div>");if(X){P.markup("<div>").content(mvc.getMessage(i,"message.details")+" ").markup("<span class='").attr(U[W]).markup("'>").content(X).markup("</span></div>")}P.markup("</li>")}if(L===null){L={FATAL:mvc.getMessage(i,"message.severity.fatal"),ERROR:mvc.getMessage(i,"message.severity.error"),WARNING:mvc.getMessage(i,"message.severity.warning"),SUCCESS:mvc.getMessage(i,"message.severity.confirmation"),NORMAL:mvc.getMessage(i,"message.severity.information")}}if(V===null){V={FATAL:"fatal",ERROR:"error",WARNING:"warn",CONFIRMATION:"confirm",INFORMATION:"info"}}if(U===null){U={FATAL:"message_ERROR",ERROR:"message_ERROR",WARNING:"message_WARNING",SUCCESS:"message_SUCCESS",NORMAL:"message_NORMAL"}}P.markup("<div class='messagesbox' >");P.markup("<div class='tbframeContent' >");P.markup("<h1 class='messagestitle'>").content("Messages").markup("</h1>");P.markup("<div class='message' >");P.markup("<ul class='messageList'>");if(R===0||R==12029){T(S,mvc.getMessage(i,"message.status.connect"))}else{if(R==404){T(S,mvc.getMessage(i,"message.status.404"))}else{if(R==500){T(S,mvc.getMessage(i,"message.status.500"))}else{if(R<200||R>299){T(S,mvc.format(i,"message.status.other",R,N))}else{if(O){for(Q=0;Q<O.length;Q++){M=O[Q];T(M.severity,M.message,M.details)}}}}}}P.markup("</ul>");P.markup("</div>");P.markup("</div>");P.markup("</div>");w("#asyncmessages").html(P.toString()).show()}function h(M,N){var L=w("#reqTimeIntervals").val();if(L==="ddhhmm"){return M.store(d)}else{if(L==="custom"){return N.store(f)}}return true}function C(N){var M=N.className;var L=N.methodName;if(M===null&&L===J){return true}else{return false}}function o(){var S=[];var Q=w("#reqTimeIntervals").val();if(Q==="ddhhmm"){var V=w("#reqInterDuration").val().trim();w("#reqInterDuration").val(V);var P=V.split(" ");var U=0;if(P.length===2){U=P[0];V=P[1]}P=V.split(":");S[0]=(parseInt(U,10)*24*60+parseInt(P[0],10)*60+parseInt(P[1],10))*60000}else{if(Q==="custom"){var X=f.reqInterCustomStart;var M=(X.getUTCMonth()+1)+"/"+X.getUTCDate()+"/"+X.getUTCFullYear();var L=X.getUTCHours()+":"+X.getUTCMinutes();var N=w("#reqTimeCustomDuration").val().trim();w("#reqTimeCustomDuration").val(N);var O=N.split(" ");var T=0;if(O.length===2){T=O[0].trim();N=O[1].trim()}var W=N.split(":");var R=parseInt(T,10)*24*60+parseInt(W[0],10)*60+parseInt(W[1],10);S[0]=R*60000;S[1]=M;S[2]=L}else{S[0]=Q*60000}}return S}function G(L,P,N,M){var O=L.contextId;mvc.ajax("GET",D.expand({server:P,diagnosticContextId:O}),function(R){var Q=R.body.requestInfoTree.rootNodes;b(Q,2,L);L.stats=R.body.requestInfoTree.requestInfoStatisticsData;if(N){L.childNodesRendered=true;N(nodes)}if(M){L.childNodesRendered=false;M(L)}})}function b(Q,N,L){var O=[];for(var P=0;P<Q.length;P++){O[P]=Q[P].requestInfo;O[P].nodeLevel=N;O[P].parentNode=L;var M=Q[P].childNodes;if(M){b(M,++N,O[P])}}L.childNodes=O}function r(N){var L=o();var M;if(L.length===1){M=z.expand({server:N,duration:L[0]})}else{if(L.length===3){M=x.expand({server:N,duration:L[0],startDate:L[1],startTime:L[2]})}}mvc.ajax("GET",M,function(W){var P=W.body;P.nodeLevel=0;var Q=P.requestInfoTrees;var V=[];for(var T=0;T<Q.length;T++){V[T]=Q[T].rootNodes[0].requestInfo;V[T].nodeLevel=1;V[T].parentNode=P}P.childNodes=V;var U=P.childNodes.length;if(U===0){w("#selRequestTree").html(mvc.getMessage(p,"req.perf.no.requests.found"));return}var O=0;var R;for(var S=0;S<U;S++){R=P.childNodes[S];if(R.elapsedTime>O){O=R.elapsedTime}}w("#selRequestTree").treeView({expandRoot:true,collapsibleRoot:false,nodeAdapter:{root:function(){return P},child:function(Y,X){return Y.childNodes[X]},hasChildren:function(X){if(X.nodeLevel===1){return true}else{if(X.childNodes&&X.childNodes.length>0){return true}else{return false}}},childCount:function(X){if(X.childNodes){return X.childNodes.length}else{return null}},renderIcon:function(ab,Z){var aa,Y,ac,X;if(ab.nodeLevel===0){return}if(ab.nodeLevel===1){aa=((ab.elapsedTime/O)*50);Y="innerrootbar";ac="outerrootbar"}else{X=ab.parentNode;aa=((ab.elapsedTime/X.elapsedTime)*50);Y="innerchildbar";ac="outerchildbar"}Z.markup("<span class='"+ac+"'><span class='"+Y+"' style='width:"+aa+"px;'></span></span>&nbsp;")},renderLabel:function(aa,ab){if(aa.nodeLevel===0){ab.content(mvc.getMessage(p,"req.perf.tree.root.label"));return}var ac=aa.contextId;var ae=aa.className;var ag=aa.methodName;var X=aa.scopeName;var Z=aa.startTime;if(aa.nodeLevel===1){var ah=ac.lastIndexOf("-");var ad=ac.substring(ah+1,ac.length);var af=new Date(Z);var Y=mvc.formatDateTime(af,{fullYear:true});ab.content(ad+"["+X+"] "+Y)}else{if(C(aa)){ab.content(A)}else{ab.content(ae+" "+ag)}}},allowRename:function(X){return false},allowDelete:function(X){return false},fetchChildNodes:function(Y,Z){if(Y&&Y.childNodes){Y.childNodesRendered=true;Z(Y.childNodes)}else{var X=Y.nodeLevel;if(X==1){G(Y,N,Z,null)}else{Z(null)}}}}})})}function s(L){mvc.ajax("GET","data/diagnostics/runningServers",function(M){var T=[],S,Q,R;var O=w("#reqServers");var P=mvc.htmlBuilder();P.markup("<select id='reqServers'>");if(M){T=M.body.servers}R=O.val();for(Q=0;Q<T.length;Q++){S=T[Q];if(R===null){P.markup("<option value='").attr(S).markup("'").optionalBoolAttr("selected",Q===0).markup(">")}else{P.markup("<option value='").attr(S).markup("'").optionalBoolAttr("selected",S===R).markup(">")}P.content(S).markup("</option>")}P.markup("</select>");O.replaceWith(P.toString());var N=w("#reqServers").val();if(L&&N.trim().length>0){r(N)}})}function g(){var N=w("#reqTimeIntervals");var P="5";var L=mvc.htmlBuilder();var O;for(var M=0;M<e.length;M++){O=e[M];if(O){L.markup("<option value='").attr(O.value).markup("'").optionalBoolAttr("selected",O.value===P).markup(">");L.content(O.label).markup("</option>")}}N.html(L.toString());w("#reqTimeInterDuration").hide();w("#reqTimeInterCustom").hide()}function k(N){var L=mvc.htmlBuilder();L.markup("<table summary='"+mvc.getMessage(p,"req.perf.note.table.summary")+"' class='datatable'>");for(var M=0;M<y.length;M++){if(y[M]){L.markup("<tr class='rowEven'><td>").content(y[M].label);L.markup("</td><td>");if(y[M].attrName==="elapsedTime"){L.content(N[y[M].attrName]/B)}else{L.content(N[y[M].attrName])}L.markup("</td></tr>")}}L.markup("</table>");w("#requestNoteData").html(L.toString())}function F(S,L,R){var M=mvc.htmlBuilder();M.markup("<table summary='"+mvc.getMessage(p,"req.perf.table.summary")+"' class='datatable'><tr class='headerRow'>");for(var N=0;N<E.length;N++){if(E[N]){if(E[N].attrName===L){M.markup("<th class='sortable "+R+"' id='"+E[N].attrName+"' >").content(E[N].label).markup("</th>")}else{M.markup("<th class='sortable sortasc' id='"+E[N].attrName+"' >").content(E[N].label).markup("</th>")}}}M.markup("</tr>");var T,Q=0;for(var P=0;P<S.length;P++){T=S[P];if(Q===0){M.markup("<tr class='rowEven' >");Q=1}else{M.markup("<tr class='rowOdd' >");Q=0}for(var O=0;O<E.length;O++){if(E[O]){M.markup("<td>");M.content(T[E[O].attrName]);M.markup("</td>")}}M.markup("</tr>")}M.markup("</table>");w("#requestData").html(M.toString());w("#requestData .datatable .sortable").click(function(){K(S,w(this))});w("#requestData .datatable .sortable").hover(function(){if(w(this).is(".sortasc")){w(this).addClass(H)}else{if(w(this).is(".sortdesc")){w(this).addClass(j)}else{w(this).addClass(H)}}},function(){w(this).removeClass(H).removeClass(j)})}function K(L,N){var O=N.attr("id");var M="sortasc";if(N.is(".sortdesc")){L.sort(function(R,Q){var P=R[O],S=Q[O];return S>P?1:S<P?-1:0});M="sortasc"}else{L.sort(function(R,Q){var P=R[O],S=Q[O];return P>S?1:P<S?-1:0});M="sortdesc"}F(L,O,M)}function v(S){var N=mvc.htmlBuilder();var T=S.stats;k(S);if(C(S)){w("#requestData").html("");return}var U;if(!S.statsMassaged||S.statsMassaged!==true){for(var R=0;R<T.length;R++){U=T[R];for(var O=0;O<E.length;O++){if(E[O]){N.markup("<td>");if(E[O].attrName==="totalElapsedTime"){var M=parseInt(U.totalElapsedTime,10);U[E[O].attrName]=(M/B)}else{if(E[O].attrName==="averageTime"){var P=U.invocationCount;var L=(U.totalElapsedTime)/P;U[E[O].attrName]=L}else{if(E[O].attrName==="moduleName"){U[E[O].attrName]=S[E[O].attrName]}else{if(E[O].attrName==="methodSignature"){U[E[O].attrName]=getFormattedMethodSignature(U.methodName,U[E[O].attrName])}}}}}}}S.statsMassaged=true}var Q="className";T.sort(function(X,W){var V=X[Q],Y=W[Q];return V>Y?1:V<Y?-1:0});F(T,Q,"sortdesc")}function m(R){w("#requestNoteData").html("");var N=mvc.htmlBuilder();N.markup("<table summary='"+mvc.getMessage(p,"req.perf.grid.summary")+"' class='datatable'><tr class='headerRow'>");N.markup("<th>").content(mvc.getMessage(p,"req.perf.grid.attribute")).markup("</th>").markup("<th>").content(mvc.getMessage(p,"req.perf.grid.value")).markup("</th>");N.markup("</tr>");var L=0,Q;for(var P=0;P<u.length;P++){if(u[P]){if(C(R)){if(u[P].attrName!=="elapsedTime"&&u[P].attrName!=="elapsedTimePercent"){continue}}if(L===0){N.markup("<tr class='rowEven' >");L=1}else{N.markup("<tr class='rowOdd' >");L=0}N.markup("<td>").content(u[P].label);N.markup("</td><td>");if(u[P].attrName==="elapsedTime"){N.content(R.elapsedTime/B)}else{if(u[P].attrName==="elapsedTimePercent"){var M=((R.elapsedTime/R.parentNode.elapsedTime)*100);var O=M+"%";N.content(O)}else{if(u[P].attrName==="signature"){N.content(getFormattedMethodSignature(R.methodName,R[u[P].attrName]))}else{Q=R[u[P].attrName];if(Q===null){N.content("")}else{N.content(Q)}}}}N.markup("</td></tr>")}}w("#requestData").html(N.toString())}function c(L){var N=L[0];w("#requestNoteData").html("");w("#requestData").html("");if(!N||N.nodeLevel===0){return false}w("#requestData").html(mvc.getMessage(p,"req.perf.grid.fetching.data"));var M=mvc.htmlBuilder();if(N.nodeLevel===1){if(N.childNodes){v(N)}else{G(N,w("#reqServers").val(),null,v)}}else{m(N)}}w(document).ready(function(){mvc.ajaxOptions({processing:function(N){w("#pageStatus").toggleClass("busy",N);w("body").css("cursor",N?"wait":"auto")},reportStatus:t,sessionExpired:function(){window.location.reload()}});document.title=mvc.getMessage(p,"request.performance.title");w("a.dol10n, span.dol10n, button.dol10n").each(function(){var N=w(this).html();if(N&&N.indexOf("<")==-1){w(this).html(mvc.getMessage(p,N)).removeClass("dol10n")}N=w(this).attr("title");if(N){w(this).attr("title",mvc.getMessage(p,N))}});w("label.dol10n").each(function(){var N=w(this).html();w(this).html(mvc.getMessage(p,N)+":").removeClass("dol10n");N=w(this).attr("title");if(N){w(this).attr("title",mvc.getMessage(p,N))}});w("option.dol10n").each(function(){var N=w(this).html();w(this).html(mvc.getMessage(p,N)).removeClass("dol10n")});w("img.dol10n").each(function(){var N=w(this).attr("alt");w(this).attr("alt",mvc.getMessage(p,N)+" ").removeClass("dol10n")});g();s(true);var L=mvc.formHelper(a,{formErrorHandler:q});L.load(d);var M=mvc.formHelper(n,{formErrorHandler:q});M.load(f);mvc.ajax("GET","data/diagnostics/toolbar",function(N){var O=mvc.htmlBuilder();if(N){mvc.setLocaleSettings(N.body.localeSettings);w("#reqInterCustomStartFormat").text(mvc.getDateTimeDisplayFormat())}});w("#refresh").click(function(){if(h(L,M)){w("#selRequestTree").treeView("destroy");w("#requestNoteData").html("");w("#requestData").html("");w("#selRequestTree").html(mvc.getMessage(p,"req.perf.refreshing.requests"));r(w("#reqServers").val())}});w("#reload").click(function(){s(false)});w("#reqTimeIntervals").change(function(){var N=w("option:selected",this).val();if(N==="ddhhmm"){w("#intervalFields").attr("class","intervalFieldsShown");w("#reqTimeInterCustom").hide();w("#reqTimeInterDuration").css({display:"inline"})}else{if(N==="custom"){w("#intervalFields").attr("class","intervalFieldsShown");w("#reqTimeInterDuration").hide();w("#reqTimeInterCustom").css({display:"inline"})}else{w("#intervalFields").attr("class","intervalFieldsHidden");w("#reqTimeInterDuration").hide();w("#reqTimeInterCustom").hide()}}});w("#selRequestTree").bind("treeViewchange",function(){var N=w("#selRequestTree").treeView("selectionNodes");c(N)})})})(jQuery);